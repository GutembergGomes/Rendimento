<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GGOMES-LOG | Sistema de Gestão Agrícola</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- jsPDF para relatórios -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/jspdf-autotable@3.5.28/dist/jspdf.plugin.autotable.js"></script>
    
    <script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: {
                    primary: {
                        50: '#f4f3ff',
                        100: '#e9e8ff',
                        200: '#d7d5ff',
                        300: '#bab8ff',
                        400: '#9a97ff',
                        500: '#7c7aff',
                        600: '#5D5CDE', // Cor principal 
                        700: '#5a55cc',
                        800: '#4a46a8',
                        900: '#383670',
                        950: '#201f45',
                    }
                },
                fontFamily: {
                    'sans': ['Inter', 'sans-serif'],
                },
                spacing: {
                    '128': '32rem',
                },
            }
        }
    }
    </script>
    
    <style>
        /* Animações para ícones meteorológicos */
        .icon-sun {
            animation: pulse 2s infinite;
        }
        
        .icon-rain {
            animation: bounce 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        
        /* Esconder scrollbar mas manter funcionalidade */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Transições suaves */
        .page-transition {
            transition: all 0.3s ease-in-out;
        }
        
        /* Tabs do dashboard */
        .dashboard-tab {
            transition: all 0.2s ease-in-out;
        }
        
        .tab-active {
            border-bottom: 2px solid #5D5CDE;
            color: #5D5CDE;
        }
        
        .dark .tab-active {
            border-bottom: 2px solid #7c7aff;
            color: #7c7aff;
        }
        
        /* Animação de fade-in para toasts */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">
    <!-- Container principal da aplicação -->
    <div id="app-container" class="flex h-screen overflow-hidden">
        <!-- Menu lateral (Sidebar) -->
        <aside class="w-64 hidden md:block bg-white dark:bg-gray-800 shadow-md z-10 flex-shrink-0">
            <div class="h-full flex flex-col">
                <!-- Logo e título -->
                <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-center">
                    <h1 class="text-xl font-bold text-primary-600 dark:text-primary-400">GGOMES-LOG</h1>
                </div>
                
                <!-- Informações do usuário -->
                <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                    <div class="flex items-center">
                        <div class="h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center">
                            <i class="fas fa-user text-primary-600 dark:text-primary-400"></i>
                        </div>
                        <div class="ml-3">
                            <p id="sidebar-user-name" class="font-medium text-gray-800 dark:text-white">Administrador</p>
                            <p id="sidebar-user-role" class="text-xs text-gray-500 dark:text-gray-400">Administrador</p>
                        </div>
                    </div>
                </div>
                
                <!-- Links de navegação -->
                <div class="py-4 flex-1 overflow-y-auto scrollbar-hide">
                    <nav class="px-2 space-y-1">
                        <a href="#dashboard" class="sidebar-link active bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 flex items-center px-4 py-2 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-tachometer-alt mr-3 text-lg"></i>
                            <span>Dashboard</span>
                        </a>
                        
                        <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Produção
                        </div>
                        
                        <a href="#colhedoras" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-tractor mr-3 text-lg"></i>
                            <span>Colhedoras</span>
                        </a>
                        
                        <a href="#registros" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-file-alt mr-3 text-lg"></i>
                            <span>Registrar Produção</span>
                        </a>
                        
                        <a href="#consumos" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-oil-can mr-3 text-lg"></i>
                            <span>Consumo de Óleos</span>
                        </a>
                        
                        <a href="#historico" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-history mr-3 text-lg"></i>
                            <span>Histórico</span>
                        </a>
                        
                        <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Clima e Paradas
                        </div>
                        
                        <a href="#chuvas" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-cloud-rain mr-3 text-lg"></i>
                            <span>Registro de Chuvas</span>
                        </a>
                        
                        <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Logística
                        </div>
                        
                        <a href="#caminhoes" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-truck mr-3 text-lg"></i>
                            <span>Caminhões</span>
                        </a>
                        
                        <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Sistema
                        </div>
                        
                        <a href="#configuracoes" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-cog mr-3 text-lg"></i>
                            <span>Configurações</span>
                        </a>
                    </nav>
                </div>
                
                <!-- Rodapé do sidebar -->
                <div class="p-4 border-t border-gray-200 dark:border-gray-700 text-center">
                    <p class="text-xs text-gray-500 dark:text-gray-400">GGOMES-LOG &copy; 2023</p>
                    <p class="text-xs text-gray-500 dark:text-gray-400">Versão 1.0</p>
                </div>
            </div>
        </aside>
        
        <!-- Conteúdo principal -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Barra superior (Header) -->
            <header class="bg-white dark:bg-gray-800 shadow-sm z-10">
                <div class="flex items-center justify-between px-4 py-2 border-b border-gray-200 dark:border-gray-700">
                    <!-- Toggle do menu lateral (mobile) -->
                    <button id="mobile-menu-toggle" class="md:hidden p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    <!-- Informações rápidas -->
                    <div class="hidden md:flex items-center space-x-4">
                        <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded-md">
                            <div class="flex items-center">
                                <div class="flex items-center">
                                    <i class="fas fa-weight-hanging text-blue-500 mr-2"></i>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">Total Colhido</span>
                                </div>
                                <div class="ml-2">
                                    <span id="quick-total-colhido" class="font-semibold text-gray-800 dark:text-white">0 T</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded-md">
                            <div class="flex items-center">
                                <div class="flex items-center">
                                    <i class="fas fa-tractor text-yellow-500 mr-2"></i>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">Colhedoras</span>
                                </div>
                                <div class="ml-2">
                                    <span id="quick-colhedoras" class="font-semibold text-gray-800 dark:text-white">0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded-md">
                            <div class="flex items-center">
                                <div class="flex items-center">
                                    <i class="fas fa-cloud-rain text-red-500 mr-2"></i>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">Paradas</span>
                                </div>
                                <div class="ml-2">
                                    <span id="quick-paradas-chuva" class="font-semibold text-gray-800 dark:text-white">0 dias</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ações e perfil do usuário -->
                    <div class="flex items-center space-x-3">
                        <!-- Informações meteorológicas -->
                        <div class="hidden sm:flex items-center mr-2 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-md">
                            <i id="weather-icon" class="text-blue-500 mr-2"></i>
                            <span id="weather-temp" class="text-sm font-medium text-gray-700 dark:text-gray-300">--°C</span>
                        </div>
                        
                        <!-- Data atual -->
                        <div class="hidden sm:block mr-2">
                            <span id="current-date" class="text-sm text-gray-600 dark:text-gray-400">--/--/----</span>
                        </div>
                        
                        <!-- Toggle de tema claro/escuro -->
                        <button id="toggle-theme" class="p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700">
                            <i class="fas fa-moon dark:hidden"></i>
                            <i class="fas fa-sun hidden dark:inline-block"></i>
                        </button>
                        
                        <!-- Ícone de notificações -->
                        <button id="btn-notifications" class="p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700 relative">
                            <i class="fas fa-bell"></i>
                            <span id="notification-badge" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                        </button>
                        
                        <!-- Perfil do usuário -->
                        <div class="flex items-center">
                            <div class="mr-2 text-right hidden sm:block">
                                <div id="user-name" class="text-sm font-medium text-gray-800 dark:text-white">Administrador</div>
                                <div class="flex items-center">
                                    <span id="user-role-badge" class="px-2 py-1 rounded text-xs font-medium bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300">Admin</span>
                                </div>
                            </div>
                            <div class="h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center">
                                <i class="fas fa-user text-primary-600 dark:text-primary-400"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Conteúdo principal -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900 p-4">
                <!-- Toast container para mensagens -->
                <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-4"></div>
                
                <!-- Conteúdo do dashboard -->
                <div id="content-dashboard" class="content">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Dashboard</h2>
                        <p class="text-gray-600 dark:text-gray-400">Resumo da operação e indicadores de desempenho</p>
                    </div>
                    
                    <!-- Tabs do dashboard -->
                    <div class="border-b border-gray-200 dark:border-gray-700 mb-4">
                        <div class="flex overflow-x-auto scrollbar-hide">
                            <button data-tab="producao" class="dashboard-tab tab-active px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Produção e Produtividade
                            </button>
                            <button data-tab="caminhoes" class="dashboard-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Caminhões e Logística
                            </button>
                            <button data-tab="chuvas" class="dashboard-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Paradas por Chuva
                            </button>
                            <button data-tab="consumos" class="dashboard-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Consumo de Óleos
                            </button>
                            <button data-tab="estatisticas" class="dashboard-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Estatísticas Gerais
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filtro de período -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <div class="flex flex-wrap items-center">
                            <div class="w-full md:w-auto mr-4 mb-2 md:mb-0">
                                <label for="dashboard-period" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Período:</label>
                                <select id="dashboard-period" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    <option value="7">Últimos 7 dias</option>
                                    <option value="15">Últimos 15 dias</option>
                                    <option value="30" selected>Últimos 30 dias</option>
                                    <option value="90">Últimos 90 dias</option>
                                    <option value="180">Últimos 6 meses</option>
                                    <option value="365">Último ano</option>
                                    <option value="0">Todo o período</option>
                                </select>
                            </div>
                            <div class="w-full md:w-auto">
                                <button id="refresh-dashboard" class="mt-5 inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-sync-alt mr-2"></i> Atualizar Dashboard
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Produção e Produtividade" -->
                    <div id="tab-producao" class="dashboard-tab-content">
                        <!-- Produção do Dia (Nova seção) -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Produção do Dia</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div id="card-producao-hoje" class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Colhido Hoje</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="producao-hoje-total" class="text-2xl font-bold text-blue-600 dark:text-blue-400">0 T</span>
                                    </div>
                                </div>
                                
                                <div id="card-produtividade-hoje" class="bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Média Hora Hoje</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="producao-hoje-hora" class="text-2xl font-bold text-purple-600 dark:text-purple-400">0 T/h</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cards de indicadores -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Total colhido -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Colhido</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-total-colhido" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-weight-hanging text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div id="dash-total-trend" class="text-xs text-gray-500 dark:text-gray-400">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                        <div id="dash-total-progress" class="bg-green-500 h-1.5 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Média Geral -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média Geral</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-media-geral" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T/dia</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-calculator text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div id="dash-media-trend" class="text-xs text-gray-500 dark:text-gray-400">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                        <div id="dash-media-progress" class="bg-green-500 h-1.5 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Média do Dia -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média do Dia</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-media-dia" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T/dia</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-calendar-day text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div id="dash-media-dia-trend" class="text-xs text-gray-500 dark:text-gray-400">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                        <div id="dash-media-dia-progress" class="bg-green-500 h-1.5 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Paradas por chuva -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Paradas por Chuva</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-paradas-chuva" class="text-2xl font-semibold text-gray-900 dark:text-white">0 dias</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-cloud-rain text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div id="dash-paradas-trend" class="text-xs text-gray-500 dark:text-gray-400">
                                        <i class="fas fa-arrow-down mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                        <div id="dash-paradas-progress" class="bg-red-500 h-1.5 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Relatório de Médias de Equipamentos -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <div class="flex justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Relatório de Médias dos Equipamentos</h3>
                                <button class="btn-exportar-equipamentos inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                    <i class="fas fa-file-export mr-1"></i> Exportar
                                </button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Colhedora</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Média Diária (T/dia)</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Rendimento (T/h)</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Eficiência</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tabela-medias-equipamentos" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <!-- Dados serão preenchidos via JavaScript -->
                                        <tr>
                                            <td colspan="4" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                Carregando dados...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Seção de desempenho -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                            <!-- Melhores colhedoras -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Melhores Colhedoras</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Melhor Rendimento</p>
                                            <p id="best-yield-colhedora" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-yield-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T/h</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Maior Volume</p>
                                            <p id="best-volume-colhedora" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-volume-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Média Diária</p>
                                            <p id="best-daily-colhedora" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-daily-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T/dia</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Melhores culturas -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Desempenho por Cultura</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Melhor Rendimento</p>
                                            <p id="best-yield-cultura" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-yield-cultura-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T/h</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Maior Volume</p>
                                            <p id="best-volume-cultura" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-volume-cultura-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Média Diária</p>
                                            <p id="best-daily-cultura" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-daily-cultura-value" class="text-sm font-semibold text-blue-600 dark:text-blue-400">0 T/dia</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Distribuição por cultura -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Distribuição por Cultura</h3>
                                <div class="h-48">
                                    <canvas id="chart-culturas"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráficos principais -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Comparativo de colhedoras -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Comparativo de Colhedoras</h3>
                                <div class="h-64">
                                    <canvas id="chart-colhedoras-comparacao"></canvas>
                                </div>
                            </div>
                            
                            <!-- Produção ao longo do tempo -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Produção ao Longo do Tempo</h3>
                                <div class="h-64">
                                    <canvas id="chart-producao-tempo"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Caminhões e Logística" -->
                    <div id="tab-caminhoes" class="dashboard-tab-content hidden">
                        <!-- Cards de indicadores -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Total de caminhões -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Caminhões</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-total-caminhoes" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-truck text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tempo médio de campo -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Tempo Médio de Campo</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-tempo-campo" class="text-2xl font-semibold text-gray-900 dark:text-white">0 min</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-stopwatch text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tempo médio de pátio -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Tempo Médio de Pátio</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-tempo-patio" class="text-2xl font-semibold text-gray-900 dark:text-white">0 min</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-warehouse text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Produção transportada -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Produção Transportada</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-producao-transportada" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-shipping-fast text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráficos -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- Produção por tipo de caminhão -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Produção por Tipo</h3>
                                <div class="h-64">
                                    <canvas id="chart-caminhoes-tipo"></canvas>
                                </div>
                            </div>
                            
                            <!-- Tempo médio por caminhão -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Tempo Médio por Caminhão</h3>
                                <div class="h-64">
                                    <canvas id="chart-caminhoes-tempo"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Paradas por Chuva" -->
                    <div id="tab-chuvas" class="dashboard-tab-content hidden">
                        <!-- Cards de indicadores -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Total de dias parados -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Dias Parados</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-total-dias-parados" class="text-2xl font-semibold text-gray-900 dark:text-white">0 dias</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-cloud-rain text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Impacto estimado -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Impacto Estimado</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-impacto-estimado" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-chart-line-down text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Última parada -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Última Parada</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-ultima-parada" class="text-2xl font-semibold text-gray-900 dark:text-white">--/--/----</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-calendar-alt text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Total de registros -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Registros</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-total-registros-chuva" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-list-alt text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráficos -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- Dias parados por mês -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Dias Parados por Mês</h3>
                                <div class="h-64">
                                    <canvas id="chart-paradas-mes"></canvas>
                                </div>
                            </div>
                            
                            <!-- Distribuição por intensidade -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Distribuição por Intensidade</h3>
                                <div class="h-64">
                                    <canvas id="chart-paradas-intensidade"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Consumo de Óleos" -->
                    <div id="tab-consumos" class="dashboard-tab-content hidden">
                        <!-- Conteúdo de Consumo de Óleos -->
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Consumo de Combustíveis e Óleos</h3>
                        <p class="text-gray-600 dark:text-gray-400 mb-4">Resumo do consumo de óleo diesel e óleo hidráulico por equipamento.</p>
                        
                        <!-- Cards de indicadores -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Total de diesel -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Diesel</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="total-diesel" class="text-2xl font-semibold text-gray-900 dark:text-white">0 L</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-gas-pump text-xl text-yellow-600 dark:text-yellow-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Total de óleo hidráulico -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Hidráulico</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="total-hidraulico" class="text-2xl font-semibold text-gray-900 dark:text-white">0 L</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-oil-can text-xl text-green-600 dark:text-green-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Consumo médio L/h -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Consumo Médio</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="consumo-medio-litro-hora" class="text-2xl font-semibold text-gray-900 dark:text-white">0 L/h</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-tachometer-alt text-xl text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Total de registros -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Abastecimentos</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="total-abastecimentos" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-clipboard-list text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráfico de consumo -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- Gráfico de consumo por equipamento -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Consumo por Equipamento</h3>
                                <div class="h-64">
                                    <canvas id="chart-consumo-equipamento"></canvas>
                                </div>
                            </div>
                            
                            <!-- Gráfico de evolução temporal -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Evolução do Consumo</h3>
                                <div class="h-64">
                                    <canvas id="chart-evolucao-consumo"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tabela de equipamentos e seu consumo -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <div class="flex justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Consumo por Equipamento</h3>
                                <button id="btn-export-consumo" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                    <i class="fas fa-file-export mr-1"></i> Exportar
                                </button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Equipamento</th>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tipo</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Diesel (L)</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Hidráulico (L)</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Média (L/h)</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tabela-consumo-equipamentos" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <!-- Dados serão preenchidos via JavaScript -->
                                        <tr>
                                            <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                Carregando dados...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Estatísticas Gerais" -->
                    <div id="tab-estatisticas" class="dashboard-tab-content hidden">
                        <!-- Estatísticas de produção -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Estatísticas de Produção</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Colhido</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-total-colhido" class="text-xl font-bold text-blue-600 dark:text-blue-400">0 T</span>
                                    </div>
                                </div>
                                
                                <div class="bg-green-50 dark:bg-green-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Rendimento Médio</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-rendimento-medio" class="text-xl font-bold text-green-600 dark:text-green-400">0 T/h</span>
                                    </div>
                                </div>
                                
                                <div class="bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Registros Totais</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-registros-totais" class="text-xl font-bold text-purple-600 dark:text-purple-400">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Estatísticas de frota -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Estatísticas de Frota</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total de Caminhões</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-total-caminhoes" class="text-xl font-bold text-yellow-600 dark:text-yellow-400">0</span>
                                    </div>
                                </div>
                                
                                <div class="bg-red-50 dark:bg-red-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Tempo Médio Total</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-tempo-medio-total" class="text-xl font-bold text-red-600 dark:text-red-400">0 min</span>
                                    </div>
                                </div>
                                
                                <div class="bg-indigo-50 dark:bg-indigo-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Viagens Registradas</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-viagens-registradas" class="text-xl font-bold text-indigo-600 dark:text-indigo-400">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Estatísticas de consumo -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Estatísticas de Consumo</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-amber-50 dark:bg-amber-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Óleo Diesel</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-total-diesel" class="text-xl font-bold text-amber-600 dark:text-amber-400">0 L</span>
                                    </div>
                                </div>
                                
                                <div class="bg-emerald-50 dark:bg-emerald-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Óleo Hidráulico</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-total-hidraulico" class="text-xl font-bold text-emerald-600 dark:text-emerald-400">0 L</span>
                                    </div>
                                </div>
                                
                                <div class="bg-cyan-50 dark:bg-cyan-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Eficiência (T/L)</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="stats-eficiencia-litro" class="text-xl font-bold text-cyan-600 dark:text-cyan-400">0 T/L</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Colhedoras -->
                <div id="content-colhedoras" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Colhedoras</h2>
                        <p class="text-gray-600 dark:text-gray-400">Cadastro e gerenciamento de colhedoras</p>
                    </div>
                    
                    <!-- Formulário de cadastro de colhedora -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Cadastrar Colhedora</h3>
                                
                                <form id="form-colhedora">
                                    <div class="mb-4">
                                        <label for="colhedora-id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ID da Colhedora</label>
                                        <input type="text" id="colhedora-id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: COL-001" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="colhedora-marca" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Marca</label>
                                        <input type="text" id="colhedora-marca" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: John Deere">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="colhedora-modelo" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Modelo</label>
                                        <input type="text" id="colhedora-modelo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 9670 STS">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="colhedora-ano" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Ano</label>
                                        <input type="number" id="colhedora-ano" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 2021">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="colhedora-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="colhedora-observacoes" rows="3" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                    
                                    <div class="flex items-center space-x-2">
                                        <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-save mr-2"></i> Salvar Colhedora
                                        </button>
                                        <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-times mr-2"></i> Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <div class="lg:col-span-2">
                            <!-- Lista de colhedoras -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between mb-3">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Colhedoras Cadastradas</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-add-colhedora" class="inline-flex items-center px-3 py-1 bg-primary-600 hover:bg-primary-700 text-white text-sm font-medium rounded-lg">
                                            <i class="fas fa-plus mr-1"></i> Nova Colhedora
                                        </button>
                                        <button id="btn-export-colhedoras" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                            <i class="fas fa-file-export mr-1"></i> Exportar
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ID</th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Marca</th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Modelo</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ano</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-colhedoras" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Dados serão preenchidos via JavaScript -->
                                            <tr>
                                                <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                    Carregando colhedoras...
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Registros de Produção -->
                <div id="content-registros" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Registrar Produção</h2>
                        <p class="text-gray-600 dark:text-gray-400">Registro de produção diária das colhedoras</p>
                    </div>
                    
                    <!-- Grid de conteúdo -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Formulário de registro -->
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Novo Registro</h3>
                                
                                <form id="form-registro">
                                    <div class="mb-4">
                                        <label for="registro-data" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data</label>
                                        <input type="date" id="registro-data" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-colhedora" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Colhedora</label>
                                        <select id="registro-colhedora" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                            <option value="">Selecione uma colhedora</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-cultura" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Cultura</label>
                                        <select id="registro-cultura" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                            <option value="">Selecione uma cultura</option>
                                            <option value="Soja">Soja</option>
                                            <option value="Milho">Milho</option>
                                            <option value="Trigo">Trigo</option>
                                            <option value="Algodão">Algodão</option>
                                            <option value="Feijão">Feijão</option>
                                            <option value="Arroz">Arroz</option>
                                            <option value="Cana-de-açúcar">Cana-de-açúcar</option>
                                            <option value="Sorgo">Sorgo</option>
                                            <option value="Outra">Outra</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-quantidade" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Quantidade (T)</label>
                                        <input type="number" step="0.1" id="registro-quantidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 145.5" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-horas" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Horas Trabalhadas</label>
                                        <input type="number" step="0.5" id="registro-horas" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 8.5" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-combustivel" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Consumo de Combustível (L)</label>
                                        <input type="number" step="1" id="registro-combustivel" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 120">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="registro-observacoes" rows="2" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                    
                                    <div class="flex items-center space-x-2">
                                        <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-save mr-2"></i> Registrar Produção
                                        </button>
                                        <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-times mr-2"></i> Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Informações de produção -->
                        <div class="lg:col-span-2">
                            <!-- Cards de estatísticas -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Colhido</h3>
                                            <div class="flex items-baseline mt-1">
                                                <span id="total-colhido" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                            </div>
                                        </div>
                                        <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                            <i class="fas fa-weight-hanging text-xl text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Rendimento Médio</h3>
                                            <div class="flex items-baseline mt-1">
                                                <span id="rendimento-medio" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T/h</span>
                                            </div>
                                        </div>
                                        <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                            <i class="fas fa-tachometer-alt text-xl text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Paradas por Chuva</h3>
                                            <div class="flex items-baseline mt-1">
                                                <span id="paradas-chuva-total" class="text-2xl font-semibold text-gray-900 dark:text-white">0 dias</span>
                                            </div>
                                        </div>
                                        <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                            <i class="fas fa-cloud-rain text-xl text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tabela de produção por colhedora -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Produção por Colhedora</h3>
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Colhedora</th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Quantidade (T)</th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Rend. (T/h)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-colhedoras" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Dados serão preenchidos via JavaScript -->
                                            <tr>
                                                <td colspan="3" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                    Nenhum registro encontrado
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Consumo de Óleos -->
                <div id="content-consumos" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Consumo de Óleos</h2>
                        <p class="text-gray-600 dark:text-gray-400">Registro e acompanhamento de consumo de óleos por equipamento</p>
                    </div>
                    
                    <!-- Grid de conteúdo -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Formulário de registro -->
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Registrar Consumo</h3>
                                
                                <form id="form-consumo">
                                    <div class="mb-4">
                                        <label for="consumo-data" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data</label>
                                        <input type="date" id="consumo-data" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="consumo-tipo-equipamento" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tipo de Equipamento</label>
                                        <select id="consumo-tipo-equipamento" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                            <option value="">Selecione o tipo</option>
                                            <option value="colhedora">Colhedora</option>
                                            <option value="caminhao">Caminhão</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="consumo-equipamento" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Equipamento</label>
                                        <select id="consumo-equipamento" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required disabled>
                                            <option value="">Selecione o equipamento</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="consumo-tipo-oleo" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tipo de Óleo</label>
                                        <select id="consumo-tipo-oleo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                            <option value="">Selecione o tipo</option>
                                            <option value="diesel">Óleo Diesel</option>
                                            <option value="hidraulico">Óleo Hidráulico</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="consumo-quantidade" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Quantidade (Litros)</label>
                                        <input type="number" step="0.1" id="consumo-quantidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 120.5" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="consumo-horimetro" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Horímetro/Hodômetro</label>
                                        <input type="number" step="0.1" id="consumo-horimetro" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Leitura atual">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="consumo-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="consumo-observacoes" rows="2" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                    
                                    <div class="flex items-center space-x-2">
                                        <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-save mr-2"></i> Registrar Consumo
                                        </button>
                                        <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-times mr-2"></i> Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Resumo e estatísticas -->
                        <div class="lg:col-span-2">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                                <div class="flex justify-between mb-3">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Resumo de Consumo</h3>
                                    <button id="btn-export-consumo-historico" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                        <i class="fas fa-file-export mr-1"></i> Exportar
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                    <div class="bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Óleo Diesel</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="resumo-total-diesel" class="text-xl font-bold text-yellow-600 dark:text-yellow-400">0 L</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-50 dark:bg-green-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Óleo Hidráulico</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="resumo-total-hidraulico" class="text-xl font-bold text-green-600 dark:text-green-400">0 L</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Consumo Médio</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="resumo-media-consumo" class="text-xl font-bold text-blue-600 dark:text-blue-400">0 L/h</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Abastecimentos</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="resumo-total-abastecimentos" class="text-xl font-bold text-purple-600 dark:text-purple-400">0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tabela de histórico -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Histórico de Consumo</h3>
                                
                                <!-- Filtros -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                                    <div>
                                        <label for="filtro-consumo-tipo" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tipo de Óleo</label>
                                        <select id="filtro-consumo-tipo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                            <option value="">Todos</option>
                                            <option value="diesel">Diesel</option>
                                            <option value="hidraulico">Hidráulico</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label for="filtro-consumo-equipamento" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Equipamento</label>
                                        <select id="filtro-consumo-equipamento" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                            <option value="">Todos</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label for="filtro-consumo-data-inicio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Início</label>
                                        <input type="date" id="filtro-consumo-data-inicio" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    </div>
                                    
                                    <div>
                                        <label for="filtro-consumo-data-fim" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Fim</label>
                                        <input type="date" id="filtro-consumo-data-fim" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    </div>
                                </div>
                                
                                <div class="flex justify-end mb-4 space-x-2">
                                    <button id="btn-limpar-filtros-consumo" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                        <i class="fas fa-eraser mr-2"></i> Limpar Filtros
                                    </button>
                                    <button id="btn-aplicar-filtros-consumo" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                        <i class="fas fa-filter mr-2"></i> Aplicar Filtros
                                    </button>
                                </div>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Data</th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Equipamento</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tipo</th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Quantidade</th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Horímetro</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-historico-consumo" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Dados serão preenchidos via JavaScript -->
                                            <tr>
                                                <td colspan="6" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                    Nenhum registro encontrado
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Histórico -->
                <div id="content-historico" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Histórico</h2>
                        <p class="text-gray-600 dark:text-gray-400">Histórico completo de registros de produção</p>
                    </div>
                    
                    <!-- Filtros -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Filtros</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                            <div>
                                <label for="filtro-colhedora" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Colhedora</label>
                                <select id="filtro-colhedora" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    <option value="">Todas</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="filtro-cultura" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Cultura</label>
                                <select id="filtro-cultura" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    <option value="">Todas</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="filtro-data-inicio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Início</label>
                                <input type="date" id="filtro-data-inicio" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                            </div>
                            
                            <div>
                                <label for="filtro-data-fim" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Fim</label>
                                <input type="date" id="filtro-data-fim" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                            </div>
                        </div>
                        
                        <div class="flex justify-end space-x-2">
                            <button id="btn-limpar-filtros" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-eraser mr-2"></i> Limpar Filtros
                            </button>
                            <button id="btn-aplicar-filtros" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-filter mr-2"></i> Aplicar Filtros
                            </button>
                        </div>
                    </div>
                    
                    <!-- Tabela de registros -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                        <div class="flex justify-between mb-3">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Registros <span id="registros-contagem" class="text-sm text-gray-500 dark:text-gray-400 ml-2">(0)</span></h3>
                            <button id="btn-export-historico" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                <i class="fas fa-file-export mr-1"></i> Exportar
                            </button>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Data</th>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Colhedora</th>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Cultura</th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Quantidade</th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Horas</th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Rendimento</th>
                                        <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="tabela-registros" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                    <!-- Dados serão preenchidos via JavaScript -->
                                    <tr>
                                        <td colspan="7" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                            Nenhum registro encontrado
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Chuvas -->
                <div id="content-chuvas" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Registro de Chuvas</h2>
                        <p class="text-gray-600 dark:text-gray-400">Monitoramento de paradas por chuva e condições climáticas</p>
                    </div>
                    
                    <!-- Grid de conteúdo -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Formulário de registro -->
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Registrar Parada</h3>
                                
                                <form id="form-chuva">
                                    <div class="mb-4">
                                        <label for="chuva-data-inicio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Início</label>
                                        <input type="date" id="chuva-data-inicio" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="chuva-data-fim" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Fim</label>
                                        <input type="date" id="chuva-data-fim" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="chuva-dias" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Dias Parados</label>
                                        <input type="number" step="0.5" id="chuva-dias" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 2.5" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="chuva-intensidade" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Intensidade</label>
                                        <select id="chuva-intensidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                            <option value="">Selecione a intensidade</option>
                                            <option value="baixa">Baixa</option>
                                            <option value="media">Média</option>
                                            <option value="alta">Alta</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="chuva-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="chuva-observacoes" rows="3" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                    
                                    <div class="flex items-center space-x-2">
                                        <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-save mr-2"></i> Registrar Parada
                                        </button>
                                        <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-times mr-2"></i> Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Informações de chuvas -->
                        <div class="lg:col-span-2">
                            <!-- Cards de estatísticas -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Registros</h3>
                                            <div class="flex items-baseline mt-1">
                                                <span id="chuva-total-registros" class="text-2xl font-semibold text-gray-900 dark:text-white">0 registros</span>
                                            </div>
                                        </div>
                                        <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                            <i class="fas fa-list-alt text-xl text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Dias Parados</h3>
                                            <div class="flex items-baseline mt-1">
                                                <span id="chuva-total-dias" class="text-2xl font-semibold text-gray-900 dark:text-white">0 dias</span>
                                            </div>
                                        </div>
                                        <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                            <i class="fas fa-calendar-alt text-xl text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Última Parada</h3>
                                            <div class="flex items-baseline mt-1">
                                                <span id="chuva-ultima-parada" class="text-2xl font-semibold text-gray-900 dark:text-white">--/--/----</span>
                                            </div>
                                        </div>
                                        <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                            <i class="fas fa-history text-xl text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Impacto Estimado</h3>
                                            <div class="flex items-baseline mt-1">
                                                <span id="chuva-impacto-estimado" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                            </div>
                                        </div>
                                        <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                            <i class="fas fa-chart-line text-xl text-primary-600 dark:text-primary-400"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tabela de histórico de chuvas -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between mb-3">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Histórico de Paradas</h3>
                                    <button id="btn-export-chuvas" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                        <i class="fas fa-file-export mr-1"></i> Exportar
                                    </button>
                                </div>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Período</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Dias</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Intensidade</th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Observações</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-chuvas" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Dados serão preenchidos via JavaScript -->
                                            <tr>
                                                <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                    Nenhum registro encontrado
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Caminhões -->
                <div id="content-caminhoes" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Caminhões</h2>
                        <p class="text-gray-600 dark:text-gray-400">Gerenciamento de frota e logística</p>
                    </div>
                    
                    <!-- Tabs de caminhões -->
                    <div class="border-b border-gray-200 dark:border-gray-700 mb-4">
                        <div class="flex overflow-x-auto scrollbar-hide">
                            <button data-tab="cadastro" class="caminhoes-tab tab-active px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300">
                                Cadastro
                            </button>
                            <button data-tab="registros" class="caminhoes-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300">
                                Registrar Viagem
                            </button>
                            <button data-tab="estatisticas" class="caminhoes-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300">
                                Estatísticas
                            </button>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Cadastro" -->
                    <div id="tab-cadastro" class="caminhoes-tab-content">
                        <!-- Botão para adicionar caminhão -->
                        <div class="mb-4 flex justify-end">
                            <button id="btn-add-new-caminhao" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-plus mr-2"></i> Novo Caminhão
                            </button>
                        </div>
                        
                        <!-- Card de cadastro (inicialmente escondido) -->
                        <div id="cadastro-caminhao-card" class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6 hidden">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Cadastrar Caminhão</h3>
                            
                            <form id="form-cadastro-caminhao">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">ID do Caminhão</label>
                                        <input type="text" id="cadastro-caminhao-id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: CAM-001" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-placa" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Placa</label>
                                        <input type="text" id="cadastro-caminhao-placa" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: ABC-1234" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-modelo" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Modelo</label>
                                        <input type="text" id="cadastro-caminhao-modelo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: Scania R 450">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tipo</label>
                                        <div class="flex space-x-4">
                                            <div class="flex items-center">
                                                <input type="radio" id="tipo-proprio" name="tipo-caminhao" value="proprio" class="w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" checked>
                                                <label for="tipo-proprio" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Próprio</label>
                                            </div>
                                            <div class="flex items-center">
                                                <input type="radio" id="tipo-terceiro" name="tipo-caminhao" value="terceiro" class="w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                                <label for="tipo-terceiro" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Terceiro</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-capacidade" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Capacidade (T)</label>
                                        <input type="number" step="0.1" id="cadastro-caminhao-capacidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 28.5">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-motorista" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Motorista</label>
                                        <input type="text" id="cadastro-caminhao-motorista" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Nome do motorista">
                                    </div>
                                    
                                    <div class="mb-4 md:col-span-2">
                                        <label for="cadastro-caminhao-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="cadastro-caminhao-observacoes" rows="2" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-2">
                                    <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                        <i class="fas fa-save mr-2"></i> Cadastrar
                                    </button>
                                    <button type="button" id="btn-cancelar-cadastro-caminhao" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                        <i class="fas fa-times mr-2"></i> Cancelar
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Tabela de caminhões -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                            <div class="flex justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Caminhões Cadastrados</h3>
                                <button id="btn-export-caminhoes" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                    <i class="fas fa-file-export mr-1"></i> Exportar
                                </button>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ID</th>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Placa</th>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Modelo</th>
                                            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tipo</th>
                                            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Capacidade</th>
                                            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tabela-caminhoes" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <!-- Dados serão preenchidos via JavaScript -->
                                        <tr>
                                            <td colspan="6" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                Carregando caminhões...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Registrar Viagem" -->
                    <div id="tab-registros" class="caminhoes-tab-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- Formulário de registro -->
                            <div class="lg:col-span-1">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Registrar Viagem</h3>
                                    
                                    <form id="form-caminhao">
                                        <div class="mb-4">
                                            <label for="caminhao-data" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data</label>
                                            <input type="date" id="caminhao-data" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Caminhão</label>
                                            <select id="caminhao-id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                                <option value="">Selecione um caminhão</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-cultura" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Cultura</label>
                                            <select id="caminhao-cultura" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                                <option value="">Selecione uma cultura</option>
                                                <option value="Soja">Soja</option>
                                                <option value="Milho">Milho</option>
                                                <option value="Trigo">Trigo</option>
                                                <option value="Algodão">Algodão</option>
                                                <option value="Feijão">Feijão</option>
                                                <option value="Arroz">Arroz</option>
                                                <option value="Cana-de-açúcar">Cana-de-açúcar</option>
                                                <option value="Sorgo">Sorgo</option>
                                                <option value="Outra">Outra</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-producao" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Produção (T)</label>
                                            <input type="number" step="0.1" id="caminhao-producao" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 28.5" required>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-tempo-campo" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tempo Campo (min)</label>
                                            <input type="number" id="caminhao-tempo-campo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 45" required>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-tempo-patio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tempo Pátio (min)</label>
                                            <input type="number" id="caminhao-tempo-patio" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 30" required>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                            <textarea id="caminhao-observacoes" rows="2" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                        </div>
                                        
                                        <div class="flex items-center space-x-2">
                                            <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                                <i class="fas fa-save mr-2"></i> Registrar Viagem
                                            </button>
                                            <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                                <i class="fas fa-times mr-2"></i> Cancelar
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            
                            <!-- Histórico de viagens -->
                            <div class="lg:col-span-2">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between mb-3">
                                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Histórico de Viagens</h3>
                                        <button id="btn-export-viagens" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                            <i class="fas fa-file-export mr-1"></i> Exportar
                                        </button>
                                    </div>
                                    
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                            <thead class="bg-gray-50 dark:bg-gray-700">
                                                <tr>
                                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Data</th>
                                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Caminhão</th>
                                                    <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tipo</th>
                                                    <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Produção</th>
                                                    <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">T. Campo</th>
                                                    <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">T. Pátio</th>
                                                    <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabela-historico-caminhoes" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                                <!-- Dados serão preenchidos via JavaScript -->
                                                <tr>
                                                    <td colspan="7" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                        Nenhum registro encontrado
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Estatísticas" -->
                    <div id="tab-estatisticas" class="caminhoes-tab-content hidden">
                        <!-- Cards de estatísticas -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Produção</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="estatisticas-total-producao-caminhoes" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-weight-hanging text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média Tempo Campo</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="estatisticas-media-campo" class="text-2xl font-semibold text-gray-900 dark:text-white">0 min</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-stopwatch text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média Tempo Pátio</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="estatisticas-media-patio" class="text-2xl font-semibold text-gray-900 dark:text-white">0 min</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-warehouse text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Viagens</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="estatisticas-total-registros-caminhoes" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-truck-loading text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Comparativo próprios vs terceiros -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                            <div class="lg:col-span-1">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Próprios vs Terceiros</h3>
                                    
                                    <div class="grid grid-cols-1 gap-4">
                                        <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg">
                                            <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Produção de Próprios</h4>
                                            <div class="flex items-baseline mt-1">
                                                <span id="estatisticas-producao-proprios" class="text-xl font-bold text-blue-600 dark:text-blue-400">0 T</span>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-green-50 dark:bg-green-900/30 p-4 rounded-lg">
                                            <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Produção de Terceiros</h4>
                                            <div class="flex items-baseline mt-1">
                                                <span id="estatisticas-producao-terceiros" class="text-xl font-bold text-green-600 dark:text-green-400">0 T</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gráfico de próprios vs terceiros -->
                            <div class="lg:col-span-2">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 h-full">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Distribuição da Produção</h3>
                                    <div class="h-64">
                                        <canvas id="estatisticas-chart-proprios-terceiros"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Exportar relatórios -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Exportar Relatórios</h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <button id="btn-export-estatisticas" class="inline-flex items-center justify-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-chart-pie mr-2"></i> Exportar Estatísticas
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Configurações -->
                <div id="content-configuracoes" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Configurações</h2>
                        <p class="text-gray-600 dark:text-gray-400">Configurações do sistema e gestão de dados</p>
                    </div>
                    
                    <!-- Backup e Restauração -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Backup e Restauração</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-2">Exportar Dados</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">Exporte todos os dados para um arquivo JSON de backup</p>
                                <button id="btn-exportar-json" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-download mr-2"></i> Exportar Backup
                                </button>
                            </div>
                            
                            <div>
                                <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-2">Importar Dados</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">Importe dados de um arquivo JSON previamente exportado</p>
                                
                                <button id="btn-importar-json" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-upload mr-2"></i> Importar Backup
                                </button>
                                <input type="file" id="import-json-file" accept=".json" class="hidden">
                            </div>
                        </div>
                        
                        <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
                            <h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-2">Limpar Todos os Dados</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                                <span class="text-red-500 dark:text-red-400">Atenção:</span> Esta ação irá remover permanentemente todos os dados do sistema.
                            </p>
                            <button id="btn-limpar-dados" class="inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-trash-alt mr-2"></i> Limpar Todos os Dados
                            </button>
                        </div>
                    </div>
                    
                    <!-- Relatórios -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Relatórios do Sistema</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button id="btn-relatorio-producao" class="inline-flex items-center justify-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-chart-line mr-2"></i> Relatório de Produção
                            </button>
                            
                            <button id="btn-relatorio-colhedoras" class="inline-flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-tractor mr-2"></i> Relatório de Colhedoras
                            </button>
                            
                            <button id="btn-relatorio-caminhoes" class="inline-flex items-center justify-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-truck mr-2"></i> Relatório de Frota
                            </button>
                        </div>
                    </div>
                    
                    <!-- Sobre o Sistema -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Sobre o Sistema</h3>
                        
                        <div class="text-sm text-gray-600 dark:text-gray-400">
                            <p class="mb-2"><strong>Nome:</strong> GGOMES-LOG</p>
                            <p class="mb-2"><strong>Versão:</strong> 1.0.0</p>
                            <p class="mb-2"><strong>Descrição:</strong> Sistema de Gestão Agrícola para acompanhamento de colheita e logística.</p>
                            <p class="mb-4"><strong>Desenvolvido por:</strong> GGOMES Technologies</p>
                            
                            <div class="text-xs mt-4 text-gray-500 dark:text-gray-400">
                                <p>© 2023 GGOMES Technologies. Todos os direitos reservados.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        
        <!-- Painel de notificações -->
        <div id="notifications-panel" class="fixed inset-y-0 right-0 w-80 bg-white dark:bg-gray-800 shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-20 flex flex-col">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Notificações</h3>
                <button id="close-notifications" class="p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="notifications-list" class="flex-1 overflow-y-auto p-4 space-y-4">
                <!-- Notificações serão preenchidas via JavaScript -->
                <div class="text-center text-gray-500 dark:text-gray-400 py-4">
                    <i class="fas fa-bell text-2xl mb-2"></i>
                    <p>Carregando notificações...</p>
                </div>
            </div>
            
            <div class="p-4 border-t border-gray-200 dark:border-gray-700 text-center">
                <button id="btn-clear-notifications" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                    <i class="fas fa-check-double mr-2"></i> Marcar Todas Como Lidas
                </button>
            </div>
        </div>
        
        <!-- Modal de confirmação para limpar dados -->
        <div id="modal-limpar-dados" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Confirmação de Limpeza</h3>
                
                <p class="text-gray-700 dark:text-gray-300 mb-4">
                    <span class="text-red-500 font-semibold">Atenção:</span> Esta ação irá remover <span class="font-semibold">PERMANENTEMENTE</span> todos os dados do sistema.
                </p>
                
                <p class="text-gray-700 dark:text-gray-300 mb-6">
                    Para confirmar, digite "CONFIRMAR" no campo abaixo:
                </p>
                
                <div class="mb-6">
                    <input type="text" id="confirmacao-texto" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500" placeholder="Digite CONFIRMAR">
                </div>
                
                <div class="flex justify-end space-x-4">
                    <button id="btn-cancelar-limpar" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                        <i class="fas fa-times mr-2"></i> Cancelar
                    </button>
                    <button id="btn-confirmar-limpar" class="inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg text-sm opacity-50 cursor-not-allowed" disabled>
                        <i class="fas fa-trash-alt mr-2"></i> Sim, Limpar Tudo
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Banco de dados simulado
        const DB = {
            // Inicialização do banco de dados
            init: function() {
                // Verificar se já existe algum dado
                if (!localStorage.getItem('ggomes_colhedoras')) {
                    // Criar alguns dados de exemplo
                    // Colhedoras
                    const colhedorasIniciais = [
                        { id: 'COL-001', marca: 'John Deere', modelo: '9670 STS', ano: 2021, observacoes: 'Em excelente estado' },
                        { id: 'COL-002', marca: 'New Holland', modelo: 'CR8.90', ano: 2020, observacoes: 'Manutenção recente' },
                        { id: 'COL-003', marca: 'Case IH', modelo: 'Axial-Flow 9250', ano: 2022, observacoes: 'Nova aquisição' }
                    ];
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedorasIniciais));
                    
                    // Obter a data atual para registros de hoje
                    const hoje = new Date();
                    const dataHoje = hoje.toISOString().split('T')[0]; // Formato YYYY-MM-DD
                    
                    // Obter data de ontem para alguns registros
                    const ontem = new Date();
                    ontem.setDate(ontem.getDate() - 1);
                    const dataOntem = ontem.toISOString().split('T')[0];
                    
                    // Registros de produção (incluindo alguns para hoje)
                    const registrosIniciais = [
                        { id: 'REG-001', data: dataOntem, colhedoraId: 'COL-001', cultura: 'Soja', quantidade: 145.5, horas: 8.5, combustivel: 120, observacoes: 'Condições climáticas favoráveis' },
                        { id: 'REG-002', data: dataOntem, colhedoraId: 'COL-002', cultura: 'Milho', quantidade: 168.2, horas: 9, combustivel: 130, observacoes: 'Solo úmido pela manhã' },
                        { id: 'REG-003', data: dataOntem, colhedoraId: 'COL-003', cultura: 'Soja', quantidade: 152.8, horas: 8, combustivel: 115, observacoes: '' },
                        { id: 'REG-004', data: dataHoje, colhedoraId: 'COL-001', cultura: 'Milho', quantidade: 138.6, horas: 7.5, combustivel: 105, observacoes: 'Parada de 1h para manutenção' },
                        { id: 'REG-005', data: dataHoje, colhedoraId: 'COL-002', cultura: 'Soja', quantidade: 162.4, horas: 8.5, combustivel: 125, observacoes: 'Condições ideais' }
                    ];
                    localStorage.setItem('ggomes_registros', JSON.stringify(registrosIniciais));
                    
                    // Veículos cadastrados
                    const veiculosIniciais = [
                        { id: 'CAM-001', placa: 'ABC-1234', modelo: 'Volvo FH 540', tipo: 'proprio', capacidade: 30, motorista: 'João Silva', observacoes: 'Caminhão principal' },
                        { id: 'CAM-002', placa: 'DEF-5678', modelo: 'Scania R 450', tipo: 'proprio', capacidade: 28, motorista: 'Pedro Santos', observacoes: '' },
                        { id: 'CAM-003', placa: 'GHI-9012', modelo: 'Mercedes-Benz Atego', tipo: 'terceiro', capacidade: 26, motorista: 'Carlos Oliveira', observacoes: 'Empresa Transportes XYZ' }
                    ];
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(veiculosIniciais));
                    
                    // Registros de caminhões
                    const caminhoesIniciais = [
                        { id: 'VIA-001', data: dataOntem, caminhaoId: 'CAM-001', producao: 28.5, cultura: 'Soja', tempoCampo: 45, tempoPatio: 30, observacoes: '' },
                        { id: 'VIA-002', data: dataOntem, caminhaoId: 'CAM-002', producao: 27.2, cultura: 'Soja', tempoCampo: 50, tempoPatio: 35, observacoes: '' },
                        { id: 'VIA-003', data: dataOntem, caminhaoId: 'CAM-003', producao: 25.8, cultura: 'Milho', tempoCampo: 42, tempoPatio: 28, observacoes: '' },
                        { id: 'VIA-004', data: dataHoje, caminhaoId: 'CAM-001', producao: 29.1, cultura: 'Soja', tempoCampo: 48, tempoPatio: 32, observacoes: '' },
                        { id: 'VIA-005', data: dataHoje, caminhaoId: 'CAM-002', producao: 26.9, cultura: 'Milho', tempoCampo: 46, tempoPatio: 31, observacoes: '' }
                    ];
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(caminhoesIniciais));
                    
                    // Registros de chuva
                    const chuvasIniciais = [
                        { id: 'CHV-001', dataInicio: '2023-05-10', dataFim: '2023-05-11', dias: 1.5, intensidade: 'media', observacoes: 'Chuva constante' },
                        { id: 'CHV-002', dataInicio: '2023-05-20', dataFim: '2023-05-22', dias: 2, intensidade: 'alta', observacoes: 'Tempestade com trovões' }
                    ];
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(chuvasIniciais));
                    
                    // Registros de consumo
                    const consumosIniciais = [
                        { id: 'CON-001', data: dataOntem, tipoEquipamento: 'colhedora', equipamentoId: 'COL-001', tipoOleo: 'diesel', quantidade: 350.2, horimetro: 1205.5, observacoes: 'Abastecimento completo' },
                        { id: 'CON-002', data: dataOntem, tipoEquipamento: 'colhedora', equipamentoId: 'COL-002', tipoOleo: 'diesel', quantidade: 320.8, horimetro: 980.2, observacoes: '' },
                        { id: 'CON-003', data: dataOntem, tipoEquipamento: 'caminhao', equipamentoId: 'CAM-001', tipoOleo: 'diesel', quantidade: 180.5, horimetro: 15200, observacoes: '' },
                        { id: 'CON-004', data: dataHoje, tipoEquipamento: 'colhedora', equipamentoId: 'COL-001', tipoOleo: 'hidraulico', quantidade: 45.0, horimetro: 1210.5, observacoes: 'Troca programada' },
                        { id: 'CON-005', data: dataHoje, tipoEquipamento: 'caminhao', equipamentoId: 'CAM-002', tipoOleo: 'diesel', quantidade: 210.5, horimetro: 22450, observacoes: '' }
                    ];
                    localStorage.setItem('ggomes_consumos', JSON.stringify(consumosIniciais));
                    
                    // Notificações
                    const notificacoesIniciais = [
                        { id: 'notif-1', tipo: 'info', titulo: 'Bem-vindo ao GGOMES-LOG', mensagem: 'Sistema inicializado com sucesso! Comece cadastrando suas colhedoras e registrando a produção diária.', dataHora: new Date().toISOString(), lida: false },
                        { id: 'notif-2', tipo: 'warn', titulo: 'Manutenção Programada', mensagem: 'A colhedora COL-001 está agendada para manutenção em 3 dias.', dataHora: new Date().toISOString(), lida: false }
                    ];
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notificacoesIniciais));
                    
                    // Configurações
                    localStorage.setItem('ggomes_config', JSON.stringify({
                        temaEscuro: false,
                        ultimoAcesso: new Date().toISOString()
                    }));
                }
                
                // Verificar se falta algum tipo de dado e inicializá-lo
                if (!localStorage.getItem('ggomes_colhedoras')) {
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_registros')) {
                    localStorage.setItem('ggomes_registros', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_veiculos_cadastrados')) {
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_caminhoes')) {
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_chuvas')) {
                    localStorage.setItem('ggomes_chuvas', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_consumos')) {
                    localStorage.setItem('ggomes_consumos', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_notifications')) {
                    localStorage.setItem('ggomes_notifications', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_config')) {
                    localStorage.setItem('ggomes_config', JSON.stringify({ temaEscuro: false, ultimoAcesso: new Date().toISOString() }));
                }
                
                // Atualizar última data de acesso
                const config = JSON.parse(localStorage.getItem('ggomes_config'));
                config.ultimoAcesso = new Date().toISOString();
                localStorage.setItem('ggomes_config', JSON.stringify(config));
            },
            
            // Método para limpar todos os dados
            clearAll: function() {
                try {
                    localStorage.removeItem('ggomes_colhedoras');
                    localStorage.removeItem('ggomes_registros');
                    localStorage.removeItem('ggomes_veiculos_cadastrados');
                    localStorage.removeItem('ggomes_caminhoes');
                    localStorage.removeItem('ggomes_chuvas');
                    localStorage.removeItem('ggomes_consumos');
                    localStorage.removeItem('ggomes_notifications');
                    
                    // Manter apenas as configurações
                    const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                    localStorage.setItem('ggomes_config', JSON.stringify({
                        ...config,
                        ultimoAcesso: new Date().toISOString()
                    }));
                    
                    // Inicializar com arrays vazios em vez de dados de exemplo
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify([]));
                    localStorage.setItem('ggomes_registros', JSON.stringify([]));
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify([]));
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify([]));
                    localStorage.setItem('ggomes_chuvas', JSON.stringify([]));
                    localStorage.setItem('ggomes_consumos', JSON.stringify([]));
                    localStorage.setItem('ggomes_notifications', JSON.stringify([]));
                    
                    return true;
                } catch (error) {
                    console.error('Erro ao limpar dados:', error);
                    return false;
                }
            },
            
            // Exportar todos os dados para backup
            exportData: function() {
                try {
                    const data = {
                        colhedoras: JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]'),
                        registros: JSON.parse(localStorage.getItem('ggomes_registros') || '[]'),
                        veiculos: JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]'),
                        caminhoes: JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]'),
                        chuvas: JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]'),
                        consumos: JSON.parse(localStorage.getItem('ggomes_consumos') || '[]'),
                        notifications: JSON.parse(localStorage.getItem('ggomes_notifications') || '[]'),
                        config: JSON.parse(localStorage.getItem('ggomes_config') || '{}'),
                        metaData: {
                            exportDate: new Date().toISOString(),
                            version: '1.0.0'
                        }
                    };
                    
                    return JSON.stringify(data, null, 2);
                } catch (error) {
                    console.error('Erro ao exportar dados:', error);
                    throw new Error('Não foi possível exportar os dados.');
                }
            },
            
            // Importar dados de backup
            importData: function(jsonData) {
                try {
                    const data = JSON.parse(jsonData);
                    
                    // Validar estrutura mínima de dados
                    if (!data.colhedoras || !data.registros || !data.veiculos || 
                        !data.caminhoes || !data.chuvas) {
                        throw new Error('Arquivo de backup inválido ou corrompido.');
                    }
                    
                    // Restaurar dados
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(data.colhedoras));
                    localStorage.setItem('ggomes_registros', JSON.stringify(data.registros));
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(data.veiculos));
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(data.caminhoes));
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(data.chuvas));
                    
                    // Restaurar consumos se existirem
                    if (data.consumos) {
                        localStorage.setItem('ggomes_consumos', JSON.stringify(data.consumos));
                    }
                    
                    // Restaurar notificações e configurações se existirem
                    if (data.notifications) {
                        localStorage.setItem('ggomes_notifications', JSON.stringify(data.notifications));
                    }
                    
                    if (data.config) {
                        // Preservar tema atual mas atualizar outras configurações
                        const currentConfig = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                        const newConfig = {
                            ...data.config,
                            temaEscuro: currentConfig.temaEscuro, // Manter tema atual
                            ultimoAcesso: new Date().toISOString() // Atualizar acesso
                        };
                        localStorage.setItem('ggomes_config', JSON.stringify(newConfig));
                    }
                    
                    return true;
                } catch (error) {
                    console.error('Erro ao importar dados:', error);
                    throw error;
                }
            },
            
            // Operações com colhedoras
            colhedoras: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                },
                
                get: function(id) {
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    return colhedoras.find(c => c.id === id);
                },
                
                add: function(colhedora) {
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    
                    // Verificar se já existe uma colhedora com o mesmo ID
                    if (colhedoras.some(c => c.id === colhedora.id)) {
                        throw new Error('Já existe uma colhedora com este ID');
                    }
                    
                    // Adicionar colhedora
                    colhedoras.push(colhedora);
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedoras));
                    
                    // Adicionar notificação
                    DB.notifications.add({
                        tipo: 'success',
                        titulo: 'Nova Colhedora',
                        mensagem: `A colhedora ${colhedora.id} foi cadastrada com sucesso.`
                    });
                    
                    return colhedora;
                },
                
                update: function(colhedora) {
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    
                    // Encontrar índice da colhedora
                    const index = colhedoras.findIndex(c => c.id === colhedora.id);
                    
                    if (index === -1) {
                        throw new Error('Colhedora não encontrada');
                    }
                    
                    // Atualizar colhedora
                    colhedoras[index] = { ...colhedoras[index], ...colhedora };
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedoras));
                    
                    return colhedoras[index];
                },
                
                remove: function(id) {
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    
                    // Verificar se a colhedora está em uso
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    const temRegistros = registros.some(r => r.colhedoraId === id);
                    
                    if (temRegistros) {
                        throw new Error('Esta colhedora não pode ser excluída porque possui registros de produção');
                    }
                    
                    // Filtrar colhedoras
                    const novasColhedoras = colhedoras.filter(c => c.id !== id);
                    
                    if (novasColhedoras.length === colhedoras.length) {
                        throw new Error('Colhedora não encontrada');
                    }
                    
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(novasColhedoras));
                    
                    return true;
                }
            },
            
            // Operações com registros de produção
            registros: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                },
                
                get: function(id) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    return registros.find(r => r.id === id);
                },
                
                add: function(registro) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Adicionar ID único
                    registro.id = registro.id || 'REG-' + Date.now();
                    
                    // Adicionar registro
                    registros.push(registro);
                    localStorage.setItem('ggomes_registros', JSON.stringify(registros));
                    
                    return registro;
                },
                
                update: function(registro) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Encontrar índice do registro
                    const index = registros.findIndex(r => r.id === registro.id);
                    
                    if (index === -1) {
                        throw new Error('Registro não encontrado');
                    }
                    
                    // Atualizar registro
                    registros[index] = { ...registros[index], ...registro };
                    localStorage.setItem('ggomes_registros', JSON.stringify(registros));
                    
                    return registros[index];
                },
                
                remove: function(id) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Filtrar registros
                    const novosRegistros = registros.filter(r => r.id !== id);
                    
                    if (novosRegistros.length === registros.length) {
                        throw new Error('Registro não encontrado');
                    }
                    
                    localStorage.setItem('ggomes_registros', JSON.stringify(novosRegistros));
                    
                    return true;
                },
                
                // Obter estatísticas de equipamentos
                getEquipmentStats: function() {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    
                    // Agrupar registros por colhedora
                    const statsPorColhedora = {};
                    
                    // Inicializar estatísticas para cada colhedora
                    colhedoras.forEach(colhedora => {
                        statsPorColhedora[colhedora.id] = {
                            id: colhedora.id,
                            registros: 0,
                            quantidade: 0,
                            horas: 0,
                            rendimento: 0,
                            mediaDiaria: 0,
                            diasUnicos: new Set()
                        };
                    });
                    
                    // Processar registros
                    registros.forEach(registro => {
                        const colhedoraId = registro.colhedoraId;
                        
                        if (statsPorColhedora[colhedoraId]) {
                            statsPorColhedora[colhedoraId].registros += 1;
                            statsPorColhedora[colhedoraId].quantidade += Number(registro.quantidade) || 0;
                            statsPorColhedora[colhedoraId].horas += Number(registro.horas) || 0;
                            statsPorColhedora[colhedoraId].diasUnicos.add(registro.data);
                        }
                    });
                    
                    // Calcular métricas finais
                    Object.values(statsPorColhedora).forEach(stats => {
                        stats.rendimento = stats.horas > 0 ? stats.quantidade / stats.horas : 0;
                        stats.mediaDiaria = stats.diasUnicos.size > 0 ? stats.quantidade / stats.diasUnicos.size : 0;
                        stats.diasUnicos = stats.diasUnicos.size; // Converter Set para contagem
                    });
                    
                    // Converter para array
                    return Object.values(statsPorColhedora);
                },
                
                // Obter estatísticas por cultura
                getCultureStats: function() {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Agrupar registros por cultura
                    const statsPorCultura = {};
                    
                    // Processar registros
                    registros.forEach(registro => {
                        const cultura = registro.cultura || 'Não especificada';
                        
                        if (!statsPorCultura[cultura]) {
                            statsPorCultura[cultura] = {
                                cultura: cultura,
                                registros: 0,
                                quantidade: 0,
                                horas: 0,
                                rendimento: 0,
                                mediaDiaria: 0,
                                diasUnicos: new Set()
                            };
                        }
                        
                        statsPorCultura[cultura].registros += 1;
                        statsPorCultura[cultura].quantidade += Number(registro.quantidade) || 0;
                        statsPorCultura[cultura].horas += Number(registro.horas) || 0;
                        statsPorCultura[cultura].diasUnicos.add(registro.data);
                    });
                    
                    // Calcular métricas finais
                    Object.values(statsPorCultura).forEach(stats => {
                        stats.rendimento = stats.horas > 0 ? stats.quantidade / stats.horas : 0;
                        stats.mediaDiaria = stats.diasUnicos.size > 0 ? stats.quantidade / stats.diasUnicos.size : 0;
                        stats.diasUnicos = stats.diasUnicos.size; // Converter Set para contagem
                    });
                    
                    // Converter para array
                    return Object.values(statsPorCultura);
                },
                
                // Obter estatísticas diárias
                getDailyStats: function(dias = 30) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Filtrar registros por período
                    const dataLimite = new Date();
                    dataLimite.setDate(dataLimite.getDate() - dias);
                    const dataLimiteStr = dataLimite.toISOString().split('T')[0];
                    
                    const registrosFiltrados = dias > 0 ? 
                        registros.filter(r => r.data >= dataLimiteStr) : 
                        [...registros];
                    
                    // Agrupar por data
                    const statsPorDia = {};
                    
                    registrosFiltrados.forEach(registro => {
                        const data = registro.data;
                        
                        if (!statsPorDia[data]) {
                            statsPorDia[data] = {
                                data: data,
                                quantidade: 0,
                                horas: 0,
                                rendimento: 0
                            };
                        }
                        
                        statsPorDia[data].quantidade += Number(registro.quantidade) || 0;
                        statsPorDia[data].horas += Number(registro.horas) || 0;
                    });
                    
                    // Calcular rendimento
                    Object.values(statsPorDia).forEach(stats => {
                        stats.rendimento = stats.horas > 0 ? stats.quantidade / stats.horas : 0;
                    });
                    
                    // Converter para array e ordenar por data
                    return Object.values(statsPorDia).sort((a, b) => new Date(a.data) - new Date(b.data));
                }
            },
            
            // Operações com veículos cadastrados
            veiculosCadastrados: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                },
                
                get: function(id) {
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    return veiculos.find(v => v.id === id);
                },
                
                add: function(veiculo) {
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    
                    // Verificar se já existe um veículo com o mesmo ID
                    if (veiculos.some(v => v.id === veiculo.id)) {
                        throw new Error('Já existe um caminhão com este ID');
                    }
                    
                    // Adicionar veículo
                    veiculos.push(veiculo);
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(veiculos));
                    
                    return veiculo;
                },
                
                update: function(veiculo) {
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    
                    // Encontrar índice do veículo
                    const index = veiculos.findIndex(v => v.id === veiculo.id);
                    
                    if (index === -1) {
                        throw new Error('Caminhão não encontrado');
                    }
                    
                    // Atualizar veículo
                    veiculos[index] = { ...veiculos[index], ...veiculo };
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(veiculos));
                    
                    return veiculos[index];
                },
                
                remove: function(id) {
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    
                    // Verificar se o veículo está em uso
                    const viagens = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    const temViagens = viagens.some(v => v.caminhaoId === id);
                    
                    if (temViagens) {
                        throw new Error('Este caminhão não pode ser excluído porque possui registros de viagens');
                    }
                    
                    // Filtrar veículos
                    const novosVeiculos = veiculos.filter(v => v.id !== id);
                    
                    if (novosVeiculos.length === veiculos.length) {
                        throw new Error('Caminhão não encontrado');
                    }
                    
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(novosVeiculos));
                    
                    return true;
                }
            },
            
            // Operações com registros de caminhões
            caminhoes: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                },
                
                get: function(id) {
                    const caminhoes = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    return caminhoes.find(c => c.id === id);
                },
                
                add: function(viagem) {
                    const caminhoes = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    
                    // Adicionar ID único
                    viagem.id = viagem.id || 'VIA-' + Date.now();
                    
                    // Adicionar viagem
                    caminhoes.push(viagem);
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(caminhoes));
                    
                    return viagem;
                },
                
                update: function(viagem) {
                    const caminhoes = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    
                    // Encontrar índice da viagem
                    const index = caminhoes.findIndex(c => c.id === viagem.id);
                    
                    if (index === -1) {
                        throw new Error('Viagem não encontrada');
                    }
                    
                    // Atualizar viagem
                    caminhoes[index] = { ...caminhoes[index], ...viagem };
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(caminhoes));
                    
                    return caminhoes[index];
                },
                
                remove: function(id) {
                    const caminhoes = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    
                    // Filtrar viagens
                    const novasCaminhoes = caminhoes.filter(c => c.id !== id);
                    
                    if (novasCaminhoes.length === caminhoes.length) {
                        throw new Error('Viagem não encontrada');
                    }
                    
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(novasCaminhoes));
                    
                    return true;
                },
                
                // Obter estatísticas de caminhões
                getStats: function() {
                    const caminhoes = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    
                    // Inicializar estatísticas
                    const stats = {
                        totalViagens: caminhoes.length,
                        totalProducao: 0,
                        mediaTempoCampo: 0,
                        mediaTempoPatio: 0,
                        proprios: {
                            viagens: 0,
                            producao: 0,
                            tempoCampo: 0,
                            tempoPatio: 0
                        },
                        terceiros: {
                            viagens: 0,
                            producao: 0,
                            tempoCampo: 0,
                            tempoPatio: 0
                        }
                    };
                    
                    // Somar valores
                    let totalTempoCampo = 0;
                    let totalTempoPatio = 0;
                    
                    caminhoes.forEach(viagem => {
                        // Producao
                        const producao = Number(viagem.producao) || 0;
                        stats.totalProducao += producao;
                        
                        // Tempos
                        const tempoCampo = Number(viagem.tempoCampo) || 0;
                        const tempoPatio = Number(viagem.tempoPatio) || 0;
                        
                        totalTempoCampo += tempoCampo;
                        totalTempoPatio += tempoPatio;
                        
                        // Obter tipo do veículo
                        const veiculo = veiculos.find(v => v.id === viagem.caminhaoId);
                        const tipo = veiculo ? veiculo.tipo : 'proprio'; // Assume próprio se não encontrar
                        
                        // Atualizar estatísticas por tipo
                        if (tipo === 'terceiro') {
                            stats.terceiros.viagens += 1;
                            stats.terceiros.producao += producao;
                            stats.terceiros.tempoCampo += tempoCampo;
                            stats.terceiros.tempoPatio += tempoPatio;
                        } else {
                            stats.proprios.viagens += 1;
                            stats.proprios.producao += producao;
                            stats.proprios.tempoCampo += tempoCampo;
                            stats.proprios.tempoPatio += tempoPatio;
                        }
                    });
                    
                    // Calcular médias
                    stats.mediaTempoCampo = stats.totalViagens > 0 ? totalTempoCampo / stats.totalViagens : 0;
                    stats.mediaTempoPatio = stats.totalViagens > 0 ? totalTempoPatio / stats.totalViagens : 0;
                    
                    stats.proprios.mediaTempoCampo = stats.proprios.viagens > 0 ? stats.proprios.tempoCampo / stats.proprios.viagens : 0;
                    stats.proprios.mediaTempoPatio = stats.proprios.viagens > 0 ? stats.proprios.tempoPatio / stats.proprios.viagens : 0;
                    
                    stats.terceiros.mediaTempoCampo = stats.terceiros.viagens > 0 ? stats.terceiros.tempoCampo / stats.terceiros.viagens : 0;
                    stats.terceiros.mediaTempoPatio = stats.terceiros.viagens > 0 ? stats.terceiros.tempoPatio / stats.terceiros.viagens : 0;
                    
                    return stats;
                }
            },
            
            // Operações com registro de chuvas
            chuvas: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                },
                
                get: function(id) {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    return chuvas.find(c => c.id === id);
                },
                
                add: function(chuva) {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    // Adicionar ID único
                    chuva.id = chuva.id || 'CHV-' + Date.now();
                    
                    // Adicionar chuva
                    chuvas.push(chuva);
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(chuvas));
                    
                    // Adicionar notificação
                    DB.notifications.add({
                        tipo: 'warn',
                        titulo: 'Nova Parada por Chuva',
                        mensagem: `Foi registrada uma parada de ${chuva.dias} dias por chuva.`
                    });
                    
                    return chuva;
                },
                
                update: function(chuva) {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    // Encontrar índice da chuva
                    const index = chuvas.findIndex(c => c.id === chuva.id);
                    
                    if (index === -1) {
                        throw new Error('Registro de chuva não encontrado');
                    }
                    
                    // Atualizar chuva
                    chuvas[index] = { ...chuvas[index], ...chuva };
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(chuvas));
                    
                    return chuvas[index];
                },
                
                remove: function(id) {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    // Filtrar chuvas
                    const novasChuvas = chuvas.filter(c => c.id !== id);
                    
                    if (novasChuvas.length === chuvas.length) {
                        throw new Error('Registro de chuva não encontrado');
                    }
                    
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(novasChuvas));
                    
                    return true;
                },
                
                // Obter total de dias parados
                getTotalDias: function() {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    // Somar dias de todas as chuvas
                    return chuvas.reduce((total, chuva) => total + Number(chuva.dias || 0), 0);
                },
                
                // Obter última chuva
                getLastChuva: function() {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    if (chuvas.length === 0) {
                        return null;
                    }
                    
                    // Ordenar por data de fim (mais recente primeiro)
                    return [...chuvas].sort((a, b) => new Date(b.dataFim) - new Date(a.dataFim))[0];
                },
                
                // Calcular impacto estimado da chuva na produção
                calcularImpactoEstimado: function() {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Total de dias parados
                    const totalDias = this.getTotalDias();
                    
                    if (totalDias === 0 || registros.length === 0) {
                        return 0;
                    }
                    
                    // Calcular produção média diária
                    const totalProducao = registros.reduce((total, registro) => total + Number(registro.quantidade || 0), 0);
                    
                    // Obter datas únicas de registro
                    const datasUnicas = new Set(registros.map(r => r.data));
                    const diasDeTrabalho = datasUnicas.size;
                    
                    if (diasDeTrabalho === 0) {
                        return 0;
                    }
                    
                    const mediaDiaria = totalProducao / diasDeTrabalho;
                    
                    // Calcular impacto
                    return mediaDiaria * totalDias;
                }
            },
            
            // Operações com registros de consumo
            consumos: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_consumos') || '[]');
                },
                
                get: function(id) {
                    const consumos = JSON.parse(localStorage.getItem('ggomes_consumos') || '[]');
                    return consumos.find(c => c.id === id);
                },
                
                add: function(consumo) {
                    const consumos = JSON.parse(localStorage.getItem('ggomes_consumos') || '[]');
                    
                    // Adicionar ID único
                    consumo.id = consumo.id || 'CON-' + Date.now();
                    
                    // Adicionar registro
                    consumos.push(consumo);
                    localStorage.setItem('ggomes_consumos', JSON.stringify(consumos));
                    
                    return consumo;
                },
                
                update: function(consumo) {
                    const consumos = JSON.parse(localStorage.getItem('ggomes_consumos') || '[]');
                    
                    // Encontrar índice do consumo
                    const index = consumos.findIndex(c => c.id === consumo.id);
                    
                    if (index === -1) {
                        throw new Error('Registro de consumo não encontrado');
                    }
                    
                    // Atualizar consumo
                    consumos[index] = { ...consumos[index], ...consumo };
                    localStorage.setItem('ggomes_consumos', JSON.stringify(consumos));
                    
                    return consumos[index];
                },
                
                remove: function(id) {
                    const consumos = JSON.parse(localStorage.getItem('ggomes_consumos') || '[]');
                    
                    // Filtrar consumos
                    const novosConsumos = consumos.filter(c => c.id !== id);
                    
                    if (novosConsumos.length === consumos.length) {
                        throw new Error('Registro de consumo não encontrado');
                    }
                    
                    localStorage.setItem('ggomes_consumos', JSON.stringify(novosConsumos));
                    
                    return true;
                },
                
                // Obter estatísticas de consumo
                getStats: function(dias = 0) {
                    const consumos = JSON.parse(localStorage.getItem('ggomes_consumos') || '[]');
                    
                    // Filtrar por período se especificado
                    let consumosFiltrados = [...consumos];
                    
                    if (dias > 0) {
                        const dataLimite = new Date();
                        dataLimite.setDate(dataLimite.getDate() - dias);
                        const dataLimiteStr = dataLimite.toISOString().split('T')[0];
                        
                        consumosFiltrados = consumos.filter(c => {
                            return c.data >= dataLimiteStr;
                        });
                    }
                    
                    // Calcular totais
                    let totalDiesel = 0;
                    let totalHidraulico = 0;
                    let totalHoras = 0; // Assumindo que temos dados de horas para cálculo de média
                    
                    // Estatísticas por equipamento
                    const equipamentos = {};
                    
                    // Processar cada registro
                    consumosFiltrados.forEach(c => {
                        // Soma por tipo de óleo
                        if (c.tipoOleo === 'diesel') {
                            totalDiesel += Number(c.quantidade) || 0;
                        } else if (c.tipoOleo === 'hidraulico') {
                            totalHidraulico += Number(c.quantidade) || 0;
                        }
                        
                        // Agrupar por equipamento
                        const equipId = `${c.tipoEquipamento}-${c.equipamentoId}`;
                        
                        if (!equipamentos[equipId]) {
                            equipamentos[equipId] = {
                                tipo: c.tipoEquipamento,
                                id: c.equipamentoId,
                                diesel: 0,
                                hidraulico: 0,
                                registros: 0,
                                ultimoHorimetro: 0,
                                primeiroHorimetro: Number.MAX_SAFE_INTEGER
                            };
                        }
                        
                        // Adicionar consumo ao equipamento
                        if (c.tipoOleo === 'diesel') {
                            equipamentos[equipId].diesel += Number(c.quantidade) || 0;
                        } else if (c.tipoOleo === 'hidraulico') {
                            equipamentos[equipId].hidraulico += Number(c.quantidade) || 0;
                        }
                        
                        equipamentos[equipId].registros += 1;
                        
                        // Atualizar horímetro mais recente e mais antigo
                        if (c.horimetro) {
                            const horimetro = Number(c.horimetro);
                            if (horimetro > equipamentos[equipId].ultimoHorimetro) {
                                equipamentos[equipId].ultimoHorimetro = horimetro;
                            }
                            if (horimetro < equipamentos[equipId].primeiroHorimetro) {
                                equipamentos[equipId].primeiroHorimetro = horimetro;
                            }
                        }
                    });
                    
                    // Calcular horas totais e médias
                    Object.values(equipamentos).forEach(equip => {
                        if (equip.ultimoHorimetro > 0 && equip.primeiroHorimetro < Number.MAX_SAFE_INTEGER) {
                            const horasUsadas = equip.ultimoHorimetro - equip.primeiroHorimetro;
                            equip.horasUsadas = horasUsadas;
                            equip.mediaConsumoDiesel = horasUsadas > 0 ? equip.diesel / horasUsadas : 0;
                        }
                    });
                    
                    // Converter para array
                    const equipamentosArray = Object.values(equipamentos);
                    
                    return {
                        totalDiesel,
                        totalHidraulico,
                        totalRegistros: consumosFiltrados.length,
                        consumoMedioLitroHora: totalHoras > 0 ? totalDiesel / totalHoras : 0,
                        equipamentos: equipamentosArray
                    };
                }
            },
            
            // Operações com notificações
            notifications: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                },
                
                get: function(id) {
                    const notifications = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    return notifications.find(n => n.id === id);
                },
                
                add: function(notification) {
                    const notifications = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    
                    // Adicionar ID único e data/hora atual
                    notification.id = notification.id || 'notif-' + Date.now();
                    notification.dataHora = notification.dataHora || new Date().toISOString();
                    notification.lida = notification.lida || false;
                    
                    // Adicionar notificação (no início do array para mostrar as mais recentes primeiro)
                    notifications.unshift(notification);
                    
                    // Limitar a 100 notificações
                    if (notifications.length > 100) {
                        notifications.pop();
                    }
                    
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notifications));
                    
                    return notification;
                },
                
                update: function(notification) {
                    const notifications = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    
                    // Encontrar índice da notificação
                    const index = notifications.findIndex(n => n.id === notification.id);
                    
                    if (index === -1) {
                        throw new Error('Notificação não encontrada');
                    }
                    
                    // Atualizar notificação
                    notifications[index] = { ...notifications[index], ...notification };
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notifications));
                    
                    return notifications[index];
                },
                
                remove: function(id) {
                    const notifications = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    
                    // Filtrar notificações
                    const novasNotifications = notifications.filter(n => n.id !== id);
                    
                    if (novasNotifications.length === notifications.length) {
                        throw new Error('Notificação não encontrada');
                    }
                    
                    localStorage.setItem('ggomes_notifications', JSON.stringify(novasNotifications));
                    
                    return true;
                },
                
                // Marcar uma notificação como lida
                markAsRead: function(id) {
                    const notifications = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    
                    // Encontrar a notificação
                    const index = notifications.findIndex(n => n.id === id);
                    
                    if (index === -1) {
                        return false;
                    }
                    
                    // Marcar como lida
                    notifications[index].lida = true;
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notifications));
                    
                    return true;
                },
                
                // Marcar todas as notificações como lidas
                markAllAsRead: function() {
                    const notifications = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    
                    // Marcar todas como lidas
                    notifications.forEach(n => {
                        n.lida = true;
                    });
                    
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notifications));
                    
                    return true;
                },
                
                // Obter contagem de notificações não lidas
                getUnreadCount: function() {
                    const notifications = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    return notifications.filter(n => !n.lida).length;
                }
            }
        };
        
        // Funções auxiliares
        
        // Formatação de número com separador de milhar
        function formatarNumero(numero, casasDecimais = 2) {
            return Number(numero).toLocaleString('pt-BR', {
                minimumFractionDigits: casasDecimais,
                maximumFractionDigits: casasDecimais
            });
        }
        
        // Formatação de data
        function formatarData(dataString) {
            const data = new Date(dataString);
            return data.toLocaleDateString('pt-BR');
        }
        
        // Formatação de período
        function formatarPeriodo(dataInicio, dataFim) {
            const inicio = new Date(dataInicio);
            const fim = new Date(dataFim);
            
            return `${inicio.toLocaleDateString('pt-BR')} a ${fim.toLocaleDateString('pt-BR')}`;
        }
        
        // Exibir toast (mensagem temporária)
        function mostrarToast(mensagem, tipo = 'info') {
            const toastContainer = document.getElementById('toast-container');
            
            // Criar o toast
            const toast = document.createElement('div');
            toast.classList.add('animate-fade-in', 'p-4', 'rounded-lg', 'shadow-md', 'max-w-md', 'w-full');
            
            // Aplicar estilos com base no tipo
            switch (tipo) {
                case 'success':
                    toast.classList.add('bg-green-100', 'text-green-800', 'dark:bg-green-800', 'dark:text-green-100');
                    break;
                case 'error':
                    toast.classList.add('bg-red-100', 'text-red-800', 'dark:bg-red-800', 'dark:text-red-100');
                    break;
                case 'warn':
                    toast.classList.add('bg-yellow-100', 'text-yellow-800', 'dark:bg-yellow-800', 'dark:text-yellow-100');
                    break;
                default:
                    toast.classList.add('bg-blue-100', 'text-blue-800', 'dark:bg-blue-800', 'dark:text-blue-100');
            }
            
            // Conteúdo do toast
            toast.innerHTML = mensagem;
            
            // Adicionar ao container
            toastContainer.appendChild(toast);
            
            // Remover após alguns segundos
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                toast.style.transition = 'opacity 500ms ease-out, transform 500ms ease-out';
                
                setTimeout(() => {
                    if (toast.parentNode) {
                        toastContainer.removeChild(toast);
                    }
                }, 500);
            }, tipo === 'info' ? 3000 : 5000);
        }
        
        // Configurar tema
        function configurarTema() {
            const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
            const toggleThemeBtn = document.getElementById('toggle-theme');
            
            // Configurar tema inicial
            if (config.temaEscuro) {
                document.documentElement.classList.add('dark');
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                config.temaEscuro = true;
                localStorage.setItem('ggomes_config', JSON.stringify(config));
            }
            
            // Adicionar listener para botão de tema
            toggleThemeBtn.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                
                const isDark = document.documentElement.classList.contains('dark');
                
                // Salvar preferência
                config.temaEscuro = isDark;
                localStorage.setItem('ggomes_config', JSON.stringify(config));
                
                // Mostrar toast
                mostrarToast(`Tema ${isDark ? 'escuro' : 'claro'} ativado!`, 'info');
            });
            
            // Adicionar listener para mudanças de preferência do sistema
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                // Seguir preferência do sistema se o usuário não tiver escolhido manualmente
                if (event.matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            });
        }
        
        // Atualizar contador de notificações
        function atualizarContadorNotificacoes() {
            const badge = document.getElementById('notification-badge');
            const contador = DB.notifications.getUnreadCount();
            
            if (contador > 0) {
                badge.textContent = contador > 99 ? '99+' : contador;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }
        
        // Atualizar data atual
        function atualizarDataAtual() {
            const currentDate = document.getElementById('current-date');
            if (currentDate) {
                const hoje = new Date();
                currentDate.textContent = hoje.toLocaleDateString('pt-BR');
            }
        }
        
        // Criar notificação inicial
        function criarNotificacaoInicial() {
            // Verificar se já existe notificação de boas-vindas
            const notifications = DB.notifications.getAll();
            const temBoasVindas = notifications.some(n => n.titulo === 'Bem-vindo ao GGOMES-LOG');
            
            if (!temBoasVindas) {
                DB.notifications.add({
                    tipo: 'info',
                    titulo: 'Bem-vindo ao GGOMES-LOG',
                    mensagem: 'Sistema inicializado com sucesso! Comece cadastrando suas colhedoras e registrando a produção diária.'
                });
            }
        }
        
        // Carregar dados meteorológicos simulados
        function carregarDadosMeteorologicos() {
            const icones = ['fa-sun', 'fa-cloud-sun', 'fa-cloud', 'fa-cloud-rain', 'fa-cloud-showers-heavy'];
            const temperaturas = [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35];
            
            // Selecionar um ícone e temperatura aleatoriamente
            const icone = icones[Math.floor(Math.random() * icones.length)];
            const temperatura = temperaturas[Math.floor(Math.random() * temperaturas.length)];
            
            // Atualizar informações meteorológicas
            const weatherIcon = document.getElementById('weather-icon');
            const weatherTemp = document.getElementById('weather-temp');
            
            if (weatherIcon && weatherTemp) {
                weatherIcon.className = 'fas ' + icone + ' mr-2';
                weatherTemp.textContent = `${temperatura}°C`;
                
                // Adicionar classe de animação
                if (icone === 'fa-sun') {
                    weatherIcon.classList.add('icon-sun');
                } else if (icone === 'fa-cloud-rain' || icone === 'fa-cloud-showers-heavy') {
                    weatherIcon.classList.add('icon-rain');
                }
            }
        }
        
        // Configurar navegação
        function configurarNavegacao() {
            // Navegação da sidebar
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', () => {
                    // Remover classe ativa de todos os links
                    sidebarLinks.forEach(l => l.classList.remove('active', 'bg-primary-100', 'dark:bg-primary-900', 'text-primary-700', 'dark:text-primary-300'));
                    
                    // Adicionar classe ativa ao link clicado
                    link.classList.add('active', 'bg-primary-100', 'dark:bg-primary-900', 'text-primary-700', 'dark:text-primary-300');
                    
                    // Esconder todos os conteúdos
                    const contents = document.querySelectorAll('.content');
                    contents.forEach(content => content.classList.add('hidden'));
                    
                    // Mostrar conteúdo correspondente
                    const href = link.getAttribute('href').substring(1);
                    const contentElement = document.getElementById(`content-${href}`);
                    if (contentElement) {
                        contentElement.classList.remove('hidden');
                    }
                });
            });
            
            // Toggle do menu lateral
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const sidebar = document.querySelector('aside');
            
            if (mobileMenuToggle && sidebar) {
                mobileMenuToggle.addEventListener('click', () => {
                    sidebar.classList.toggle('hidden');
                });
            }
            
            // Adicionar evento para fechar sidebar em telas pequenas ao clicar em link
            if (window.innerWidth < 768) {
                sidebarLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        sidebar.classList.add('hidden');
                    });
                });
            }
            
            // Painel de notificações
            const btnNotifications = document.getElementById('btn-notifications');
            const notificationsPanel = document.getElementById('notifications-panel');
            const closeNotifications = document.getElementById('close-notifications');
            
            if (btnNotifications && notificationsPanel && closeNotifications) {
                btnNotifications.addEventListener('click', () => {
                    notificationsPanel.classList.toggle('translate-x-full');
                    carregarNotificacoes();
                });
                
                closeNotifications.addEventListener('click', () => {
                    notificationsPanel.classList.add('translate-x-full');
                });
            }
            
            // Tabs do dashboard
            const dashboardTabs = document.querySelectorAll('#content-dashboard .dashboard-tab');
            const dashboardTabContents = document.querySelectorAll('#content-dashboard .dashboard-tab-content');
            
            dashboardTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remover classe ativa de todas as tabs
                    dashboardTabs.forEach(t => t.classList.remove('tab-active'));
                    
                    // Adicionar classe ativa à tab clicada
                    tab.classList.add('tab-active');
                    
                    // Esconder todos os conteúdos
                    dashboardTabContents.forEach(content => content.classList.add('hidden'));
                    
                    // Mostrar conteúdo correspondente
                    const tabId = tab.dataset.tab;
                    const tabContent = document.getElementById(`tab-${tabId}`);
                    if (tabContent) {
                        tabContent.classList.remove('hidden');
                    }
                    
                    // Reajustar gráficos quando visíveis
                    setTimeout(() => {
                        window.dispatchEvent(new Event('resize'));
                    }, 100);
                });
            });
            
            // Tabs de caminhões
            const caminhoesTabs = document.querySelectorAll('#content-caminhoes .caminhoes-tab');
            const caminhoesTabContents = document.querySelectorAll('#content-caminhoes .caminhoes-tab-content');
            
            caminhoesTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remover classe ativa de todas as tabs
                    caminhoesTabs.forEach(t => t.classList.remove('tab-active'));
                    
                    // Adicionar classe ativa à tab clicada
                    tab.classList.add('tab-active');
                    
                    // Esconder todos os conteúdos
                    caminhoesTabContents.forEach(content => content.classList.add('hidden'));
                    
                    // Mostrar conteúdo correspondente
                    const tabId = tab.dataset.tab;
                    const tabContent = document.getElementById(`tab-${tabId}`);
                    if (tabContent) {
                        tabContent.classList.remove('hidden');
                    }
                });
            });
        }
        
        // Carregar notificações
        function carregarNotificacoes() {
            const notificationsList = document.getElementById('notifications-list');
            const notifications = DB.notifications.getAll();
            
            // Limpar lista
            notificationsList.innerHTML = '';
            
            if (notifications.length === 0) {
                notificationsList.innerHTML = `
                    <div class="text-center text-gray-500 dark:text-gray-400 py-6">
                        <i class="fas fa-bell-slash text-2xl mb-2"></i>
                        <p>Nenhuma notificação</p>
                    </div>
                `;
                return;
            }
            
            // Adicionar notificações à lista
            notifications.forEach(notification => {
                const item = document.createElement('div');
                item.classList.add('bg-white', 'dark:bg-gray-700', 'rounded-lg', 'shadow-sm', 'p-3', 'border-l-4');
                
                // Definir cor da borda com base no tipo
                switch (notification.tipo) {
                    case 'success':
                        item.classList.add('border-green-500');
                        break;
                    case 'error':
                        item.classList.add('border-red-500');
                        break;
                    case 'warn':
                        item.classList.add('border-yellow-500');
                        break;
                    default:
                        item.classList.add('border-blue-500');
                }
                
                // Adicionar classe se já lida
                if (notification.lida) {
                    item.classList.add('opacity-60');
                }
                
                // Formatação de data
                const data = new Date(notification.dataHora);
                const dataFormatada = data.toLocaleDateString('pt-BR') + ' ' + data.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                
                // HTML da notificação
                item.innerHTML = `
                    <div class="flex justify-between mb-1">
                        <h4 class="text-sm font-medium text-gray-800 dark:text-white">${notification.titulo}</h4>
                        <span class="text-xs text-gray-500 dark:text-gray-400">${dataFormatada}</span>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">${notification.mensagem}</p>
                    <div class="flex justify-end">
                        ${!notification.lida ? `
                            <button class="btn-mark-read text-xs text-blue-600 dark:text-blue-400 hover:underline" data-id="${notification.id}">
                                Marcar como lida
                            </button>
                        ` : ''}
                    </div>
                `;
                
                notificationsList.appendChild(item);
            });
            
            // Adicionar eventos aos botões
            document.querySelectorAll('.btn-mark-read').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.dataset.id;
                    DB.notifications.markAsRead(id);
                    carregarNotificacoes();
                    atualizarContadorNotificacoes();
                });
            });
        }
        
        // Configurar painel de notificações
        function configurarPainelNotificacoes() {
            const btnClearNotifications = document.getElementById('btn-clear-notifications');
            
            if (btnClearNotifications) {
                btnClearNotifications.addEventListener('click', () => {
                    DB.notifications.markAllAsRead();
                    carregarNotificacoes();
                    atualizarContadorNotificacoes();
                    mostrarToast('Todas as notificações foram marcadas como lidas', 'success');
                });
            }
        }
        
        // Carregar dados do dashboard
        function carregarDadosDashboard() {
            // Obter elemento de período
            const periodSelect = document.getElementById('dashboard-period');
            let periodo = 30; // Padrão: 30 dias
            
            if (periodSelect) {
                periodo = Number(periodSelect.value);
                
                // Adicionar evento de mudança
                periodSelect.addEventListener('change', function() {
                    carregarEstatisticasDashboard();
                });
            }
            
            // Botão de atualizar
            const refreshBtn = document.getElementById('refresh-dashboard');
            if (refreshBtn) {
                refreshBtn.addEventListener('click', function() {
                    carregarEstatisticasDashboard();
                    mostrarToast('Dashboard atualizado com sucesso!', 'success');
                });
            }
            
            // Função para carregar estatísticas
            function carregarEstatisticasDashboard() {
                periodo = Number(periodSelect.value);
                
                // Tab de Produção
                carregarTabProducao();
                
                // Tab de Caminhões
                carregarTabCaminhoes();
                
                // Tab de Chuvas
                carregarTabChuvas();
                
                // Tab de Consumo
                carregarTabConsumo();
                
                // Tab de Estatísticas
                carregarTabEstatisticas();
                
                // Atualizar informações rápidas do cabeçalho
                atualizarInformacoesRapidas();
            }
            
            // Função para carregar tab de produção
            function carregarTabProducao() {
                // Obter dados
                const registros = DB.registros.getAll();
                const colhedoras = DB.colhedoras.getAll();
                const estatisticasEquipamentos = DB.registros.getEquipmentStats();
                const periodo = Number(periodSelect.value);
                
                // Filtrar registros do período
                let registrosFiltrados = [...registros];
                
                if (periodo > 0) {
                    const dataLimite = new Date();
                    dataLimite.setDate(dataLimite.getDate() - periodo);
                    const dataLimiteStr = dataLimite.toISOString().split('T')[0];
                    
                    registrosFiltrados = registros.filter(r => r.data >= dataLimiteStr);
                }
                
                // Calcular valores totais
                const totalColhido = registrosFiltrados.reduce((total, r) => total + Number(r.quantidade || 0), 0);
                const totalHoras = registrosFiltrados.reduce((total, r) => total + Number(r.horas || 0), 0);
                const rendimentoMedio = totalHoras > 0 ? totalColhido / totalHoras : 0;
                
                // Obter datas únicas
                const datasUnicas = new Set(registrosFiltrados.map(r => r.data));
                const diasTrabalho = datasUnicas.size;
                
                // Calcular média por dia
                const mediaDiaria = diasTrabalho > 0 ? totalColhido / diasTrabalho : 0;
                
                // Atualizar cards
                document.getElementById('dash-total-colhido').textContent = `${formatarNumero(totalColhido)} T`;
                document.getElementById('dash-media-geral').textContent = `${formatarNumero(mediaDiaria)} T/dia`;
                document.getElementById('dash-media-dia').textContent = `${formatarNumero(rendimentoMedio)} T/h`;
                document.getElementById('dash-paradas-chuva').textContent = `${formatarNumero(DB.chuvas.getTotalDias(), 1)} dias`;
                
                // Obter dados da produção de hoje
                const hoje = new Date().toISOString().split('T')[0];
                const registrosHoje = registros.filter(r => r.data === hoje);
                const quantidadeHoje = registrosHoje.reduce((total, r) => total + Number(r.quantidade || 0), 0);
                const horasHoje = registrosHoje.reduce((total, r) => total + Number(r.horas || 0), 0);
                const rendimentoHoje = horasHoje > 0 ? quantidadeHoje / horasHoje : 0;
                
                // Atualizar cards de hoje
                document.getElementById('producao-hoje-total').textContent = `${formatarNumero(quantidadeHoje)} T`;
                document.getElementById('producao-hoje-hora').textContent = `${formatarNumero(rendimentoHoje)} T/h`;
                
                // Preencher tabela de médias
                const tabelaMedias = document.getElementById('tabela-medias-equipamentos');
               if (tabelaMedias) {
                    tabelaMedias.innerHTML = '';
                    
                    if (estatisticasEquipamentos.length === 0) {
                        tabelaMedias.innerHTML = `
                            <tr>
                                <td colspan="4" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                    Nenhum registro encontrado
                                </td>
                            </tr>
                        `;
                    } else {
                        // Ordenar por rendimento (maior para menor)
                        estatisticasEquipamentos.sort((a, b) => b.rendimento - a.rendimento);
                        
                        estatisticasEquipamentos.forEach(equip => {
                            const colhedora = DB.colhedoras.get(equip.id);
                            const nome = colhedora ? `${equip.id} - ${colhedora.marca || ''} ${colhedora.modelo || ''}` : equip.id;
                            
                            const row = document.createElement('tr');
                            row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                            
                            // Calcular eficiência (rendimento relativo ao melhor)
                            const maxRendimento = estatisticasEquipamentos[0].rendimento;
                            const eficiencia = maxRendimento > 0 ? (equip.rendimento / maxRendimento) * 100 : 0;
                            
                            row.innerHTML = `
                                <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${nome}</td>
                                <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(equip.mediaDiaria)}</td>
                                <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(equip.rendimento)}</td>
                                <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(eficiencia)}%</td>
                            `;
                            
                            tabelaMedias.appendChild(row);
                        });
                    }
                }
                
                // Encontrar melhores colhedoras
                if (estatisticasEquipamentos.length > 0) {
                    // Melhor rendimento
                    const melhorRendimento = [...estatisticasEquipamentos].sort((a, b) => b.rendimento - a.rendimento)[0];
                    document.getElementById('best-yield-colhedora').textContent = melhorRendimento.id;
                    document.getElementById('best-yield-value').textContent = `${formatarNumero(melhorRendimento.rendimento)} T/h`;
                    
                    // Maior volume
                    const maiorVolume = [...estatisticasEquipamentos].sort((a, b) => b.quantidade - a.quantidade)[0];
                    document.getElementById('best-volume-colhedora').textContent = maiorVolume.id;
                    document.getElementById('best-volume-value').textContent = `${formatarNumero(maiorVolume.quantidade)} T`;
                    
                    // Média diária
                    const melhorDiaria = [...estatisticasEquipamentos].sort((a, b) => b.mediaDiaria - a.mediaDiaria)[0];
                    document.getElementById('best-daily-colhedora').textContent = melhorDiaria.id;
                    document.getElementById('best-daily-value').textContent = `${formatarNumero(melhorDiaria.mediaDiaria)} T/dia`;
                }
                
                // Estatísticas por cultura
                const culturaStats = DB.registros.getCultureStats();
                
                if (culturaStats.length > 0) {
                    // Melhor rendimento por cultura
                    const melhorRendimentoCultura = [...culturaStats].sort((a, b) => b.rendimento - a.rendimento)[0];
                    document.getElementById('best-yield-cultura').textContent = melhorRendimentoCultura.cultura;
                    document.getElementById('best-yield-cultura-value').textContent = `${formatarNumero(melhorRendimentoCultura.rendimento)} T/h`;
                    
                    // Maior volume por cultura
                    const maiorVolumeCultura = [...culturaStats].sort((a, b) => b.quantidade - a.quantidade)[0];
                    document.getElementById('best-volume-cultura').textContent = maiorVolumeCultura.cultura;
                    document.getElementById('best-volume-cultura-value').textContent = `${formatarNumero(maiorVolumeCultura.quantidade)} T`;
                    
                    // Média diária por cultura
                    const melhorDiariaCultura = [...culturaStats].sort((a, b) => b.mediaDiaria - a.mediaDiaria)[0];
                    document.getElementById('best-daily-cultura').textContent = melhorDiariaCultura.cultura;
                    document.getElementById('best-daily-cultura-value').textContent = `${formatarNumero(melhorDiariaCultura.mediaDiaria)} T/dia`;
                    
                    // Gráfico de distribuição por cultura
                    const ctxCultura = document.getElementById('chart-culturas');
                    if (ctxCultura) {
                        if (window.chartCulturas) window.chartCulturas.destroy();
                        
                        // Ordenar culturas por quantidade
                        const culturaData = [...culturaStats].sort((a, b) => b.quantidade - a.quantidade);
                        
                        window.chartCulturas = new Chart(ctxCultura, {
                            type: 'pie',
                            data: {
                                labels: culturaData.map(c => c.cultura),
                                datasets: [{
                                    data: culturaData.map(c => c.quantidade),
                                    backgroundColor: [
                                        'rgba(255, 99, 132, 0.7)',
                                        'rgba(54, 162, 235, 0.7)',
                                        'rgba(255, 206, 86, 0.7)',
                                        'rgba(75, 192, 192, 0.7)',
                                        'rgba(153, 102, 255, 0.7)',
                                        'rgba(255, 159, 64, 0.7)',
                                        'rgba(199, 199, 199, 0.7)'
                                    ],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        position: 'bottom',
                                        labels: {
                                            color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                        }
                                    }
                                }
                            }
                        });
                    }
                }
                
                // Gráfico de comparação de colhedoras
                const ctxComparacao = document.getElementById('chart-colhedoras-comparacao');
                if (ctxComparacao) {
                    if (window.chartColhedorasComparacao) window.chartColhedorasComparacao.destroy();
                    
                    const equipData = [...estatisticasEquipamentos]
                        .sort((a, b) => b.quantidade - a.quantidade)
                        .slice(0, 5); // limitar a 5 para melhor visualização
                    
                    window.chartColhedorasComparacao = new Chart(ctxComparacao, {
                        type: 'bar',
                        data: {
                            labels: equipData.map(e => e.id),
                            datasets: [{
                                label: 'Produção (T)',
                                data: equipData.map(e => e.quantidade),
                                backgroundColor: 'rgba(54, 162, 235, 0.7)',
                                borderColor: 'rgba(54, 162, 235, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
                
                // Gráfico de produção ao longo do tempo
                const ctxTempo = document.getElementById('chart-producao-tempo');
                if (ctxTempo) {
                    if (window.chartProducaoTempo) window.chartProducaoTempo.destroy();
                    
                    // Obter dados diários
                    const dadosDiarios = DB.registros.getDailyStats(periodo);
                    
                    window.chartProducaoTempo = new Chart(ctxTempo, {
                        type: 'line',
                        data: {
                            labels: dadosDiarios.map(d => formatarData(d.data)),
                            datasets: [{
                                label: 'Produção (T)',
                                data: dadosDiarios.map(d => d.quantidade),
                                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                                borderColor: 'rgba(75, 192, 192, 1)',
                                borderWidth: 2,
                                tension: 0.3,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333',
                                        maxRotation: 45,
                                        minRotation: 45
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
            }
            
            // Função para carregar tab de caminhões
            function carregarTabCaminhoes() {
                // Obter estatísticas de caminhões
                const estatsCaminhoes = DB.caminhoes.getStats();
                
                // Atualizar cards
                document.getElementById('dash-total-caminhoes').textContent = DB.veiculosCadastrados.getAll().length;
                document.getElementById('dash-tempo-campo').textContent = `${formatarNumero(estatsCaminhoes.mediaTempoCampo, 1)} min`;
                document.getElementById('dash-tempo-patio').textContent = `${formatarNumero(estatsCaminhoes.mediaTempoPatio, 1)} min`;
                document.getElementById('dash-producao-transportada').textContent = `${formatarNumero(estatsCaminhoes.totalProducao)} T`;
                
                // Gráfico de produção por tipo
                const ctxTipo = document.getElementById('chart-caminhoes-tipo');
                if (ctxTipo) {
                    if (window.chartCaminhoesTipo) window.chartCaminhoesTipo.destroy();
                    
                    window.chartCaminhoesTipo = new Chart(ctxTipo, {
                        type: 'pie',
                        data: {
                            labels: ['Próprios', 'Terceiros'],
                            datasets: [{
                                data: [estatsCaminhoes.proprios.producao, estatsCaminhoes.terceiros.producao],
                                backgroundColor: [
                                    'rgba(54, 162, 235, 0.7)',
                                    'rgba(75, 192, 192, 0.7)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
                
                // Gráfico de tempo médio por caminhão
                const ctxTempo = document.getElementById('chart-caminhoes-tempo');
                if (ctxTempo) {
                    if (window.chartCaminhoesTempo) window.chartCaminhoesTempo.destroy();
                    
                    window.chartCaminhoesTempo = new Chart(ctxTempo, {
                        type: 'bar',
                        data: {
                            labels: ['Próprios', 'Terceiros'],
                            datasets: [
                                {
                                    label: 'Tempo Campo (min)',
                                    data: [estatsCaminhoes.proprios.mediaTempoCampo, estatsCaminhoes.terceiros.mediaTempoCampo],
                                    backgroundColor: 'rgba(54, 162, 235, 0.7)',
                                    borderColor: 'rgba(54, 162, 235, 1)',
                                    borderWidth: 1
                                },
                                {
                                    label: 'Tempo Pátio (min)',
                                    data: [estatsCaminhoes.proprios.mediaTempoPatio, estatsCaminhoes.terceiros.mediaTempoPatio],
                                    backgroundColor: 'rgba(255, 99, 132, 0.7)',
                                    borderColor: 'rgba(255, 99, 132, 1)',
                                    borderWidth: 1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
            }
            
            // Função para carregar tab de chuvas
            function carregarTabChuvas() {
                // Obter dados
                const chuvas = DB.chuvas.getAll();
                const totalDias = DB.chuvas.getTotalDias();
                const impactoEstimado = DB.chuvas.calcularImpactoEstimado();
                const ultimaChuva = DB.chuvas.getLastChuva();
                
                // Atualizar cards
                document.getElementById('dash-total-dias-parados').textContent = `${formatarNumero(totalDias, 1)} dias`;
                document.getElementById('dash-impacto-estimado').textContent = `${formatarNumero(impactoEstimado)} T`;
                document.getElementById('dash-ultima-parada').textContent = ultimaChuva ? formatarData(ultimaChuva.dataFim) : '–';
                document.getElementById('dash-total-registros-chuva').textContent = chuvas.length;
                
                // Agrupar chuvas por mês
                const chuvasPorMes = {};
                chuvas.forEach(chuva => {
                    const dataInicio = new Date(chuva.dataInicio);
                    const mes = dataInicio.getMonth();
                    const ano = dataInicio.getFullYear();
                    const chaveData = `${ano}-${mes}`;
                    
                    if (!chuvasPorMes[chaveData]) {
                        chuvasPorMes[chaveData] = {
                            mes: dataInicio.toLocaleDateString('pt-BR', { month: 'short' }),
                            ano: ano,
                            dias: 0
                        };
                    }
                    
                    chuvasPorMes[chaveData].dias += Number(chuva.dias || 0);
                });
                
                // Gráfico de paradas por mês
                const ctxParadasMes = document.getElementById('chart-paradas-mes');
                if (ctxParadasMes) {
                    if (window.chartParadasMes) window.chartParadasMes.destroy();
                    
                    // Converter para array e ordenar por data
                    const paradasData = Object.values(chuvasPorMes)
                        .sort((a, b) => a.ano - b.ano || a.mes.localeCompare(b.mes));
                    
                    window.chartParadasMes = new Chart(ctxParadasMes, {
                        type: 'bar',
                        data: {
                            labels: paradasData.map(p => `${p.mes}/${p.ano}`),
                            datasets: [{
                                label: 'Dias Parados',
                                data: paradasData.map(p => p.dias),
                                backgroundColor: 'rgba(255, 99, 132, 0.7)',
                                borderColor: 'rgba(255, 99, 132, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
                
                // Agrupar por intensidade
                const chuvasPorIntensidade = {
                    baixa: 0,
                    media: 0,
                    alta: 0
                };
                
                chuvas.forEach(chuva => {
                    if (chuva.intensidade in chuvasPorIntensidade) {
                        chuvasPorIntensidade[chuva.intensidade] += Number(chuva.dias || 0);
                    } else {
                        chuvasPorIntensidade.media += Number(chuva.dias || 0); // Padrão é média se não especificado
                    }
                });
                
                // Gráfico de intensidade
                const ctxIntensidade = document.getElementById('chart-paradas-intensidade');
                if (ctxIntensidade) {
                    if (window.chartIntensidade) window.chartIntensidade.destroy();
                    
                    window.chartIntensidade = new Chart(ctxIntensidade, {
                        type: 'pie',
                        data: {
                            labels: ['Baixa', 'Média', 'Alta'],
                            datasets: [{
                                data: [
                                    chuvasPorIntensidade.baixa,
                                    chuvasPorIntensidade.media,
                                    chuvasPorIntensidade.alta
                                ],
                                backgroundColor: [
                                    'rgba(75, 192, 192, 0.7)',
                                    'rgba(255, 206, 86, 0.7)',
                                    'rgba(255, 99, 132, 0.7)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
            }
            
            // Função para carregar tab de consumo
            function carregarTabConsumo() {
                // Obter estatísticas de consumo
                const statsConsumo = DB.consumos.getStats();
                
                // Atualizar cards
                document.getElementById('total-diesel').textContent = `${formatarNumero(statsConsumo.totalDiesel)} L`;
                document.getElementById('total-hidraulico').textContent = `${formatarNumero(statsConsumo.totalHidraulico)} L`;
                document.getElementById('consumo-medio-litro-hora').textContent = `${formatarNumero(statsConsumo.consumoMedioLitroHora)} L/h`;
                document.getElementById('total-abastecimentos').textContent = statsConsumo.totalRegistros;
                
                // Preencher tabela de consumo por equipamento
                const tabelaConsumo = document.getElementById('tabela-consumo-equipamentos');
                if (tabelaConsumo) {
                    tabelaConsumo.innerHTML = '';
                    
                    if (statsConsumo.equipamentos.length === 0) {
                        tabelaConsumo.innerHTML = `
                            <tr>
                                <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                    Nenhum registro encontrado
                                </td>
                            </tr>
                        `;
                    } else {
                        // Ordenar por consumo total (diesel + hidráulico)
                        statsConsumo.equipamentos
                            .sort((a, b) => (b.diesel + b.hidraulico) - (a.diesel + a.hidraulico))
                            .forEach(equip => {
                                const row = document.createElement('tr');
                                row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                                
                                // Tipo de equipamento formatado
                                let tipoEquipTexto = 'Colhedora';
                                if (equip.tipo === 'caminhao') {
                                    tipoEquipTexto = 'Caminhão';
                                }
                                
                                // Média de consumo
                                const mediaConsumo = equip.mediaConsumoDiesel || 0;
                                
                                row.innerHTML = `
                                    <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${equip.id}</td>
                                    <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${tipoEquipTexto}</td>
                                    <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(equip.diesel)} L</td>
                                    <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(equip.hidraulico)} L</td>
                                    <td class="px-4 py-3 text-right text-blue-600 dark:text-blue-400">${formatarNumero(mediaConsumo)} L/h</td>
                                `;
                                
                                tabelaConsumo.appendChild(row);
                            });
                    }
                }
                
                // Gráfico de consumo por equipamento
                const ctxConsumoEquip = document.getElementById('chart-consumo-equipamento');
                if (ctxConsumoEquip) {
                    if (window.chartConsumoEquip) window.chartConsumoEquip.destroy();
                    
                    // Limitar a 5 equipamentos para melhor visualização
                    const equipTop5 = statsConsumo.equipamentos
                        .sort((a, b) => (b.diesel + b.hidraulico) - (a.diesel + a.hidraulico))
                        .slice(0, 5);
                    
                    window.chartConsumoEquip = new Chart(ctxConsumoEquip, {
                        type: 'bar',
                        data: {
                            labels: equipTop5.map(e => e.id),
                            datasets: [
                                {
                                    label: 'Diesel (L)',
                                    data: equipTop5.map(e => e.diesel),
                                    backgroundColor: 'rgba(245, 158, 11, 0.7)',
                                    borderColor: 'rgba(245, 158, 11, 1)',
                                    borderWidth: 1
                                },
                                {
                                    label: 'Hidráulico (L)',
                                    data: equipTop5.map(e => e.hidraulico),
                                    backgroundColor: 'rgba(52, 211, 153, 0.7)',
                                    borderColor: 'rgba(52, 211, 153, 1)',
                                    borderWidth: 1
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
                
                // Gráfico de evolução do consumo
                const ctxEvolucao = document.getElementById('chart-evolucao-consumo');
                if (ctxEvolucao) {
                    if (window.chartEvolucaoConsumo) window.chartEvolucaoConsumo.destroy();
                    
                    // Agrupar consumos por data
                    const consumos = DB.consumos.getAll();
                    const consumoPorData = {};
                    
                    // Obter dados dos últimos 14 dias (ou menos se não houver)
                    const hoje = new Date();
                    const limiteDias = 14;
                    
                    // Inicializar datas dos últimos dias
                    for (let i = 0; i < limiteDias; i++) {
                        const data = new Date(hoje);
                        data.setDate(hoje.getDate() - i);
                        const dataStr = data.toISOString().split('T')[0];
                        
                        consumoPorData[dataStr] = {
                            data: dataStr,
                            diesel: 0,
                            hidraulico: 0
                        };
                    }
                    
                    // Preencher com dados reais
                    consumos.forEach(consumo => {
                        if (consumoPorData[consumo.data]) {
                            if (consumo.tipoOleo === 'diesel') {
                                consumoPorData[consumo.data].diesel += Number(consumo.quantidade) || 0;
                            } else if (consumo.tipoOleo === 'hidraulico') {
                                consumoPorData[consumo.data].hidraulico += Number(consumo.quantidade) || 0;
                            }
                        }
                    });
                    
                    // Converter para array e ordenar por data (mais antigo primeiro)
                    const dadosDiarios = Object.values(consumoPorData).sort((a, b) => new Date(a.data) - new Date(b.data));
                    
                    window.chartEvolucaoConsumo = new Chart(ctxEvolucao, {
                        type: 'line',
                        data: {
                            labels: dadosDiarios.map(d => formatarData(d.data)),
                            datasets: [
                                {
                                    label: 'Diesel (L)',
                                    data: dadosDiarios.map(d => d.diesel),
                                    backgroundColor: 'rgba(245, 158, 11, 0.1)',
                                    borderColor: 'rgba(245, 158, 11, 1)',
                                    borderWidth: 2,
                                    tension: 0.3,
                                    fill: false
                                },
                                {
                                    label: 'Hidráulico (L)',
                                    data: dadosDiarios.map(d => d.hidraulico),
                                    backgroundColor: 'rgba(52, 211, 153, 0.1)',
                                    borderColor: 'rgba(52, 211, 153, 1)',
                                    borderWidth: 2,
                                    tension: 0.3,
                                    fill: false
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: document.documentElement.classList.contains('dark') ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)'
                                    },
                                    ticks: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333',
                                        maxRotation: 45,
                                        minRotation: 45
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
            }
            
            // Função para carregar tab de estatísticas gerais
            function carregarTabEstatisticas() {
                // Obter dados
                const registros = DB.registros.getAll();
                const colhedoras = DB.colhedoras.getAll();
                const caminhoes = DB.veiculosCadastrados.getAll();
                const viagens = DB.caminhoes.getAll();
                const estatsCaminhoes = DB.caminhoes.getStats();
                const statsConsumo = DB.consumos.getStats();
                
                // Calcular totais de produção
                const totalColhido = registros.reduce((total, r) => total + Number(r.quantidade || 0), 0);
                const totalHoras = registros.reduce((total, r) => total + Number(r.horas || 0), 0);
                const rendimentoMedio = totalHoras > 0 ? totalColhido / totalHoras : 0;
                
                // Atualizar estatísticas de produção
                document.getElementById('stats-total-colhido').textContent = `${formatarNumero(totalColhido)} T`;
                document.getElementById('stats-rendimento-medio').textContent = `${formatarNumero(rendimentoMedio)} T/h`;
                document.getElementById('stats-registros-totais').textContent = registros.length;
                
                // Atualizar estatísticas de frota
                document.getElementById('stats-total-caminhoes').textContent = caminhoes.length;
                document.getElementById('stats-tempo-medio-total').textContent = `${formatarNumero(estatsCaminhoes.mediaTempoCampo + estatsCaminhoes.mediaTempoPatio, 1)} min`;
                document.getElementById('stats-viagens-registradas').textContent = viagens.length;
                
                // Atualizar estatísticas de consumo
                document.getElementById('stats-total-diesel').textContent = `${formatarNumero(statsConsumo.totalDiesel)} L`;
                document.getElementById('stats-total-hidraulico').textContent = `${formatarNumero(statsConsumo.totalHidraulico)} L`;
                
                // Calcular eficiência de combustível (T/L)
                const totalCombustivel = statsConsumo.totalDiesel + statsConsumo.totalHidraulico;
                const eficienciaCombustivel = totalCombustivel > 0 ? totalColhido / totalCombustivel : 0;
                document.getElementById('stats-eficiencia-litro').textContent = `${formatarNumero(eficienciaCombustivel)} T/L`;
            }
            
            // Atualizar informações rápidas no cabeçalho
            function atualizarInformacoesRapidas() {
                const registros = DB.registros.getAll();
                const colhedoras = DB.colhedoras.getAll();
                const totalDiasParados = DB.chuvas.getTotalDias();
                
                // Calcular total colhido
                const totalColhido = registros.reduce((total, r) => total + Number(r.quantidade || 0), 0);
                
                // Atualizar informações
                document.getElementById('quick-total-colhido').textContent = `${formatarNumero(totalColhido)} T`;
                document.getElementById('quick-colhedoras').textContent = colhedoras.length;
                document.getElementById('quick-paradas-chuva').textContent = `${formatarNumero(totalDiasParados, 1)} dias`;
            }
            
            // Carregar dados iniciais
            carregarEstatisticasDashboard();
        }
        
        // Funções para carregamento das páginas do sistema
        
        // Carregar página de colhedoras
        function carregarPaginaColhedoras() {
            // Obter elementos
            const formColhedora = document.getElementById('form-colhedora');
            const btnAddColhedora = document.getElementById('btn-add-colhedora');
            const tabelaColhedoras = document.getElementById('tabela-colhedoras');
            
            // Evento de submit do formulário
            if (formColhedora) {
                formColhedora.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Obter valores do formulário
                    const colhedora = {
                        id: document.getElementById('colhedora-id').value,
                        marca: document.getElementById('colhedora-marca').value,
                        modelo: document.getElementById('colhedora-modelo').value,
                        ano: Number(document.getElementById('colhedora-ano').value) || null,
                        observacoes: document.getElementById('colhedora-observacoes').value
                    };
                    
                    try {
                        // Adicionar colhedora
                        DB.colhedoras.add(colhedora);
                        
                        // Limpar formulário
                        formColhedora.reset();
                        
                        // Mostrar mensagem de sucesso
                        mostrarToast('Colhedora adicionada com sucesso!', 'success');
                        
                        // Atualizar tabela
                        atualizarTabelaColhedoras();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
            }
            
            // Botão para mostrar formulário em outra view não usada
            if (btnAddColhedora) {
                btnAddColhedora.addEventListener('click', function() {
                    // Mover a página para o formulário
                    document.getElementById('form-colhedora').scrollIntoView({ behavior: 'smooth' });
                    // Focar no primeiro campo
                    document.getElementById('colhedora-id').focus();
                });
            }
            
            // Botão para exportar
            const btnExportColhedoras = document.getElementById('btn-export-colhedoras');
            if (btnExportColhedoras) {
                btnExportColhedoras.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('colhedoras');
                        mostrarToast('Relatório de colhedoras gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Função para atualizar tabela de colhedoras
            function atualizarTabelaColhedoras() {
                if (!tabelaColhedoras) return;
                
                // Limpar tabela
                tabelaColhedoras.innerHTML = '';
                
                // Obter colhedoras
                const colhedoras = DB.colhedoras.getAll();
                
                if (colhedoras.length === 0) {
                    tabelaColhedoras.innerHTML = `
                        <tr>
                            <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhuma colhedora cadastrada
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                // Ordenar por ID
                colhedoras.sort((a, b) => a.id.localeCompare(b.id));
                
                // Adicionar linhas
                colhedoras.forEach(colhedora => {
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${colhedora.id}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${colhedora.marca || '-'}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${colhedora.modelo || '-'}</td>
                        <td class="px-4 py-3 text-center text-gray-700 dark:text-gray-300">${colhedora.ano || '-'}</td>
                        <td class="px-4 py-3 text-center">
                            <button class="btn-editar-colhedora px-2 py-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300" data-id="${colhedora.id}" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-excluir-colhedora px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${colhedora.id}" title="Excluir">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tabelaColhedoras.appendChild(row);
                });
                
                // Adicionar eventos aos botões
                document.querySelectorAll('.btn-editar-colhedora').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        // Obter colhedora
                        const colhedora = DB.colhedoras.get(id);
                        
                        if (colhedora) {
                            // Preencher formulário
                            document.getElementById('colhedora-id').value = colhedora.id;
                            document.getElementById('colhedora-marca').value = colhedora.marca || '';
                            document.getElementById('colhedora-modelo').value = colhedora.modelo || '';
                            document.getElementById('colhedora-ano').value = colhedora.ano || '';
                            document.getElementById('colhedora-observacoes').value = colhedora.observacoes || '';
                            
                            // Rolar para o formulário
                            document.getElementById('form-colhedora').scrollIntoView({ behavior: 'smooth' });
                            
                            // Mudar texto do botão de envio
                            const submitBtn = formColhedora.querySelector('button[type="submit"]');
                            submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i> Atualizar Colhedora';
                            
                            // Adicionar identificador para o formulário de edição
                            formColhedora.dataset.editing = id;
                            
                            // Modificar comportamento do submit para atualizar em vez de adicionar
                            formColhedora.onsubmit = function(e) {
                                e.preventDefault();
                                
                                // Obter valores do formulário
                                const colhedoraAtualizada = {
                                    id: document.getElementById('colhedora-id').value,
                                    marca: document.getElementById('colhedora-marca').value,
                                    modelo: document.getElementById('colhedora-modelo').value,
                                    ano: Number(document.getElementById('colhedora-ano').value) || null,
                                    observacoes: document.getElementById('colhedora-observacoes').value
                                };
                                
                                try {
                                    // Atualizar colhedora
                                    DB.colhedoras.update(colhedoraAtualizada);
                                    
                                    // Limpar formulário
                                    formColhedora.reset();
                                    
                                    // Mostrar mensagem de sucesso
                                    mostrarToast('Colhedora atualizada com sucesso!', 'success');
                                    
                                    // Restaurar formulário ao modo de adição
                                    delete formColhedora.dataset.editing;
                                    submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i> Salvar Colhedora';
                                    
                                    // Restaurar comportamento original do submit
                                    formColhedora.onsubmit = function(e) {
                                        e.preventDefault();
                                        // código original de adição
                                    };
                                    
                                    // Atualizar tabela
                                    atualizarTabelaColhedoras();
                                } catch (error) {
                                    mostrarToast(`Erro: ${error.message}`, 'error');
                                }
                            };
                        }
                    });
                });
                
                document.querySelectorAll('.btn-excluir-colhedora').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        if (confirm(`Deseja realmente excluir a colhedora ${id}?`)) {
                            try {
                                DB.colhedoras.remove(id);
                                mostrarToast(`Colhedora ${id} excluída com sucesso!`, 'success');
                                atualizarTabelaColhedoras();
                            } catch (error) {
                                mostrarToast(`Erro: ${error.message}`, 'error');
                            }
                        }
                    });
                });
            }
            
            // Carregar dados iniciais
            atualizarTabelaColhedoras();
        }
        // Carregar página de registros
        function carregarPaginaRegistros() {
            // Obter elementos
            const formRegistro = document.getElementById('form-registro');
            
            // Preencher select de colhedoras
            const selectColhedora = document.getElementById('registro-colhedora');
            if (selectColhedora) {
                // Limpar opções existentes (exceto a primeira)
                while (selectColhedora.options.length > 1) {
                    selectColhedora.remove(1);
                }
                
                // Obter colhedoras
                const colhedoras = DB.colhedoras.getAll();
                
                // Adicionar opções
                colhedoras.forEach(colhedora => {
                    const option = document.createElement('option');
                    option.value = colhedora.id;
                    option.textContent = `${colhedora.id} - ${colhedora.marca || ''} ${colhedora.modelo || ''}`;
                    selectColhedora.appendChild(option);
                });
            }
            
            // Configurar a data atual no campo de data
            const inputData = document.getElementById('registro-data');
            if (inputData) {
                const hoje = new Date().toISOString().split('T')[0];
                inputData.value = hoje;
            }
            
            // Evento de submit do formulário
            if (formRegistro) {
                formRegistro.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Obter valores do formulário
                    const registro = {
                        data: document.getElementById('registro-data').value,
                        colhedoraId: document.getElementById('registro-colhedora').value,
                        cultura: document.getElementById('registro-cultura').value,
                        quantidade: Number(document.getElementById('registro-quantidade').value),
                        horas: Number(document.getElementById('registro-horas').value),
                        combustivel: Number(document.getElementById('registro-combustivel').value) || 0,
                        observacoes: document.getElementById('registro-observacoes').value
                    };
                    
                    try {
                        // Adicionar registro
                        DB.registros.add(registro);
                        
                        // Limpar formulário (exceto colhedora e data)
                        document.getElementById('registro-cultura').value = '';
                        document.getElementById('registro-quantidade').value = '';
                        document.getElementById('registro-horas').value = '';
                        document.getElementById('registro-combustivel').value = '';
                        document.getElementById('registro-observacoes').value = '';
                        
                        // Mostrar mensagem de sucesso
                        mostrarToast('Registro adicionado com sucesso!', 'success');
                        
                        // Atualizar tabela de colhedoras
                        atualizarTabelaColhedorasProducao();
                        
                        // Atualizar estatísticas
                        atualizarEstatisticasProducao();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
            }
            
            // Função para atualizar tabela de colhedoras
            function atualizarTabelaColhedorasProducao() {
                const tabelaColhedoras = document.getElementById('tabela-colhedoras');
                if (!tabelaColhedoras) return;
                
                // Limpar tabela
                tabelaColhedoras.innerHTML = '';
                
                // Obter estatísticas de equipamentos
                const estatisticasEquipamentos = DB.registros.getEquipmentStats();
                
                if (estatisticasEquipamentos.length === 0) {
                    tabelaColhedoras.innerHTML = `
                        <tr>
                            <td colspan="3" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                // Ordenar por quantidade (maior para menor)
                estatisticasEquipamentos.sort((a, b) => b.quantidade - a.quantidade);
                
                // Adicionar linhas
                estatisticasEquipamentos.forEach(equip => {
                    const colhedora = DB.colhedoras.get(equip.id);
                    const nome = colhedora ? `${equip.id} - ${colhedora.marca || ''} ${colhedora.modelo || ''}` : equip.id;
                    
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${nome}</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(equip.quantidade)} T</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(equip.rendimento)} T/h</td>
                    `;
                    
                    tabelaColhedoras.appendChild(row);
                });
            }
            
            // Função para atualizar estatísticas de produção
            function atualizarEstatisticasProducao() {
                const registros = DB.registros.getAll();
                
                // Calcular total colhido
                const totalColhido = registros.reduce((total, r) => total + Number(r.quantidade || 0), 0);
                
                // Calcular rendimento médio
                const totalHoras = registros.reduce((total, r) => total + Number(r.horas || 0), 0);
                const rendimentoMedio = totalHoras > 0 ? totalColhido / totalHoras : 0;
                
                // Obter total de dias com chuva
                const totalDiasParados = DB.chuvas.getTotalDias();
                
                // Atualizar estatísticas
                document.getElementById('total-colhido').textContent = `${formatarNumero(totalColhido)} T`;
                document.getElementById('rendimento-medio').textContent = `${formatarNumero(rendimentoMedio)} T/h`;
                document.getElementById('paradas-chuva-total').textContent = `${formatarNumero(totalDiasParados, 1)} dias`;
            }
            
            // Carregar dados iniciais
            atualizarTabelaColhedorasProducao();
            atualizarEstatisticasProducao();
        }
        
        // Carregar página de histórico
        function carregarPaginaHistorico() {
            // Preencher select de colhedoras
            const selectColhedora = document.getElementById('filtro-colhedora');
            if (selectColhedora) {
                // Limpar opções existentes (exceto a primeira)
                while (selectColhedora.options.length > 1) {
                    selectColhedora.remove(1);
                }
                
                // Obter colhedoras
                const colhedoras = DB.colhedoras.getAll();
                
                // Adicionar opções
                colhedoras.forEach(colhedora => {
                    const option = document.createElement('option');
                    option.value = colhedora.id;
                    option.textContent = `${colhedora.id} - ${colhedora.marca || ''} ${colhedora.modelo || ''}`;
                    selectColhedora.appendChild(option);
                });
            }
            
            // Preencher select de culturas
            const selectCultura = document.getElementById('filtro-cultura');
            if (selectCultura) {
                // Limpar opções existentes (exceto a primeira)
                while (selectCultura.options.length > 1) {
                    selectCultura.remove(1);
                }
                
                // Obter culturas únicas
                const registros = DB.registros.getAll();
                const culturas = [...new Set(registros.map(r => r.cultura))].filter(c => c);
                
                // Adicionar opções
                culturas.forEach(cultura => {
                    const option = document.createElement('option');
                    option.value = cultura;
                    option.textContent = cultura;
                    selectCultura.appendChild(option);
                });
            }
            
            // Botões de filtro
            const btnAplicarFiltros = document.getElementById('btn-aplicar-filtros');
            const btnLimparFiltros = document.getElementById('btn-limpar-filtros');
            
            if (btnAplicarFiltros) {
                btnAplicarFiltros.addEventListener('click', function() {
                    carregarRegistros();
                });
            }
            
            if (btnLimparFiltros) {
                btnLimparFiltros.addEventListener('click', function() {
                    // Limpar filtros
                    if (selectColhedora) selectColhedora.value = '';
                    if (selectCultura) selectCultura.value = '';
                    document.getElementById('filtro-data-inicio').value = '';
                    document.getElementById('filtro-data-fim').value = '';
                    
                    // Carregar registros sem filtro
                    carregarRegistros();
                });
            }
            
            // Botão de exportar
            const btnExportHistorico = document.getElementById('btn-export-historico');
            if (btnExportHistorico) {
                btnExportHistorico.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('registros');
                        mostrarToast('Relatório de histórico gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Função para carregar registros com base nos filtros
            function carregarRegistros() {
                // Obter valores dos filtros
                const colhedoraId = document.getElementById('filtro-colhedora').value;
                const cultura = document.getElementById('filtro-cultura').value;
                const dataInicio = document.getElementById('filtro-data-inicio').value;
                const dataFim = document.getElementById('filtro-data-fim').value;
                
                // Obter todos os registros
                let registros = DB.registros.getAll();
                
                // Aplicar filtros
                if (colhedoraId) {
                    registros = registros.filter(r => r.colhedoraId === colhedoraId);
                }
                
                if (cultura) {
                    registros = registros.filter(r => r.cultura === cultura);
                }
                
                if (dataInicio) {
                    registros = registros.filter(r => r.data >= dataInicio);
                }
                
                if (dataFim) {
                    registros = registros.filter(r => r.data <= dataFim);
                }
                
                // Ordenar por data (mais recente primeiro)
                registros.sort((a, b) => new Date(b.data) - new Date(a.data));
                
                // Atualizar contagem
                const registrosContagem = document.getElementById('registros-contagem');
                if (registrosContagem) {
                    registrosContagem.textContent = `(${registros.length})`;
                }
                
                // Atualizar tabela
                const tabelaRegistros = document.getElementById('tabela-registros');
                if (!tabelaRegistros) return;
                
                // Limpar tabela
                tabelaRegistros.innerHTML = '';
                
                if (registros.length === 0) {
                    tabelaRegistros.innerHTML = `
                        <tr>
                            <td colspan="7" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                // Adicionar linhas
                registros.forEach(registro => {
                    const colhedora = DB.colhedoras.get(registro.colhedoraId);
                    const nomeColhedora = colhedora ? `${registro.colhedoraId} - ${colhedora.marca || ''} ${colhedora.modelo || ''}` : registro.colhedoraId;
                    
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    // Calcular rendimento
                    const rendimento = Number(registro.horas) > 0 ? Number(registro.quantidade) / Number(registro.horas) : 0;
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${formatarData(registro.data)}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${nomeColhedora}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${registro.cultura || '-'}</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(registro.quantidade)} T</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(registro.horas)}</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(rendimento)} T/h</td>
                        <td class="px-4 py-3 text-center">
                            <button class="btn-detalhes-registro px-2 py-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300" data-id="${registro.id}" title="Detalhes">
                                <i class="fas fa-info-circle"></i>
                            </button>
                            <button class="btn-excluir-registro px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${registro.id}" title="Excluir">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tabelaRegistros.appendChild(row);
                });
                
                // Adicionar eventos aos botões
                document.querySelectorAll('.btn-detalhes-registro').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        const registro = DB.registros.get(id);
                        
                        if (registro) {
                            const colhedora = DB.colhedoras.get(registro.colhedoraId);
                            const nomeColhedora = colhedora ? `${registro.colhedoraId} - ${colhedora.marca || ''} ${colhedora.modelo || ''}` : registro.colhedoraId;
                            
                            // Calcular rendimento
                            const rendimento = Number(registro.horas) > 0 ? Number(registro.quantidade) / Number(registro.horas) : 0;
                            
                            // Montar mensagem
                            const mensagem = `
                                <div class="font-medium text-lg mb-2">Detalhes do Registro</div>
                                <div class="grid grid-cols-2 gap-2 mb-2">
                                    <div class="font-medium">Data:</div>
                                    <div>${formatarData(registro.data)}</div>
                                    
                                    <div class="font-medium">Colhedora:</div>
                                    <div>${nomeColhedora}</div>
                                    
                                    <div class="font-medium">Cultura:</div>
                                    <div>${registro.cultura || '-'}</div>
                                    
                                    <div class="font-medium">Quantidade:</div>
                                    <div>${formatarNumero(registro.quantidade)} T</div>
                                    
                                    <div class="font-medium">Horas:</div>
                                    <div>${formatarNumero(registro.horas)}</div>
                                    
                                    <div class="font-medium">Rendimento:</div>
                                    <div>${formatarNumero(rendimento)} T/h</div>
                                    
                                    <div class="font-medium">Combustível:</div>
                                    <div>${registro.combustivel ? formatarNumero(registro.combustivel) + ' L' : '-'}</div>
                                </div>
                                
                                ${registro.observacoes ? `
                                    <div class="font-medium mb-1">Observações:</div>
                                    <div class="border border-gray-200 dark:border-gray-700 rounded p-2 bg-gray-50 dark:bg-gray-800">
                                        ${registro.observacoes}
                                    </div>
                                ` : ''}
                            `;
                            
                            // Mostrar toast
                            mostrarToast(mensagem, 'info');
                        }
                    });
                });
                
                document.querySelectorAll('.btn-excluir-registro').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        if (confirm(`Deseja realmente excluir este registro?`)) {
                            try {
                                DB.registros.remove(id);
                                mostrarToast('Registro excluído com sucesso!', 'success');
                                carregarRegistros();
                            } catch (error) {
                                mostrarToast(`Erro: ${error.message}`, 'error');
                            }
                        }
                    });
                });
            }
            
            // Carregar registros iniciais
            carregarRegistros();
        }
        
        // Carregar página de chuvas
        function carregarPaginaChuvas() {
            // Obter elementos
            const formChuva = document.getElementById('form-chuva');
            
            // Configurar datas iniciais
            const inputDataInicio = document.getElementById('chuva-data-inicio');
            const inputDataFim = document.getElementById('chuva-data-fim');
            
            if (inputDataInicio && inputDataFim) {
                const hoje = new Date().toISOString().split('T')[0];
                inputDataInicio.value = hoje;
                inputDataFim.value = hoje;
                
                // Evento para calcular dias automaticamente
                inputDataInicio.addEventListener('change', calcularDias);
                inputDataFim.addEventListener('change', calcularDias);
            }
            
            // Função para calcular dias entre datas
            function calcularDias() {
                const dataInicio = new Date(inputDataInicio.value);
                const dataFim = new Date(inputDataFim.value);
                
                // Validar datas
                if (isNaN(dataInicio.getTime()) || isNaN(dataFim.getTime())) {
                    return;
                }
                
                // Calcular diferença em dias
                const diffTime = Math.abs(dataFim - dataInicio);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                // Atualizar campo de dias
                document.getElementById('chuva-dias').value = diffDays;
            }
            
            // Evento de submit do formulário
            if (formChuva) {
                formChuva.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Obter valores do formulário
                    const chuva = {
                        dataInicio: document.getElementById('chuva-data-inicio').value,
                        dataFim: document.getElementById('chuva-data-fim').value,
                        dias: Number(document.getElementById('chuva-dias').value),
                        intensidade: document.getElementById('chuva-intensidade').value,
                        observacoes: document.getElementById('chuva-observacoes').value
                    };
                    
                    try {
                        // Validar datas
                        if (new Date(chuva.dataInicio) > new Date(chuva.dataFim)) {
                            throw new Error('A data de início deve ser anterior à data de fim');
                        }
                        
                        // Adicionar registro
                        DB.chuvas.add(chuva);
                        
                        // Limpar formulário
                        document.getElementById('chuva-intensidade').value = '';
                        document.getElementById('chuva-observacoes').value = '';
                        
                        // Redefinir datas
                        const hoje = new Date().toISOString().split('T')[0];
                        document.getElementById('chuva-data-inicio').value = hoje;
                        document.getElementById('chuva-data-fim').value = hoje;
                        document.getElementById('chuva-dias').value = '1';
                        
                        // Mostrar mensagem de sucesso
                        mostrarToast('Registro de chuva adicionado com sucesso!', 'success');
                        
                        // Atualizar tabela
                        atualizarTabelaChuvas();
                        
                        // Atualizar estatísticas
                        atualizarEstatisticasChuvas();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
            }
            
            // Botão de exportar
            const btnExportChuvas = document.getElementById('btn-export-chuvas');
            if (btnExportChuvas) {
                btnExportChuvas.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('chuvas');
                        mostrarToast('Relatório de chuvas gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Função para atualizar tabela de chuvas
            function atualizarTabelaChuvas() {
                const tabelaChuvas = document.getElementById('tabela-chuvas');
                if (!tabelaChuvas) return;
                
                // Limpar tabela
                tabelaChuvas.innerHTML = '';
                
                // Obter chuvas
                const chuvas = DB.chuvas.getAll();
                
                if (chuvas.length === 0) {
                    tabelaChuvas.innerHTML = `
                        <tr>
                            <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                // Ordenar por data (mais recente primeiro)
                chuvas.sort((a, b) => new Date(b.dataFim) - new Date(a.dataFim));
                
                // Adicionar linhas
                chuvas.forEach(chuva => {
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    // Formatar intensidade
                    let intensidadeTexto = 'Média';
                    let intensidadeClasse = 'text-yellow-600 dark:text-yellow-400';
                    
                    if (chuva.intensidade === 'baixa') {
                        intensidadeTexto = 'Baixa';
                        intensidadeClasse = 'text-green-600 dark:text-green-400';
                    } else if (chuva.intensidade === 'alta') {
                        intensidadeTexto = 'Alta';
                        intensidadeClasse = 'text-red-600 dark:text-red-400';
                    }
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${formatarPeriodo(chuva.dataInicio, chuva.dataFim)}</td>
                        <td class="px-4 py-3 text-center text-gray-700 dark:text-gray-300">${formatarNumero(chuva.dias, 1)}</td>
                        <td class="px-4 py-3 text-center ${intensidadeClasse} font-medium">${intensidadeTexto}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${chuva.observacoes || '-'}</td>
                        <td class="px-4 py-3 text-center">
                            <button class="btn-excluir-chuva px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${chuva.id}" title="Excluir">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tabelaChuvas.appendChild(row);
                });
                
                // Adicionar eventos aos botões
                document.querySelectorAll('.btn-excluir-chuva').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        if (confirm(`Deseja realmente excluir este registro de chuva?`)) {
                            try {
                                DB.chuvas.remove(id);
                                mostrarToast('Registro excluído com sucesso!', 'success');
                                atualizarTabelaChuvas();
                                atualizarEstatisticasChuvas();
                            } catch (error) {
                                mostrarToast(`Erro: ${error.message}`, 'error');
                            }
                        }
                    });
                });
            }
            
            // Função para atualizar estatísticas
            function atualizarEstatisticasChuvas() {
                // Obter dados
                const chuvas = DB.chuvas.getAll();
                const totalDias = DB.chuvas.getTotalDias();
                const impactoEstimado = DB.chuvas.calcularImpactoEstimado();
                const ultimaChuva = DB.chuvas.getLastChuva();
                
                // Atualizar cards
                document.getElementById('chuva-total-registros').textContent = chuvas.length + ' registros';
                document.getElementById('chuva-total-dias').textContent = `${formatarNumero(totalDias, 1)} dias`;
                document.getElementById('chuva-ultima-parada').textContent = ultimaChuva ? formatarData(ultimaChuva.dataFim) : '–';
                document.getElementById('chuva-impacto-estimado').textContent = `${formatarNumero(impactoEstimado)} T`;
            }
            
            // Carregar dados iniciais
            atualizarTabelaChuvas();
            atualizarEstatisticasChuvas();
        }
        
        // Carregar página de caminhões
        function carregarPaginaCaminhoes() {
            // Tabs de caminhões
            const caminhoesTabs = document.querySelectorAll('#content-caminhoes .caminhoes-tab');
            
            caminhoesTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Simular clique para garantir que as funções de carregamento serão chamadas
                    setTimeout(() => {
                        window.dispatchEvent(new Event('resize'));
                    }, 100);
                });
            });
            
            // Tab de cadastro
            const btnAddCaminhao = document.getElementById('btn-add-new-caminhao');
            const cadastroCard = document.getElementById('cadastro-caminhao-card');
            const btnCancelarCadastro = document.getElementById('btn-cancelar-cadastro-caminhao');
            const formCadastroCaminhao = document.getElementById('form-cadastro-caminhao');
            
            // Botão para mostrar formulário
            if (btnAddCaminhao && cadastroCard) {
                btnAddCaminhao.addEventListener('click', function() {
                    cadastroCard.classList.remove('hidden');
                    document.getElementById('cadastro-caminhao-id').disabled = false;
                    formCadastroCaminhao.reset();
                });
            }
            
            // Botão para cancelar cadastro
            if (btnCancelarCadastro && cadastroCard) {
                btnCancelarCadastro.addEventListener('click', function() {
                    cadastroCard.classList.add('hidden');
                    formCadastroCaminhao.reset();
                });
            }
            
            // Formulário de cadastro de caminhão
            if (formCadastroCaminhao) {
                formCadastroCaminhao.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Obter valores do formulário
                    const caminhao = {
                        id: document.getElementById('cadastro-caminhao-id').value,
                        placa: document.getElementById('cadastro-caminhao-placa').value,
                        modelo: document.getElementById('cadastro-caminhao-modelo').value,
                        tipo: document.querySelector('input[name="tipo-caminhao"]:checked').value,
                        capacidade: Number(document.getElementById('cadastro-caminhao-capacidade').value) || null,
                        motorista: document.getElementById('cadastro-caminhao-motorista').value,
                        observacoes: document.getElementById('cadastro-caminhao-observacoes').value
                    };
                    
                    try {
                        // Verificar se estamos editando ou adicionando
                        if (document.getElementById('cadastro-caminhao-id').disabled) {
                            // Editando
                            DB.veiculosCadastrados.update(caminhao);
                            mostrarToast(`Caminhão ${caminhao.id} atualizado com sucesso!`, 'success');
                        } else {
                            // Adicionando
                            DB.veiculosCadastrados.add(caminhao);
                            mostrarToast(`Caminhão ${caminhao.id} cadastrado com sucesso!`, 'success');
                        }
                        
                        // Limpar formulário e esconder card
                        formCadastroCaminhao.reset();
                        cadastroCard.classList.add('hidden');
                        
                        // Atualizar tabela
                        atualizarTabelaCaminhoes();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
            }
            
            // Botão de exportar caminhões
            const btnExportCaminhoes = document.getElementById('btn-export-caminhoes');
            if (btnExportCaminhoes) {
                btnExportCaminhoes.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('caminhoes');
                        mostrarToast('Relatório de caminhões gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Função para atualizar tabela de caminhões
            function atualizarTabelaCaminhoes() {
                const tabelaCaminhoes = document.getElementById('tabela-caminhoes');
                if (!tabelaCaminhoes) return;
                
                // Limpar tabela
                tabelaCaminhoes.innerHTML = '';
                
                // Obter caminhões
                const caminhoes = DB.veiculosCadastrados.getAll();
                
                if (caminhoes.length === 0) {
                    tabelaCaminhoes.innerHTML = `
                        <tr>
                            <td colspan="6" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum caminhão cadastrado
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                // Ordenar por ID
                caminhoes.sort((a, b) => a.id.localeCompare(b.id));
                
                // Adicionar linhas
                caminhoes.forEach(caminhao => {
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    // Formatar tipo
                    const tipoTexto = caminhao.tipo === 'proprio' ? 'Próprio' : 'Terceiro';
                    const tipoClasse = caminhao.tipo === 'proprio' ? 'text-blue-600 dark:text-blue-400' : 'text-green-600 dark:text-green-400';
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${caminhao.id}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${caminhao.placa}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${caminhao.modelo || '-'}</td>
                        <td class="px-4 py-3 text-center ${tipoClasse} font-medium">${tipoTexto}</td>
                        <td class="px-4 py-3 text-center text-gray-700 dark:text-gray-300">${caminhao.capacidade ? `${formatarNumero(caminhao.capacidade)} T` : '-'}</td>
                        <td class="px-4 py-3 text-center">
                            <button class="btn-editar-caminhao px-2 py-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300" data-id="${caminhao.id}" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-excluir-caminhao px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${caminhao.id}" title="Excluir">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tabelaCaminhoes.appendChild(row);
                });
                
                // Adicionar eventos aos botões
                document.querySelectorAll('.btn-editar-caminhao').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        const caminhao = DB.veiculosCadastrados.get(id);
                        
                        if (caminhao) {
                            // Mostrar card de cadastro
                            cadastroCard.classList.remove('hidden');
                            
                            // Preencher formulário
                            document.getElementById('cadastro-caminhao-id').value = caminhao.id;
                            document.getElementById('cadastro-caminhao-id').disabled = true; // Desabilitar edição do ID
                            document.getElementById('cadastro-caminhao-placa').value = caminhao.placa || '';
                            document.getElementById('cadastro-caminhao-modelo').value = caminhao.modelo || '';
                            
                            // Selecionar tipo
                            if (caminhao.tipo === 'proprio') {
                                document.getElementById('tipo-proprio').checked = true;
                            } else {
                                document.getElementById('tipo-terceiro').checked = true;
                            }
                            
                            document.getElementById('cadastro-caminhao-capacidade').value = caminhao.capacidade || '';
                            document.getElementById('cadastro-caminhao-motorista').value = caminhao.motorista || '';
                            document.getElementById('cadastro-caminhao-observacoes').value = caminhao.observacoes || '';
                            
                            // Rolar para o formulário
                            cadastroCard.scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                });
                
                document.querySelectorAll('.btn-excluir-caminhao').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        if (confirm(`Deseja realmente excluir o caminhão ${id}?`)) {
                            try {
                                DB.veiculosCadastrados.remove(id);
                                mostrarToast(`Caminhão ${id} excluído com sucesso!`, 'success');
                                atualizarTabelaCaminhoes();
                            } catch (error) {
                                mostrarToast(`Erro: ${error.message}`, 'error');
                            }
                        }
                    });
                });
            }
            
            // Tab de registros de viagens
            // Preencher select de caminhões
            const selectCaminhao = document.getElementById('caminhao-id');
            if (selectCaminhao) {
                // Função para atualizar lista de caminhões
                function atualizarSelectCaminhoes() {
                    // Limpar opções existentes (exceto a primeira)
                    while (selectCaminhao.options.length > 1) {
                        selectCaminhao.remove(1);
                    }
                    
                    // Obter caminhões
                    const caminhoes = DB.veiculosCadastrados.getAll();
                    
                    // Adicionar opções
                    caminhoes.forEach(caminhao => {
                        const option = document.createElement('option');
                        option.value = caminhao.id;
                        option.textContent = `${caminhao.id} - ${caminhao.placa || ''} (${caminhao.tipo === 'proprio' ? 'Próprio' : 'Terceiro'})`;
                        selectCaminhao.appendChild(option);
                    });
                }
                
                // Atualizar select inicial
                atualizarSelectCaminhoes();
            }
            
            // Configurar a data atual no campo de data de viagem
            const inputDataViagem = document.getElementById('caminhao-data');
            if (inputDataViagem) {
                const hoje = new Date().toISOString().split('T')[0];
                inputDataViagem.value = hoje;
            }
            
            // Formulário de registro de viagem
            const formCaminhao = document.getElementById('form-caminhao');
            if (formCaminhao) {
                formCaminhao.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Obter valores do formulário
                    const viagem = {
                        data: document.getElementById('caminhao-data').value,
                        caminhaoId: document.getElementById('caminhao-id').value,
                        cultura: document.getElementById('caminhao-cultura').value,
                        producao: Number(document.getElementById('caminhao-producao').value),
                        tempoCampo: Number(document.getElementById('caminhao-tempo-campo').value),
                        tempoPatio: Number(document.getElementById('caminhao-tempo-patio').value),
                        observacoes: document.getElementById('caminhao-observacoes').value
                    };
                    
                    try {
                        // Adicionar viagem
                        DB.caminhoes.add(viagem);
                        
                        // Limpar campos (exceto data e caminhão)
                        document.getElementById('caminhao-cultura').value = '';
                        document.getElementById('caminhao-producao').value = '';
                        document.getElementById('caminhao-tempo-campo').value = '';
                        document.getElementById('caminhao-tempo-patio').value = '';
                        document.getElementById('caminhao-observacoes').value = '';
                        
                        // Mostrar mensagem de sucesso
                        mostrarToast('Viagem registrada com sucesso!', 'success');
                        
                        // Atualizar tabela de histórico
                        atualizarTabelaHistoricoCaminhoes();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
            }
            
            // Botão de exportar viagens
            const btnExportViagens = document.getElementById('btn-export-viagens');
            if (btnExportViagens) {
                btnExportViagens.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('viagens');
                        mostrarToast('Relatório de viagens gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Função para atualizar tabela de histórico de caminhões
            function atualizarTabelaHistoricoCaminhoes() {
                const tabelaHistorico = document.getElementById('tabela-historico-caminhoes');
                if (!tabelaHistorico) return;
                
                // Limpar tabela
                tabelaHistorico.innerHTML = '';
                
                // Obter viagens
                const viagens = DB.caminhoes.getAll();
                
                if (viagens.length === 0) {
                    tabelaHistorico.innerHTML = `
                        <tr>
                            <td colspan="7" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                // Ordenar por data (mais recente primeiro)
                viagens.sort((a, b) => new Date(b.data) - new Date(a.data));
                
                // Adicionar linhas
                viagens.forEach(viagem => {
                    const caminhao = DB.veiculosCadastrados.get(viagem.caminhaoId);
                    const tipoTexto = caminhao && caminhao.tipo === 'proprio' ? 'Próprio' : 'Terceiro';
                    const tipoClasse = caminhao && caminhao.tipo === 'proprio' ? 'text-blue-600 dark:text-blue-400' : 'text-green-600 dark:text-green-400';
                    
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${formatarData(viagem.data)}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${viagem.caminhaoId}</td>
                        <td class="px-4 py-3 text-center ${tipoClasse} font-medium">${tipoTexto}</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(viagem.producao)} T</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${viagem.tempoCampo} min</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${viagem.tempoPatio} min</td>
                        <td class="px-4 py-3 text-center">
                            <button class="btn-excluir-viagem px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${viagem.id}" title="Excluir">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tabelaHistorico.appendChild(row);
                });
                
                // Adicionar eventos aos botões
                document.querySelectorAll('.btn-excluir-viagem').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        if (confirm(`Deseja realmente excluir esta viagem?`)) {
                            try {
                                DB.caminhoes.remove(id);
                                mostrarToast(`Viagem excluída com sucesso!`, 'success');
                                atualizarTabelaHistoricoCaminhoes();
                            } catch (error) {
                                mostrarToast(`Erro: ${error.message}`, 'error');
                            }
                        }
                    });
                });
            }
            
            // Tab de estatísticas
            function atualizarEstatisticasCaminhoes() {
                // Obter estatísticas
                const estatsCaminhoes = DB.caminhoes.getStats();
                
                // Atualizar cards
                document.getElementById('estatisticas-total-producao-caminhoes').textContent = `${formatarNumero(estatsCaminhoes.totalProducao)} T`;
                document.getElementById('estatisticas-media-campo').textContent = `${formatarNumero(estatsCaminhoes.mediaTempoCampo, 1)} min`;
                document.getElementById('estatisticas-media-patio').textContent = `${formatarNumero(estatsCaminhoes.mediaTempoPatio, 1)} min`;
                document.getElementById('estatisticas-total-registros-caminhoes').textContent = estatsCaminhoes.totalViagens;
                
                // Estatísticas por tipo
                document.getElementById('estatisticas-producao-proprios').textContent = `${formatarNumero(estatsCaminhoes.proprios.producao)} T`;
                document.getElementById('estatisticas-producao-terceiros').textContent = `${formatarNumero(estatsCaminhoes.terceiros.producao)} T`;
                
                // Gráfico de próprios vs terceiros
                const ctxPT = document.getElementById('estatisticas-chart-proprios-terceiros');
                if (ctxPT) {
                    if (window.chartPropriosTerceiros) window.chartPropriosTerceiros.destroy();
                    
                    window.chartPropriosTerceiros = new Chart(ctxPT, {
                        type: 'doughnut',
                        data: {
                            labels: ['Próprios', 'Terceiros'],
                            datasets: [{
                                data: [estatsCaminhoes.proprios.producao, estatsCaminhoes.terceiros.producao],
                                backgroundColor: [
                                    'rgba(54, 162, 235, 0.7)',
                                    'rgba(75, 192, 192, 0.7)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        color: document.documentElement.classList.contains('dark') ? '#eee' : '#333'
                                    }
                                }
                            }
                        }
                    });
                }
            }
            
            // Botão de exportar estatísticas
            const btnExportEstatisticas = document.getElementById('btn-export-estatisticas');
            if (btnExportEstatisticas) {
                btnExportEstatisticas.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('estatisticas-caminhoes');
                        mostrarToast('Estatísticas exportadas com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao exportar: ${error.message}`, 'error');
                    }
                });
            }
            
            // Carregar dados iniciais
            atualizarTabelaCaminhoes();
            atualizarTabelaHistoricoCaminhoes();
            atualizarEstatisticasCaminhoes();
        }
        
        // Carregar página de consumos
        function carregarPaginaConsumos() {
            // Obter elementos
            const formConsumo = document.getElementById('form-consumo');
            const tipoEquipamento = document.getElementById('consumo-tipo-equipamento');
            const selectEquipamento = document.getElementById('consumo-equipamento');
            
            // Configurar a data atual no campo de data
            const inputDataConsumo = document.getElementById('consumo-data');
            if (inputDataConsumo) {
                const hoje = new Date().toISOString().split('T')[0];
                inputDataConsumo.value = hoje;
            }
            
            // Evento de mudança de tipo de equipamento
            if (tipoEquipamento && selectEquipamento) {
                tipoEquipamento.addEventListener('change', function() {
                    atualizarSelectEquipamentos();
                });
                
                function atualizarSelectEquipamentos() {
                    // Obter tipo selecionado
                    const tipo = tipoEquipamento.value;
                    
                    // Limpar opções existentes (exceto a primeira)
                    while (selectEquipamento.options.length > 1) {
                        selectEquipamento.remove(1);
                    }
                    
                    // Se não tiver tipo selecionado, desabilitar select
                    if (!tipo) {
                        selectEquipamento.disabled = true;
                        return;
                    }
                    
                    // Habilitar select
                    selectEquipamento.disabled = false;
                    
                    // Obter equipamentos baseado no tipo
                    let equipamentos = [];
                    
                    if (tipo === 'colhedora') {
                        equipamentos = DB.colhedoras.getAll();
                    } else if (tipo === 'caminhao') {
                        equipamentos = DB.veiculosCadastrados.getAll();
                    }
                    
                    // Adicionar opções
                    equipamentos.forEach(equip => {
                        const option = document.createElement('option');
                        option.value = equip.id;
                        
                        // Texto da opção varia por tipo
                        if (tipo === 'colhedora') {
                            option.textContent = `${equip.id} - ${equip.marca || ''} ${equip.modelo || ''}`;
                        } else {
                            option.textContent = `${equip.id} - ${equip.placa || ''}`;
                        }
                        
                        selectEquipamento.appendChild(option);
                    });
                }
            }
            
            // Evento de submit do formulário
            if (formConsumo) {
                formConsumo.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Obter valores do formulário
                    const consumo = {
                        data: document.getElementById('consumo-data').value,
                        tipoEquipamento: document.getElementById('consumo-tipo-equipamento').value,
                        equipamentoId: document.getElementById('consumo-equipamento').value,
                        tipoOleo: document.getElementById('consumo-tipo-oleo').value,
                        quantidade: Number(document.getElementById('consumo-quantidade').value),
                        horimetro: Number(document.getElementById('consumo-horimetro').value) || null,
                        observacoes: document.getElementById('consumo-observacoes').value
                    };
                    
                    try {
                        // Adicionar consumo
                        DB.consumos.add(consumo);
                        
                        // Resetar campos exceto data e tipo de equipamento
                        document.getElementById('consumo-tipo-oleo').value = '';
                        document.getElementById('consumo-quantidade').value = '';
                        document.getElementById('consumo-horimetro').value = '';
                        document.getElementById('consumo-observacoes').value = '';
                        
                        // Mostrar mensagem de sucesso
                        mostrarToast('Consumo registrado com sucesso!', 'success');
                        
                        // Atualizar tabela de histórico
                        atualizarTabelaHistoricoConsumo();
                        
                        // Atualizar resumo
                        atualizarResumoConsumo();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
            }
            
            // Botões de filtro de consumo
            const btnAplicarFiltrosConsumo = document.getElementById('btn-aplicar-filtros-consumo');
            const btnLimparFiltrosConsumo = document.getElementById('btn-limpar-filtros-consumo');
            
            if (btnAplicarFiltrosConsumo) {
                btnAplicarFiltrosConsumo.addEventListener('click', function() {
                    atualizarTabelaHistoricoConsumo();
                });
            }
            
            if (btnLimparFiltrosConsumo) {
                btnLimparFiltrosConsumo.addEventListener('click', function() {
                    // Limpar filtros
                    document.getElementById('filtro-consumo-tipo').value = '';
                    document.getElementById('filtro-consumo-equipamento').value = '';
                    document.getElementById('filtro-consumo-data-inicio').value = '';
                    document.getElementById('filtro-consumo-data-fim').value = '';
                    
                    // Atualizar tabela
                    atualizarTabelaHistoricoConsumo();
                });
            }
            
            // Botão de exportar consumo
            const btnExportConsumo = document.getElementById('btn-export-consumo');
            if (btnExportConsumo) {
                btnExportConsumo.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('consumos');
                        mostrarToast('Relatório de consumo gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Função para atualizar tabela de histórico de consumo
            function atualizarTabelaHistoricoConsumo() {
                const tabelaHistorico = document.getElementById('tabela-historico-consumo');
                if (!tabelaHistorico) return;
                
                // Obter valores dos filtros
                const filtroTipo = document.getElementById('filtro-consumo-tipo').value;
                const filtroEquipamento = document.getElementById('filtro-consumo-equipamento').value;
                const filtroDataInicio = document.getElementById('filtro-consumo-data-inicio').value;
                const filtroDataFim = document.getElementById('filtro-consumo-data-fim').value;
                
                // Obter consumos
                let consumos = DB.consumos.getAll();
                
                // Aplicar filtros
                if (filtroTipo) {
                    consumos = consumos.filter(c => c.tipoOleo === filtroTipo);
                }
                
                if (filtroEquipamento) {
                    consumos = consumos.filter(c => c.equipamentoId === filtroEquipamento);
                }
                
                if (filtroDataInicio) {
                    consumos = consumos.filter(c => c.data >= filtroDataInicio);
                }
                
                if (filtroDataFim) {
                    consumos = consumos.filter(c => c.data <= filtroDataFim);
                }
                
                // Ordenar por data (mais recente primeiro)
                consumos.sort((a, b) => new Date(b.data) - new Date(a.data));
                
                // Limpar tabela
                tabelaHistorico.innerHTML = '';
                
                if (consumos.length === 0) {
                    tabelaHistorico.innerHTML = `
                        <tr>
                            <td colspan="6" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                // Adicionar linhas
                consumos.forEach(consumo => {
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    // Formatar tipo de óleo
                    const tipoOleoTexto = consumo.tipoOleo === 'diesel' ? 'Diesel' : 'Hidráulico';
                    const tipoOleoClasse = consumo.tipoOleo === 'diesel' ? 'text-yellow-600 dark:text-yellow-400' : 'text-green-600 dark:text-green-400';
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${formatarData(consumo.data)}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${consumo.equipamentoId}</td>
                        <td class="px-4 py-3 text-center ${tipoOleoClasse} font-medium">${tipoOleoTexto}</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(consumo.quantidade)} L</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${consumo.horimetro ? formatarNumero(consumo.horimetro, 1) : '-'}</td>
                        <td class="px-4 py-3 text-center">
                            <button class="btn-excluir-consumo px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${consumo.id}" title="Excluir">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tabelaHistorico.appendChild(row);
                });
                
                // Adicionar eventos aos botões
                document.querySelectorAll('.btn-excluir-consumo').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        if (confirm(`Deseja realmente excluir este registro de consumo?`)) {
                            try {
                                DB.consumos.remove(id);
                                mostrarToast(`Registro excluído com sucesso!`, 'success');
                                atualizarTabelaHistoricoConsumo();
                                atualizarResumoConsumo();
                            } catch (error) {
                                mostrarToast(`Erro: ${error.message}`, 'error');
                            }
                        }
                    });
                });
            }
            
            // Função para atualizar resumo de consumo
            function atualizarResumoConsumo() {
                // Obter estatísticas
                const statsConsumo = DB.consumos.getStats();
                
                // Atualizar cards
                document.getElementById('resumo-total-diesel').textContent = `${formatarNumero(statsConsumo.totalDiesel)} L`;
                document.getElementById('resumo-total-hidraulico').textContent = `${formatarNumero(statsConsumo.totalHidraulico)} L`;
                document.getElementById('resumo-media-consumo').textContent = `${formatarNumero(statsConsumo.consumoMedioLitroHora)} L/h`;
                document.getElementById('resumo-total-abastecimentos').textContent = statsConsumo.totalRegistros;
            }
            
            // Função para adicionar equipamentos ao filtro
            function preencherFiltroEquipamentos() {
                const filtroEquipamento = document.getElementById('filtro-consumo-equipamento');
                if (!filtroEquipamento) return;
                
                // Limpar opções existentes (exceto a primeira)
                while (filtroEquipamento.options.length > 1) {
                    filtroEquipamento.remove(1);
                }
                
                // Obter todos os equipamentos
                const colhedoras = DB.colhedoras.getAll();
                const caminhoes = DB.veiculosCadastrados.getAll();
                
                // Adicionar colhedoras
                if (colhedoras.length > 0) {
                    const groupColhedoras = document.createElement('optgroup');
                    groupColhedoras.label = 'Colhedoras';
                    
                    colhedoras.forEach(colhedora => {
                        const option = document.createElement('option');
                        option.value = colhedora.id;
                        option.textContent = `${colhedora.id} - ${colhedora.marca || ''} ${colhedora.modelo || ''}`;
                        groupColhedoras.appendChild(option);
                    });
                    
                    filtroEquipamento.appendChild(groupColhedoras);
                }
                
                // Adicionar caminhões
                if (caminhoes.length > 0) {
                    const groupCaminhoes = document.createElement('optgroup');
                    groupCaminhoes.label = 'Caminhões';
                    
                    caminhoes.forEach(caminhao => {
                        const option = document.createElement('option');
                        option.value = caminhao.id;
                        option.textContent = `${caminhao.id} - ${caminhao.placa || ''}`;
                        groupCaminhoes.appendChild(option);
                    });
                    
                    filtroEquipamento.appendChild(groupCaminhoes);
                }
            }
            
            // Botão de histórico de consumo
            const btnExportConsumoHistorico = document.getElementById('btn-export-consumo-historico');
            if (btnExportConsumoHistorico) {
                btnExportConsumoHistorico.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('consumo-historico');
                        mostrarToast('Relatório de histórico de consumo gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Carregar dados iniciais
            atualizarTabelaHistoricoConsumo();
            atualizarResumoConsumo();
            preencherFiltroEquipamentos();
        }
        
        // Carregar página de configurações
        function carregarPaginaConfiguracoes() {
            console.log("Carregando página de configurações...");
            
            // Garantir que o código só execute quando a página estiver carregada
            setTimeout(() => {
                // Botão para exportar todos os dados
                const btnExportarJson = document.getElementById('btn-exportar-json');
                console.log("Botão exportar JSON:", btnExportarJson);
                
                if (btnExportarJson) {
                    btnExportarJson.addEventListener('click', function() {
                        console.log("Botão exportar clicado");
                        try {
                            // Obter todos os dados
                            const dadosJson = DB.exportData();
                            
                            // Criar blob e link para download
                            const blob = new Blob([dadosJson], { type: 'application/json' });
                            const url = URL.createObjectURL(blob);
                            
                            // Criar elemento de link para download
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = `ggomes-log-backup-${new Date().toISOString().split('T')[0]}.json`;
                            document.body.appendChild(a);
                            a.click();
                            
                            // Limpar
                            setTimeout(() => {
                                document.body.removeChild(a);
                                URL.revokeObjectURL(url);
                            }, 100);
                            
                            mostrarToast('Backup exportado com sucesso!', 'success');
                        } catch (error) {
                            console.error("Erro ao exportar:", error);
                            mostrarToast(`Erro ao exportar dados: ${error.message}`, 'error');
                        }
                    });
                }
                
                // Botão para importar dados
                const btnImportarJson = document.getElementById('btn-importar-json');
                const inputImportJson = document.getElementById('import-json-file');
                console.log("Botão importar JSON:", btnImportarJson, "Input file:", inputImportJson);
                
                if (btnImportarJson && inputImportJson) {
                    btnImportarJson.addEventListener('click', function() {
                        console.log("Botão importar clicado");
                        inputImportJson.click();
                    });
                    
                    inputImportJson.addEventListener('change', function(e) {
                        console.log("Arquivo selecionado:", e.target.files);
                        const file = e.target.files[0];
                        if (!file) return;
                        
                        // Verificar se é um arquivo JSON
                        if (file.type !== 'application/json' && !file.name.endsWith('.json')) {
                            mostrarToast('Por favor, selecione um arquivo JSON válido.', 'error');
                            return;
                        }
                        
                        const reader = new FileReader();
                        reader.onload = function(event) {
                            try {
                                const conteudo = event.target.result;
                                console.log("Conteúdo do arquivo lido");
                                
                                // Confirmar importação
                                if (confirm('Esta ação irá sobrescrever todos os dados atuais. Deseja continuar?')) {
                                    // Importar dados
                                    DB.importData(conteudo);
                                    
                                    // Recarregar a página
                                    mostrarToast('Dados importados com sucesso! A página será recarregada.', 'success');
                                    
                                    // Dar tempo para o usuário ver a mensagem
                                    setTimeout(() => {
                                        window.location.reload();
                                    }, 2000);
                                }
                            } catch (error) {
                                console.error("Erro ao importar:", error);
                                mostrarToast(`Erro ao importar dados: ${error.message}`, 'error');
                            }
                            
                            // Limpar input
                            inputImportJson.value = '';
                        };
                        
                        reader.readAsText(file);
                    });
                }
                
                // Botão para limpar dados
                const btnLimparDados = document.getElementById('btn-limpar-dados');
                const modalLimparDados = document.getElementById('modal-limpar-dados');
                const btnCancelarLimpar = document.getElementById('btn-cancelar-limpar');
                const btnConfirmarLimpar = document.getElementById('btn-confirmar-limpar');
                const inputConfirmacao = document.getElementById('confirmacao-texto');
                
                console.log("Elementos limpar dados:", { 
                    btnLimparDados, 
                    modalLimparDados, 
                    btnCancelarLimpar, 
                    btnConfirmarLimpar, 
                    inputConfirmacao 
                });
                
                if (btnLimparDados && modalLimparDados && btnCancelarLimpar && btnConfirmarLimpar && inputConfirmacao) {
                    btnLimparDados.addEventListener('click', function() {
                        console.log("Botão limpar dados clicado");
                        modalLimparDados.classList.remove('hidden');
                        inputConfirmacao.value = '';
                        btnConfirmarLimpar.disabled = true;
                        btnConfirmarLimpar.classList.add('opacity-50', 'cursor-not-allowed');
                    });
                    
                    btnCancelarLimpar.addEventListener('click', function() {
                        console.log("Cancelar limpeza clicado");
                        modalLimparDados.classList.add('hidden');
                    });
                    
                    inputConfirmacao.addEventListener('input', function() {
                        console.log("Input confirmação alterado:", this.value);
                        if (this.value === 'CONFIRMAR') {
                            btnConfirmarLimpar.disabled = false;
                            btnConfirmarLimpar.classList.remove('opacity-50', 'cursor-not-allowed');
                        } else {
                            btnConfirmarLimpar.disabled = true;
                            btnConfirmarLimpar.classList.add('opacity-50', 'cursor-not-allowed');
                        }
                    });
                    
                    btnConfirmarLimpar.addEventListener('click', function() {
                        console.log("Confirmar limpeza clicado");
                        if (inputConfirmacao.value === 'CONFIRMAR') {
                            try {
                                // Limpar dados
                                DB.clearAll();
                                
                                // Fechar modal
                                modalLimparDados.classList.add('hidden');
                                
                                // Mostrar mensagem
                                mostrarToast('Todos os dados foram limpos com sucesso! A página será recarregada.', 'success');
                                
                                // Recarregar a página
                                setTimeout(() => {
                                    window.location.reload();
                                }, 2000);
                            } catch (error) {
                                console.error("Erro ao limpar dados:", error);
                                mostrarToast(`Erro ao limpar dados: ${error.message}`, 'error');
                            }
                        }
                    });
                } else {
                    console.warn("Elementos necessários para limpar dados não encontrados");
                }
                
                // Botões de relatórios
                const btnRelatorioProducao = document.getElementById('btn-relatorio-producao');
                const btnRelatorioColhedoras = document.getElementById('btn-relatorio-colhedoras');
                const btnRelatorioCaminhoes = document.getElementById('btn-relatorio-caminhoes');
                
                console.log("Botões de relatório:", { btnRelatorioProducao, btnRelatorioColhedoras, btnRelatorioCaminhoes });
                
                if (btnRelatorioProducao) {
                    btnRelatorioProducao.addEventListener('click', function() {
                        console.log("Relatório produção clicado");
                        try {
                            gerarRelatorioPDF('producao');
                            mostrarToast('Relatório de produção gerado com sucesso!', 'success');
                        } catch (error) {
                            console.error("Erro ao gerar relatório:", error);
                            mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                        }
                    });
                }
                
                if (btnRelatorioColhedoras) {
                    btnRelatorioColhedoras.addEventListener('click', function() {
                        console.log("Relatório colhedoras clicado");
                        try {
                            gerarRelatorioPDF('colhedoras');
                            mostrarToast('Relatório de colhedoras gerado com sucesso!', 'success');
                        } catch (error) {
                            console.error("Erro ao gerar relatório:", error);
                            mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                        }
                    });
                }
                
                if (btnRelatorioCaminhoes) {
                    btnRelatorioCaminhoes.addEventListener('click', function() {
                        console.log("Relatório caminhões clicado");
                        try {
                            gerarRelatorioPDF('frota');
                            mostrarToast('Relatório de frota gerado com sucesso!', 'success');
                        } catch (error) {
                            console.error("Erro ao gerar relatório:", error);
                            mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                        }
                    });
                }
            }, 500); // Pequeno delay para garantir que os elementos existam
        }
        
        // Função para gerar relatório em PDF
        function gerarRelatorioPDF(tipo) {
            // Verificar se jsPDF está disponível
            if (typeof jspdf === 'undefined' || typeof jspdf.jsPDF === 'undefined') {
                throw new Error('Biblioteca jsPDF não carregada.');
            }
            
            const { jsPDF } = jspdf;
            const { autoTable } = window.jspdf.autoTable;
            
            // Criar PDF com orientação paisagem
            const doc = new jsPDF({
                orientation: 'landscape',
                unit: 'mm',
                format: 'a4'
            });
            
            // Configurações comuns
            const dataAtual = new Date().toLocaleDateString('pt-BR');
            
            // Adicionar título e data ao cabeçalho
            doc.setFontSize(18);
            doc.setTextColor(0, 0, 128);
            
            // Gerar o relatório específico com base no tipo
            switch (tipo) {
                case 'colhedoras':
                    gerarRelatorioColhedoras(doc);
                    break;
                case 'registros':
                    gerarRelatorioRegistros(doc);
                    break;
                case 'producao':
                    gerarRelatorioProducao(doc);
                    break;
                case 'caminhoes':
                    gerarRelatorioCaminhoes(doc);
                    break;
                case 'viagens':
                    gerarRelatorioViagens(doc);
                    break;
                case 'chuvas':
                    gerarRelatorioChuvas(doc);
                    break;
                case 'consumos':
                    gerarRelatorioConsumos(doc);
                    break;
                case 'frota':
                    gerarRelatorioFrota(doc);
                    break;
                default:
                    throw new Error('Tipo de relatório não suportado');
            }
            
            // Função para gerar relatório de colhedoras
            function gerarRelatorioColhedoras(doc) {
                doc.text('Relatório de Colhedoras', 14, 22);
                
                // Adicionar data
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Data de geração: ${dataAtual}`, 14, 30);
                
                // Obter dados
                const colhedoras = DB.colhedoras.getAll();
                
                // Verificar se existem dados
                if (colhedoras.length === 0) {
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Nenhuma colhedora cadastrada.', 14, 40);
                } else {
                    // Preparar dados para a tabela
                    const tableData = colhedoras.map(c => [
                        c.id,
                        c.marca || '-',
                        c.modelo || '-',
                        c.ano || '-',
                        c.observacoes || '-'
                    ]);
                    
                    // Adicionar tabela
                    autoTable(doc, {
                        startY: 40,
                        head: [['ID', 'Marca', 'Modelo', 'Ano', 'Observações']],
                        body: tableData,
                        theme: 'grid',
                        headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                    });
                }
                
                // Salvar o PDF
                doc.save(`relatorio-colhedoras-${new Date().toISOString().split('T')[0]}.pdf`);
            }
            
            // Função para gerar relatório de registros
            function gerarRelatorioRegistros(doc) {
                doc.text('Histórico de Produção', 14, 22);
                
                // Adicionar data
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Data de geração: ${dataAtual}`, 14, 30);
                
                // Obter dados
                const registros = DB.registros.getAll();
                
                // Verificar se existem dados
                if (registros.length === 0) {
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Nenhum registro encontrado.', 14, 40);
                } else {
                    // Ordenar por data (mais recente primeiro)
                    registros.sort((a, b) => new Date(b.data) - new Date(a.data));
                    
                    // Preparar dados para a tabela
                    const tableData = registros.map(r => {
                        // Calcular rendimento
                        const rendimento = Number(r.horas) > 0 ? Number(r.quantidade) / Number(r.horas) : 0;
                        
                        return [
                            formatarData(r.data),
                            r.colhedoraId,
                            r.cultura || '-',
                            formatarNumero(r.quantidade) + ' T',
                            formatarNumero(r.horas),
                            formatarNumero(rendimento) + ' T/h'
                        ];
                    });
                    
                    // Adicionar tabela
                    autoTable(doc, {
                        startY: 40,
                        head: [['Data', 'Colhedora', 'Cultura', 'Quantidade', 'Horas', 'Rendimento']],
                        body: tableData,
                        theme: 'grid',
                        headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                    });
                }
                
                // Salvar o PDF
                doc.save(`historico-producao-${new Date().toISOString().split('T')[0]}.pdf`);
            }
            
            // Função para gerar relatório de produção
            function gerarRelatorioProducao(doc) {
                doc.text('Relatório de Produção', 14, 22);
                
                // Adicionar data
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Data de geração: ${dataAtual}`, 14, 30);
                
                // Obter dados
                const registros = DB.registros.getAll();
                const estatisticasEquipamentos = DB.registros.getEquipmentStats();
                
                // Verificar se existem dados
                if (registros.length === 0) {
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Nenhum registro de produção encontrado.', 14, 40);
                    doc.save(`relatorio-producao-${new Date().toISOString().split('T')[0]}.pdf`);
                    return;
                }
                
                // Calcular estatísticas gerais
                const totalColhido = registros.reduce((total, r) => total + Number(r.quantidade || 0), 0);
                const totalHoras = registros.reduce((total, r) => total + Number(r.horas || 0), 0);
                const rendimentoMedio = totalHoras > 0 ? totalColhido / totalHoras : 0;
                
                // Mostrar estatísticas gerais
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Total Colhido: ${formatarNumero(totalColhido)} T`, 14, 40);
                doc.text(`Rendimento Médio: ${formatarNumero(rendimentoMedio)} T/h`, 14, 47);
                doc.text(`Total de Registros: ${registros.length}`, 14, 54);
                
                // Ordenar estatísticas por rendimento
                const estatisticasOrdenadas = [...estatisticasEquipamentos].sort((a, b) => b.rendimento - a.rendimento);
                
                // Preparar dados para a tabela de rendimento por colhedora
                const tableData = estatisticasOrdenadas.map(e => {
                    const colhedora = DB.colhedoras.get(e.id);
                    const nome = colhedora ? `${e.id} - ${colhedora.marca || ''} ${colhedora.modelo || ''}` : e.id;
                    
                    return [
                        nome,
                        formatarNumero(e.quantidade) + ' T',
                        formatarNumero(e.horas),
                        formatarNumero(e.rendimento) + ' T/h'
                    ];
                });
                
                // Adicionar tabela de rendimento
                doc.setFontSize(14);
                doc.setTextColor(0, 0, 128);
                doc.text('Rendimento por Colhedora', 14, 65);
                
                autoTable(doc, {
                    startY: 70,
                    head: [['Colhedora', 'Quantidade', 'Horas', 'Rendimento']],
                    body: tableData,
                    theme: 'grid',
                    headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                });
                
                // Adicionar tabela de produção por cultura
                const culturaStats = DB.registros.getCultureStats();
                
                if (culturaStats.length > 0) {
                    // Ordenar por quantidade
                    const culturasOrdenadas = [...culturaStats].sort((a, b) => b.quantidade - a.quantidade);
                    
                    // Preparar dados para a tabela
                    const tableCultura = culturasOrdenadas.map(c => [
                        c.cultura,
                        formatarNumero(c.quantidade) + ' T',
                        formatarNumero(c.horas),
                        formatarNumero(c.rendimento) + ' T/h'
                    ]);
                    
                    // Adicionar tabela
                    const finalY = doc.lastAutoTable.finalY || 150;
                    
                    doc.setFontSize(14);
                    doc.setTextColor(0, 0, 128);
                    doc.text('Produção por Cultura', 14, finalY + 15);
                    
                    autoTable(doc, {
                        startY: finalY + 20,
                        head: [['Cultura', 'Quantidade', 'Horas', 'Rendimento']],
                        body: tableCultura,
                        theme: 'grid',
                        headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                    });
                }
                
                // Salvar o PDF
                doc.save(`relatorio-producao-${new Date().toISOString().split('T')[0]}.pdf`);
            }
            
            // Função para gerar relatório de caminhões
            function gerarRelatorioCaminhoes(doc) {
                doc.text('Relatório de Caminhões', 14, 22);
                
                // Adicionar data
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Data de geração: ${dataAtual}`, 14, 30);
                
                // Obter dados
                const caminhoes = DB.veiculosCadastrados.getAll();
                
                // Verificar se existem dados
                if (caminhoes.length === 0) {
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Nenhum caminhão cadastrado.', 14, 40);
                } else {
                    // Preparar dados para a tabela
                    const tableData = caminhoes.map(c => [
                        c.id,
                        c.placa || '-',
                        c.modelo || '-',
                        c.tipo === 'proprio' ? 'Próprio' : 'Terceiro',
                        c.capacidade ? `${formatarNumero(c.capacidade)} T` : '-',
                        c.motorista || '-'
                    ]);
                    
                    // Adicionar tabela
                    autoTable(doc, {
                        startY: 40,
                        head: [['ID', 'Placa', 'Modelo', 'Tipo', 'Capacidade', 'Motorista']],
                        body: tableData,
                        theme: 'grid',
                        headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                    });
                }
                
                // Salvar o PDF
                doc.save(`relatorio-caminhoes-${new Date().toISOString().split('T')[0]}.pdf`);
            }
            
            // Função para gerar relatório de viagens
            function gerarRelatorioViagens(doc) {
                doc.text('Relatório de Viagens', 14, 22);
                
                // Adicionar data
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Data de geração: ${dataAtual}`, 14, 30);
                
                // Obter dados
                const viagens = DB.caminhoes.getAll();
                
                // Verificar se existem dados
                if (viagens.length === 0) {
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Nenhuma viagem registrada.', 14, 40);
                } else {
                    // Ordenar por data (mais recente primeiro)
                    viagens.sort((a, b) => new Date(b.data) - new Date(a.data));
                    
                    // Preparar dados para a tabela
                    const tableData = viagens.map(v => {
                        const caminhao = DB.veiculosCadastrados.get(v.caminhaoId);
                        const tipo = caminhao ? (caminhao.tipo === 'proprio' ? 'Próprio' : 'Terceiro') : 'Desconhecido';
                        
                        return [
                            formatarData(v.data),
                            v.caminhaoId,
                            tipo,
                            v.cultura || '-',
                            formatarNumero(v.producao) + ' T',
                            v.tempoCampo + ' min',
                            v.tempoPatio + ' min'
                        ];
                    });
                    
                    // Adicionar tabela
                    autoTable(doc, {
                        startY: 40,
                        head: [['Data', 'Caminhão', 'Tipo', 'Cultura', 'Produção', 'Tempo Campo', 'Tempo Pátio']],
                        body: tableData,
                        theme: 'grid',
                        headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                    });
                }
                
                // Salvar o PDF
                doc.save(`relatorio-viagens-${new Date().toISOString().split('T')[0]}.pdf`);
            }
            
            // Função para gerar relatório de chuvas
            function gerarRelatorioChuvas(doc) {
                doc.text('Relatório de Paradas por Chuva', 14, 22);
                
                // Adicionar data
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Data de geração: ${dataAtual}`, 14, 30);
                
                // Obter dados
                const chuvas = DB.chuvas.getAll();
                const totalDias = DB.chuvas.getTotalDias();
                const impactoEstimado = DB.chuvas.calcularImpactoEstimado();
                
                // Mostrar estatísticas gerais
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Total de Dias Parados: ${formatarNumero(totalDias, 1)} dias`, 14, 40);
                doc.text(`Impacto Estimado: ${formatarNumero(impactoEstimado)} T`, 14, 47);
                doc.text(`Total de Registros: ${chuvas.length}`, 14, 54);
                
                // Verificar se existem dados
                if (chuvas.length === 0) {
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Nenhum registro de chuva encontrado.', 14, 65);
                } else {
                    // Ordenar por data (mais recente primeiro)
                    chuvas.sort((a, b) => new Date(b.dataFim) - new Date(a.dataFim));
                    
                    // Preparar dados para a tabela
                    const tableData = chuvas.map(c => {
                        let intensidade = 'Média';
                        if (c.intensidade === 'baixa') intensidade = 'Baixa';
                        if (c.intensidade === 'alta') intensidade = 'Alta';
                        
                        return [
                            formatarData(c.dataInicio),
                            formatarData(c.dataFim),
                            formatarNumero(c.dias, 1) + ' dias',
                            intensidade,
                            c.observacoes || '-'
                        ];
                    });
                    
                    // Adicionar tabela
                    autoTable(doc, {
                        startY: 65,
                        head: [['Data Início', 'Data Fim', 'Dias', 'Intensidade', 'Observações']],
                        body: tableData,
                        theme: 'grid',
                        headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                    });
                }
                
                // Salvar o PDF
                doc.save(`relatorio-chuvas-${new Date().toISOString().split('T')[0]}.pdf`);
            }
            
            // Função para gerar relatório de consumos
            function gerarRelatorioConsumos(doc) {
                doc.text('Relatório de Consumo de Óleos', 14, 22);
                
                // Adicionar data
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Data de geração: ${dataAtual}`, 14, 30);
                
                // Obter dados
                const consumos = DB.consumos.getAll();
                const statsConsumo = DB.consumos.getStats();
                
                // Mostrar estatísticas gerais
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Total Diesel: ${formatarNumero(statsConsumo.totalDiesel)} L`, 14, 40);
                doc.text(`Total Hidráulico: ${formatarNumero(statsConsumo.totalHidraulico)} L`, 14, 47);
                doc.text(`Consumo Médio: ${formatarNumero(statsConsumo.consumoMedioLitroHora)} L/h`, 14, 54);
                doc.text(`Total de Registros: ${statsConsumo.totalRegistros}`, 14, 61);
                
                // Verificar se existem dados
                if (consumos.length === 0) {
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Nenhum registro de consumo encontrado.', 14, 72);
                } else {
                    // Ordenar por data (mais recente primeiro)
                    consumos.sort((a, b) => new Date(b.data) - new Date(a.data));
                    
                    // Preparar dados para a tabela
                    const tableData = consumos.map(c => [
                        formatarData(c.data),
                        c.equipamentoId,
                        c.tipoEquipamento === 'colhedora' ? 'Colhedora' : 'Caminhão',
                        c.tipoOleo === 'diesel' ? 'Diesel' : 'Hidráulico',
                        formatarNumero(c.quantidade) + ' L',
                        c.horimetro ? formatarNumero(c.horimetro, 1) : '-'
                    ]);
                    
                    // Adicionar tabela
                    autoTable(doc, {
                        startY: 72,
                        head: [['Data', 'Equipamento', 'Tipo Equip.', 'Tipo Óleo', 'Quantidade', 'Horímetro']],
                        body: tableData,
                        theme: 'grid',
                        headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                    });
                }
                
                // Salvar o PDF
                doc.save(`relatorio-consumos-${new Date().toISOString().split('T')[0]}.pdf`);
            }
            
            // Função para gerar relatório da frota
            function gerarRelatorioFrota(doc) {
                doc.text('Relatório de Frota', 14, 22);
                
                // Adicionar data
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Data de geração: ${dataAtual}`, 14, 30);
                
                // Obter dados
                const caminhoes = DB.veiculosCadastrados.getAll();
                const viagens = DB.caminhoes.getAll();
                const estatsCaminhoes = DB.caminhoes.getStats();
                
                // Mostrar estatísticas gerais
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Total de Caminhões: ${caminhoes.length}`, 14, 40);
                doc.text(`Produção Transportada: ${formatarNumero(estatsCaminhoes.totalProducao)} T`, 14, 47);
                doc.text(`Tempo Médio de Campo: ${formatarNumero(estatsCaminhoes.mediaTempoCampo, 1)} min`, 14, 54);
                doc.text(`Tempo Médio de Pátio: ${formatarNumero(estatsCaminhoes.mediaTempoPatio, 1)} min`, 14, 61);
                
                // Comparativo próprios vs terceiros
                doc.setFontSize(14);
                doc.setTextColor(0, 0, 128);
                doc.text('Comparativo: Próprios vs Terceiros', 14, 72);
                
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Produção Próprios: ${formatarNumero(estatsCaminhoes.proprios.producao)} T`, 14, 80);
                doc.text(`Produção Terceiros: ${formatarNumero(estatsCaminhoes.terceiros.producao)} T`, 14, 87);
                doc.text(`Viagens Próprios: ${estatsCaminhoes.proprios.viagens}`, 14, 94);
                doc.text(`Viagens Terceiros: ${estatsCaminhoes.terceiros.viagens}`, 14, 101);
                
                // Adicionar tabela de caminhões
                if (caminhoes.length > 0) {
                    // Preparar dados para a tabela
                    const tableData = caminhoes.map(c => [
                        c.id,
                        c.placa || '-',
                        c.tipo === 'proprio' ? 'Próprio' : 'Terceiro',
                        c.modelo || '-',
                        c.capacidade ? `${formatarNumero(c.capacidade)} T` : '-'
                    ]);
                    
                    // Adicionar tabela
                    doc.setFontSize(14);
                    doc.setTextColor(0, 0, 128);
                    doc.text('Lista de Caminhões', 14, 112);
                    
                    autoTable(doc, {
                        startY: 117,
                        head: [['ID', 'Placa', 'Tipo', 'Modelo', 'Capacidade']],
                        body: tableData,
                        theme: 'grid',
                        headStyles: { fillColor: [93, 92, 222], textColor: 255 }
                    });
                }
                
                // Salvar o PDF
                doc.save(`relatorio-frota-${new Date().toISOString().split('T')[0]}.pdf`);
            }
        }
        
        // Inicializar quando o DOM estiver pronto
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar banco de dados
            DB.init();
            
            // Verificar e criar notificação inicial
            criarNotificacaoInicial();
            
            // Configurar tema
            configurarTema();
            
            // Atualizar data atual
            atualizarDataAtual();
            
            // Dados meteorológicos simulados
            carregarDadosMeteorologicos();
            
            // Carregar notificações
            atualizarContadorNotificacoes();
            
            // Inicializar navegação
            configurarNavegacao();
            
            // Configurar painel de notificações
            configurarPainelNotificacoes();
            
            // Carregar todas as páginas
            carregarDadosDashboard();
            carregarPaginaColhedoras();
            carregarPaginaRegistros();
            carregarPaginaHistorico();
            carregarPaginaChuvas();
            carregarPaginaCaminhoes();
            carregarPaginaConsumos();
            carregarPaginaConfiguracoes();
            
            // Atualizar dados meteorológicos a cada 5 minutos
            setInterval(carregarDadosMeteorologicos, 5 * 60 * 1000);
            
            // Atualizar data atual a cada minuto
            setInterval(atualizarDataAtual, 60 * 1000);
            
            // Mostrar mensagem inicial
            mostrarToast('Sistema inicializado com sucesso!', 'success');
        });
    </script>
</body>
</html>
