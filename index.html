<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GGOMES-LOG | Sistema de Gestão Agrícola</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- jsPDF para relatórios -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/jspdf-autotable@3.5.28/dist/jspdf.plugin.autotable.js"></script>
    
    <script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: {
                    primary: {
                        50: '#f4f3ff',
                        100: '#e9e8ff',
                        200: '#d7d5ff',
                        300: '#bab8ff',
                        400: '#9a97ff',
                        500: '#7c7aff',
                        600: '#5D5CDE', // Cor principal 
                        700: '#5a55cc',
                        800: '#4a46a8',
                        900: '#383670',
                        950: '#201f45',
                    }
                },
                fontFamily: {
                    'sans': ['Inter', 'sans-serif'],
                },
                spacing: {
                    '128': '32rem',
                },
            }
        }
    }
    </script>
    
    <style>
        /* Animações para ícones meteorológicos */
        .icon-sun {
            animation: pulse 2s infinite;
        }
        
        .icon-rain {
            animation: bounce 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        
        /* Esconder scrollbar mas manter funcionalidade */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Transições suaves */
        .page-transition {
            transition: all 0.3s ease-in-out;
        }
        
        /* Tabs do dashboard */
        .dashboard-tab {
            transition: all 0.2s ease-in-out;
        }
        
        .tab-active {
            border-bottom: 2px solid #5D5CDE;
            color: #5D5CDE;
        }
        
        .dark .tab-active {
            border-bottom: 2px solid #7c7aff;
            color: #7c7aff;
        }
        
        /* Animação de fade-in para toasts */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">
    <!-- Container principal da aplicação -->
    <div id="app-container" class="flex h-screen overflow-hidden">
        <!-- Menu lateral (Sidebar) -->
        <aside class="w-64 hidden md:block bg-white dark:bg-gray-800 shadow-md z-10 flex-shrink-0">
            <div class="h-full flex flex-col">
                <!-- Logo e título -->
                <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-center">
                    <h1 class="text-xl font-bold text-primary-600 dark:text-primary-400">GGOMES-LOG</h1>
                </div>
                
                <!-- Informações do usuário -->
                <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                    <div class="flex items-center">
                        <div class="h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center">
                            <i class="fas fa-user text-primary-600 dark:text-primary-400"></i>
                        </div>
                        <div class="ml-3">
                            <p id="sidebar-user-name" class="font-medium text-gray-800 dark:text-white">Administrador</p>
                            <p id="sidebar-user-role" class="text-xs text-gray-500 dark:text-gray-400">Administrador</p>
                        </div>
                    </div>
                </div>
                
                <!-- Links de navegação -->
                <div class="py-4 flex-1 overflow-y-auto scrollbar-hide">
                    <nav class="px-2 space-y-1">
                        <a href="#dashboard" class="sidebar-link active bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 flex items-center px-4 py-2 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-tachometer-alt mr-3 text-lg"></i>
                            <span>Dashboard</span>
                        </a>
                        
                        <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Produção
                        </div>
                        
                        <a href="#colhedoras" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-tractor mr-3 text-lg"></i>
                            <span>Colhedoras</span>
                        </a>
                        
                        <a href="#registros" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-file-alt mr-3 text-lg"></i>
                            <span>Registrar Produção</span>
                        </a>
                        
                        <a href="#historico" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-history mr-3 text-lg"></i>
                            <span>Histórico</span>
                        </a>
                        
                        <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Clima e Paradas
                        </div>
                        
                        <a href="#chuvas" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-cloud-rain mr-3 text-lg"></i>
                            <span>Registro de Chuvas</span>
                        </a>
                        
                        <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Logística
                        </div>
                        
                        <a href="#caminhoes" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-truck mr-3 text-lg"></i>
                            <span>Caminhões</span>
                        </a>
                        
                        <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Sistema
                        </div>
                        
                        <a href="#configuracoes" class="sidebar-link flex items-center px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md font-medium mb-1 transition-colors">
                            <i class="fas fa-cog mr-3 text-lg"></i>
                            <span>Configurações</span>
                        </a>
                    </nav>
                </div>
                
                <!-- Rodapé do sidebar -->
                <div class="p-4 border-t border-gray-200 dark:border-gray-700 text-center">
                    <p class="text-xs text-gray-500 dark:text-gray-400">GGOMES-LOG &copy; 2023</p>
                    <p class="text-xs text-gray-500 dark:text-gray-400">Versão 1.0</p>
                </div>
            </div>
        </aside>
        
        <!-- Conteúdo principal -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Barra superior (Header) -->
            <header class="bg-white dark:bg-gray-800 shadow-sm z-10">
                <div class="flex items-center justify-between px-4 py-2 border-b border-gray-200 dark:border-gray-700">
                    <!-- Toggle do menu lateral (mobile) -->
                    <button id="mobile-menu-toggle" class="md:hidden p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700">
                        <i class="fas fa-bars"></i>
                    </button>
                    
                    <!-- Informações rápidas -->
                    <div class="hidden md:flex items-center space-x-4">
                        <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded-md">
                            <div class="flex items-center">
                                <div class="flex items-center">
                                    <i class="fas fa-weight-hanging text-blue-500 mr-2"></i>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">Total Colhido</span>
                                </div>
                                <div class="ml-2">
                                    <span id="quick-total-colhido" class="font-semibold text-gray-800 dark:text-white">0 T</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded-md">
                            <div class="flex items-center">
                                <div class="flex items-center">
                                    <i class="fas fa-tractor text-yellow-500 mr-2"></i>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">Colhedoras</span>
                                </div>
                                <div class="ml-2">
                                    <span id="quick-colhedoras" class="font-semibold text-gray-800 dark:text-white">0</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gray-100 dark:bg-gray-700 p-2 rounded-md">
                            <div class="flex items-center">
                                <div class="flex items-center">
                                    <i class="fas fa-cloud-rain text-red-500 mr-2"></i>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">Paradas</span>
                                </div>
                                <div class="ml-2">
                                    <span id="quick-paradas-chuva" class="font-semibold text-gray-800 dark:text-white">0 dias</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ações e perfil do usuário -->
                    <div class="flex items-center space-x-3">
                        <!-- Informações meteorológicas -->
                        <div class="hidden sm:flex items-center mr-2 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-md">
                            <i id="weather-icon" class="text-blue-500 mr-2"></i>
                            <span id="weather-temp" class="text-sm font-medium text-gray-700 dark:text-gray-300">--°C</span>
                        </div>
                        
                        <!-- Data atual -->
                        <div class="hidden sm:block mr-2">
                            <span id="current-date" class="text-sm text-gray-600 dark:text-gray-400">--/--/----</span>
                        </div>
                        
                        <!-- Toggle de tema claro/escuro -->
                        <button id="toggle-theme" class="p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700">
                            <i class="fas fa-moon dark:hidden"></i>
                            <i class="fas fa-sun hidden dark:inline-block"></i>
                        </button>
                        
                        <!-- Ícone de notificações -->
                        <button id="btn-notifications" class="p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:bg-gray-700 relative">
                            <i class="fas fa-bell"></i>
                            <span id="notification-badge" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                        </button>
                        
                        <!-- Perfil do usuário -->
                        <div class="flex items-center">
                            <div class="mr-2 text-right hidden sm:block">
                                <div id="user-name" class="text-sm font-medium text-gray-800 dark:text-white">Administrador</div>
                                <div class="flex items-center">
                                    <span id="user-role-badge" class="px-2 py-1 rounded text-xs font-medium bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300">Admin</span>
                                </div>
                            </div>
                            <div class="h-8 w-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center">
                                <i class="fas fa-user text-primary-600 dark:text-primary-400"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Conteúdo principal -->
            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 dark:bg-gray-900 p-4">
                <!-- Toast container para mensagens -->
                <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-4"></div>
                
                <!-- Conteúdo do dashboard -->
                <div id="content-dashboard" class="content">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Dashboard</h2>
                        <p class="text-gray-600 dark:text-gray-400">Resumo da operação e indicadores de desempenho</p>
                    </div>
                    
                    <!-- Tabs do dashboard -->
                    <div class="border-b border-gray-200 dark:border-gray-700 mb-4">
                        <div class="flex overflow-x-auto scrollbar-hide">
                            <button data-tab="producao" class="dashboard-tab tab-active px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Produção e Produtividade
                            </button>
                            <button data-tab="caminhoes" class="dashboard-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Caminhões e Logística
                            </button>
                            <button data-tab="chuvas" class="dashboard-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Paradas por Chuva
                            </button>
                            <button data-tab="estatisticas" class="dashboard-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Estatísticas Gerais
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filtro de período -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <div class="flex flex-wrap items-center">
                            <div class="w-full md:w-auto mr-4 mb-2 md:mb-0">
                                <label for="dashboard-period" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Período:</label>
                                <select id="dashboard-period" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    <option value="7">Últimos 7 dias</option>
                                    <option value="15">Últimos 15 dias</option>
                                    <option value="30" selected>Últimos 30 dias</option>
                                    <option value="90">Últimos 90 dias</option>
                                    <option value="180">Últimos 6 meses</option>
                                    <option value="365">Último ano</option>
                                    <option value="0">Todo o período</option>
                                </select>
                            </div>
                            <div class="w-full md:w-auto">
                                <button id="refresh-dashboard" class="mt-5 inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-sync-alt mr-2"></i> Atualizar Dashboard
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Produção e Produtividade" -->
                    <div id="tab-producao" class="dashboard-tab-content">
                        <!-- Produção do Dia (Nova seção) -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Produção do Dia</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div id="card-producao-hoje" class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Colhido Hoje</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="producao-hoje-total" class="text-2xl font-bold text-blue-600 dark:text-blue-400">0 T</span>
                                    </div>
                                </div>
                                
                                <div id="card-produtividade-hoje" class="bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg">
                                    <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Média Hora Hoje</h4>
                                    <div class="flex items-baseline mt-1">
                                        <span id="producao-hoje-hora" class="text-2xl font-bold text-purple-600 dark:text-purple-400">0 T/h</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Cards de indicadores -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Total colhido -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Colhido</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-total-colhido" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-weight-hanging text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div id="dash-total-trend" class="text-xs text-gray-500 dark:text-gray-400">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                        <div id="dash-total-progress" class="bg-green-500 h-1.5 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Média Geral -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média Geral</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-media-geral" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T/dia</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-calculator text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div id="dash-media-trend" class="text-xs text-gray-500 dark:text-gray-400">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                        <div id="dash-media-progress" class="bg-green-500 h-1.5 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Média do Dia -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média do Dia</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-media-dia" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T/dia</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-calendar-day text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div id="dash-media-dia-trend" class="text-xs text-gray-500 dark:text-gray-400">
                                        <i class="fas fa-arrow-up mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                        <div id="dash-media-dia-progress" class="bg-green-500 h-1.5 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Paradas por chuva -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Paradas por Chuva</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="dash-paradas-chuva" class="text-2xl font-semibold text-gray-900 dark:text-white">0 dias</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-cloud-rain text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div id="dash-paradas-trend" class="text-xs text-gray-500 dark:text-gray-400">
                                        <i class="fas fa-arrow-down mr-1 text-green-500"></i>
                                        <span>0% vs. período anterior</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                        <div id="dash-paradas-progress" class="bg-red-500 h-1.5 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Relatório de Médias de Equipamentos -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <div class="flex justify-between mb-3">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Relatório de Médias dos Equipamentos</h3>
                                <button class="btn-exportar-equipamentos inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                    <i class="fas fa-file-export mr-1"></i> Exportar
                                </button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Colhedora</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Média Diária (T/dia)</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Rendimento (T/h)</th>
                                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Eficiência</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tabela-medias-equipamentos" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <!-- Dados serão preenchidos via JavaScript -->
                                        <tr>
                                            <td colspan="4" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                Carregando dados...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Seção de desempenho -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                            <!-- Melhores colhedoras -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Melhores Colhedoras</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Melhor Rendimento</p>
                                            <p id="best-yield-colhedora" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-yield-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T/h</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Maior Volume</p>
                                            <p id="best-volume-colhedora" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-volume-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Média Diária</p>
                                            <p id="best-daily-colhedora" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-daily-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T/dia</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Melhores culturas -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Desempenho por Cultura</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Melhor Rendimento</p>
                                            <p id="best-yield-cultura" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-yield-cultura-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T/h</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Maior Volume</p>
                                            <p id="best-volume-cultura" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-volume-cultura-value" class="text-sm font-semibold text-green-600 dark:text-green-400">0 T</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <p class="text-sm text-gray-500 dark:text-gray-400">Média Diária</p>
                                            <p id="best-daily-cultura" class="font-medium text-gray-800 dark:text-white">-</p>
                                        </div>
                                        <div class="flex items-center">
                                            <span id="best-daily-cultura-value" class="text-sm font-semibold text-blue-600 dark:text-blue-400">0 T/dia</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Distribuição por cultura -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Distribuição por Cultura</h3>
                                <div class="h-48">
                                    <canvas id="chart-culturas"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráficos principais -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Comparativo de colhedoras -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Comparativo de Colhedoras</h3>
                                <div class="h-64">
                                    <canvas id="chart-colhedoras-comparacao"></canvas>
                                </div>
                            </div>
                            
                            <!-- Produção ao longo do tempo -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Produção ao Longo do Tempo</h3>
                                <div class="h-64">
                                    <canvas id="chart-producao-tempo"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Caminhões e Logística" -->
                    <div id="tab-caminhoes" class="dashboard-tab-content hidden">
                        <!-- Conteúdo de Caminhões e Logística -->
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Estatísticas de Caminhões</h3>
                        <p class="text-gray-600 dark:text-gray-400 mb-4">Resumo do desempenho da frota de caminhões.</p>
                        
                        <!-- Cards de indicadores -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Produção total -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Produção Total</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="total-producao-caminhoes" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-weight-hanging text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Média tempo de campo -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média Tempo Campo</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="media-campo" class="text-2xl font-semibold text-gray-900 dark:text-white">0 min</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-tractor text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Média tempo de pátio -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média Tempo Pátio</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="media-patio" class="text-2xl font-semibold text-gray-900 dark:text-white">0 min</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-warehouse text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Total de registros -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Viagens</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="total-registros-caminhoes" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-route text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráfico de distribuição próprios vs terceiros -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                            <!-- Card de frota própria -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Frota Própria</h3>
                                
                                <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700 mb-2">
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Produção Total</p>
                                    </div>
                                    <div class="flex items-center">
                                        <span id="producao-proprios" class="text-lg font-semibold text-blue-600 dark:text-blue-400">0 T</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Card de frota terceirizada -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Frota Terceirizada</h3>
                                
                                <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700 mb-2">
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Produção Total</p>
                                    </div>
                                    <div class="flex items-center">
                                        <span id="producao-terceiros" class="text-lg font-semibold text-green-600 dark:text-green-400">0 T</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gráfico de distribuição -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Distribuição de Produção</h3>
                                <div class="h-48">
                                    <canvas id="chart-proprios-terceiros"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Paradas por Chuva" -->
                    <div id="tab-chuvas" class="dashboard-tab-content hidden">
                        <!-- Conteúdo de Paradas por Chuva -->
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Registros de Chuvas</h3>
                        <p class="text-gray-600 dark:text-gray-400 mb-4">Análise de impactos causados por paradas devido a chuvas.</p>
                        
                        <!-- Cards de indicadores -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Total de registros -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Registros de Chuva</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="chuva-total-registros" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-file-alt text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Total de dias parados -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Dias Parados</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="chuva-total-dias" class="text-2xl font-semibold text-gray-900 dark:text-white">0 dias</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-pause-circle text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Última parada -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Última Parada</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="chuva-ultima-parada" class="text-2xl font-semibold text-gray-900 dark:text-white">-</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-calendar-alt text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Impacto estimado -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Impacto Estimado</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="chuva-impacto-estimado" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-chart-line text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Seção de filtros -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <div class="flex flex-wrap items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Dias Parados por Período</h3>
                                
                                <div class="flex items-center space-x-2">
                                    <div>
                                        <label for="paradas-period" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Período:</label>
                                        <select id="paradas-period" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                            <option value="3">Últimos 3 meses</option>
                                            <option value="6" selected>Últimos 6 meses</option>
                                            <option value="12">Último ano</option>
                                            <option value="0">Todo o período</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráfico de chuvas -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Paradas por Evento</h3>
                            <div class="h-64">
                                <canvas id="chart-paradas-chuva"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Estatísticas Gerais" -->
                    <div id="tab-estatisticas" class="dashboard-tab-content hidden">
                        <!-- Estatísticas gerais do sistema -->
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Estatísticas Gerais</h3>
                        <p class="text-gray-600 dark:text-gray-400 mb-4">Panorama geral do sistema e seus dados.</p>
                        
                        <!-- Cards de estatísticas gerais -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                            <!-- Colhedoras cadastradas -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Colhedoras Cadastradas</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="qtd-colhedoras" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-tractor text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Registros de produção -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Registros de Produção</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="qtd-registros" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-file-alt text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Usuários do sistema -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Usuários do Sistema</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="qtd-usuarios" class="text-2xl font-semibold text-gray-900 dark:text-white">1</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-users text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Status do sistema -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Status do Sistema</h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <div class="mb-4">
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Armazenamento (Local Storage)</span>
                                            <span class="text-sm text-gray-700 dark:text-gray-300" id="storage-percentage">0%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                                            <div class="bg-primary-600 h-2.5 rounded-full" id="storage-progress" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Último Acesso</span>
                                            <span class="text-sm text-gray-700 dark:text-gray-300" id="ultimo-acesso">--/--/----</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="mb-4">
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Versão do Sistema</span>
                                            <span class="text-sm text-gray-700 dark:text-gray-300">1.0.0</span>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Navegador</span>
                                            <span class="text-sm text-gray-700 dark:text-gray-300" id="browser-info">-</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Colhedoras -->
                <div id="content-colhedoras" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Colhedoras</h2>
                        <p class="text-gray-600 dark:text-gray-400">Gerenciamento e cadastro de equipamentos</p>
                    </div>
                    
                    <!-- Grid de conteúdo -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Formulário de cadastro -->
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Cadastro de Colhedora</h3>
                                
                                <form id="form-colhedora">
                                    <div class="mb-4">
                                        <label for="colhedora-id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Identificador</label>
                                        <input type="text" id="colhedora-id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: COL-001" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="colhedora-modelo" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Modelo</label>
                                        <input type="text" id="colhedora-modelo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 9670 STS">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="colhedora-marca" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Marca</label>
                                        <input type="text" id="colhedora-marca" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: John Deere">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="colhedora-ano" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Ano</label>
                                        <input type="number" id="colhedora-ano" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 2021">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="colhedora-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="colhedora-observacoes" rows="3" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                    
                                    <div class="flex items-center space-x-2">
                                        <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-save mr-2"></i> Salvar Colhedora
                                        </button>
                                        <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-times mr-2"></i> Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Lista de colhedoras -->
                        <div class="lg:col-span-2">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Colhedoras Cadastradas</h3>
                                    <div class="flex space-x-2">
                                        <button id="btn-export-colhedoras" class="inline-flex items-center px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-file-export mr-1"></i> Exportar
                                        </button>
                                        <button id="btn-add-colhedora" class="inline-flex items-center px-3 py-1.5 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-plus mr-1"></i> Nova
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Identificação</th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Marca</th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ano</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-colhedoras-lista" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Dados serão preenchidos via JavaScript -->
                                            <tr>
                                                <td colspan="4" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                    Carregando colhedoras...
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Registros de Produção -->
                <div id="content-registros" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Registrar Produção</h2>
                        <p class="text-gray-600 dark:text-gray-400">Cadastro de registros diários de produção</p>
                    </div>
                    
                    <!-- Grid de conteúdo -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Formulário de cadastro -->
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Novo Registro</h3>
                                
                                <form id="form-registro">
                                    <div class="mb-4">
                                        <label for="registro-data" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data</label>
                                        <input type="date" id="registro-data" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-colhedora" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Colhedora</label>
                                        <select id="registro-colhedora" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                            <option value="">Selecione uma colhedora</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-cultura" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Cultura</label>
                                        <input type="text" id="registro-cultura" list="lista-culturas" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: Soja" required>
                                        <datalist id="lista-culturas">
                                            <option value="Soja">
                                            <option value="Milho">
                                            <option value="Trigo">
                                            <option value="Algodão">
                                            <option value="Arroz">
                                        </datalist>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-quantidade" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Quantidade (T)</label>
                                        <input type="number" step="0.01" id="registro-quantidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 150.5" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-horas" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Horas Trabalhadas</label>
                                        <input type="number" step="0.1" id="registro-horas" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 8.5">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-combustivel" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Combustível (L)</label>
                                        <input type="number" step="0.1" id="registro-combustivel" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 120">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="registro-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="registro-observacoes" rows="2" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                    
                                    <div class="flex items-center space-x-2">
                                        <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-save mr-2"></i> Registrar Produção
                                        </button>
                                        <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-times mr-2"></i> Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Estatísticas de produção -->
                        <div class="lg:col-span-2">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                                <div class="flex justify-between mb-3">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Estatísticas de Produção</h3>
                                    <button id="btn-export-producao" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                        <i class="fas fa-file-export mr-1"></i> Exportar
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                    <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Colhido</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="total-colhido" class="text-2xl font-bold text-blue-600 dark:text-blue-400">0 T</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-50 dark:bg-green-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Rendimento Médio</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="rendimento-medio" class="text-2xl font-bold text-green-600 dark:text-green-400">0 T/h</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-red-50 dark:bg-red-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Paradas por Chuva</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="paradas-chuva-total" class="text-2xl font-bold text-red-600 dark:text-red-400">0 dias</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <h4 class="font-medium text-gray-700 dark:text-gray-300 mb-2">Estatísticas por Colhedora</h4>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Colhedora</th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Produção (T)</th>
                                                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Rendimento (T/h)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-colhedoras" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Dados serão preenchidos via JavaScript -->
                                            <tr>
                                                <td colspan="3" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                    Carregando estatísticas...
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Histórico -->
                <div id="content-historico" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Histórico de Registros</h2>
                        <p class="text-gray-600 dark:text-gray-400">Consulta e filtro de registros de produção</p>
                    </div>
                    
                    <!-- Filtros -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div>
                                <label for="filtro-colhedora" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Colhedora</label>
                                <select id="filtro-colhedora" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    <option value="">Todas</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="filtro-cultura" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Cultura</label>
                                <select id="filtro-cultura" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    <option value="">Todas</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="filtro-data-inicio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Início</label>
                                <input type="date" id="filtro-data-inicio" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                            </div>
                            
                            <div>
                                <label for="filtro-data-fim" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Fim</label>
                                <input type="date" id="filtro-data-fim" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                            </div>
                        </div>
                        
                        <div class="flex justify-end mt-4 space-x-2">
                            <button id="btn-limpar-filtros" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-eraser mr-2"></i> Limpar Filtros
                            </button>
                            <button id="btn-aplicar-filtros" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-filter mr-2"></i> Aplicar Filtros
                            </button>
                        </div>
                    </div>
                    
                    <!-- Tabela de registros -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Registros de Produção</h3>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-500 dark:text-gray-400"><span id="registros-contagem">0</span> registros encontrados</span>
                                <button id="btn-export-historico" class="inline-flex items-center px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-file-export mr-1"></i> Exportar
                                </button>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Data</th>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Colhedora</th>
                                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Cultura</th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Quantidade (T)</th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Horas</th>
                                        <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">T/h</th>
                                        <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="tabela-registros" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                    <!-- Dados serão preenchidos via JavaScript -->
                                    <tr>
                                        <td colspan="7" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                            Carregando registros...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Paginação -->
                        <div class="flex items-center justify-between mt-4">
                            <div class="text-sm text-gray-500 dark:text-gray-400" id="paginacao-info">
                                Página 1 de 1
                            </div>
                            <div class="flex space-x-2">
                                <button id="btn-pagina-anterior" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm" disabled>
                                    <i class="fas fa-chevron-left mr-2"></i> Anterior
                                </button>
                                <button id="btn-proxima-pagina" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm" disabled>
                                    Próxima <i class="fas fa-chevron-right ml-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Chuvas -->
                <div id="content-chuvas" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Registro de Chuvas</h2>
                        <p class="text-gray-600 dark:text-gray-400">Registro e histórico de paradas por chuva</p>
                    </div>
                    
                    <!-- Grid de conteúdo -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Formulário de registro -->
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Registrar Parada</h3>
                                
                                <form id="form-chuva">
                                    <div class="mb-4">
                                        <label for="chuva-data-inicio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Início</label>
                                        <input type="date" id="chuva-data-inicio" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="chuva-data-fim" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data Fim</label>
                                        <input type="date" id="chuva-data-fim" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="chuva-dias" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Dias Parados</label>
                                        <input type="number" step="0.5" id="chuva-dias" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 2.5" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="chuva-intensidade" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Intensidade</label>
                                        <select id="chuva-intensidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                            <option value="">Selecione a intensidade</option>
                                            <option value="baixa">Baixa</option>
                                            <option value="media">Média</option>
                                            <option value="alta">Alta</option>
                                        </select>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="chuva-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="chuva-observacoes" rows="3" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                    
                                    <div class="flex items-center space-x-2">
                                        <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-save mr-2"></i> Registrar Parada
                                        </button>
                                        <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                            <i class="fas fa-times mr-2"></i> Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Resumo e estatísticas -->
                        <div class="lg:col-span-2">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                                <div class="flex justify-between mb-3">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Resumo de Paradas</h3>
                                    <button id="btn-export-chuvas" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                        <i class="fas fa-file-export mr-1"></i> Exportar
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                    <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Registros</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="chuva-total-registros" class="text-xl font-bold text-blue-600 dark:text-blue-400">0 registros</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-red-50 dark:bg-red-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Dias</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="chuva-total-dias" class="text-xl font-bold text-red-600 dark:text-red-400">0 dias</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Última Parada</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="chuva-ultima-parada" class="text-xl font-bold text-yellow-600 dark:text-yellow-400">-</span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-green-50 dark:bg-green-900/30 p-4 rounded-lg">
                                        <h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Impacto Estimado</h4>
                                        <div class="flex items-baseline mt-1">
                                            <span id="chuva-impacto-estimado" class="text-xl font-bold text-green-600 dark:text-green-400">0 T</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tabela de registros -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Histórico de Paradas</h3>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Período</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Dias</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Intensidade</th>
                                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Observações</th>
                                                <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tabela-chuvas" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <!-- Dados serão preenchidos via JavaScript -->
                                            <tr>
                                                <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                    Carregando registros...
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Caminhões -->
                <div id="content-caminhoes" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Caminhões</h2>
                        <p class="text-gray-600 dark:text-gray-400">Gerenciamento de frota e registros de viagens</p>
                    </div>
                    
                    <!-- Tabs para caminhões -->
                    <div class="border-b border-gray-200 dark:border-gray-700 mb-4">
                        <div class="flex overflow-x-auto scrollbar-hide">
                            <button data-tab="cadastro" class="caminhoes-tab tab-active px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Cadastro de Caminhões
                            </button>
                            <button data-tab="registro" class="caminhoes-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Registro de Viagens
                            </button>
                            <button data-tab="estatisticas" class="caminhoes-tab px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap">
                                Estatísticas e Relatórios
                            </button>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Cadastro de Caminhões" -->
                    <div id="tab-cadastro" class="caminhoes-tab-content">
                        <!-- Botão para adicionar -->
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Caminhões Cadastrados</h3>
                            
                            <div class="flex space-x-2">
                                <button id="btn-export-caminhoes" class="inline-flex items-center px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-file-export mr-1"></i> Exportar
                                </button>
                                <button id="btn-add-new-caminhao" class="inline-flex items-center px-3 py-1.5 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-plus mr-1"></i> Novo Caminhão
                                </button>
                            </div>
                        </div>
                        
                        <!-- Formulário de cadastro (inicialmente oculto) -->
                        <div id="cadastro-caminhao-card" class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6 hidden">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Cadastro de Caminhão</h3>
                            
                            <form id="form-cadastro-caminhao">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Identificador</label>
                                        <input type="text" id="cadastro-caminhao-id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: CAM-001" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-placa" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Placa</label>
                                        <input type="text" id="cadastro-caminhao-placa" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: ABC-1234" required>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-modelo" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Modelo</label>
                                        <input type="text" id="cadastro-caminhao-modelo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: Volvo FH 540">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tipo</label>
                                        <div class="flex space-x-4">
                                            <div class="flex items-center">
                                                <input id="tipo-proprio" type="radio" name="cadastro-caminhao-tipo" value="proprio" class="w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" checked>
                                                <label for="tipo-proprio" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Próprio</label>
                                            </div>
                                            <div class="flex items-center">
                                                <input id="tipo-terceiro" type="radio" name="cadastro-caminhao-tipo" value="terceiro" class="w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 dark:focus:ring-primary-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                                <label for="tipo-terceiro" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Terceiro</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-capacidade" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Capacidade (T)</label>
                                        <input type="number" step="0.1" id="cadastro-caminhao-capacidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 30">
                                    </div>
                                    
                                    <div class="mb-4">
                                        <label for="cadastro-caminhao-motorista" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Motorista</label>
                                        <input type="text" id="cadastro-caminhao-motorista" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Nome do motorista">
                                    </div>
                                    
                                    <div class="mb-4 md:col-span-2">
                                        <label for="cadastro-caminhao-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                        <textarea id="cadastro-caminhao-observacoes" rows="2" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-2">
                                    <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                        <i class="fas fa-save mr-2"></i> Cadastrar
                                    </button>
                                    <button type="reset" id="btn-cancelar-cadastro-caminhao" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                        <i class="fas fa-times mr-2"></i> Cancelar
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Tabela de caminhões -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Identificação</th>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Placa</th>
                                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Modelo</th>
                                            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tipo</th>
                                            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Capacidade</th>
                                            <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tabela-caminhoes" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <!-- Dados serão preenchidos via JavaScript -->
                                        <tr>
                                            <td colspan="6" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                Carregando caminhões...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Registro de Viagens" -->
                    <div id="tab-registro" class="caminhoes-tab-content hidden">
                        <!-- Grid de conteúdo -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- Formulário de registro -->
                            <div class="lg:col-span-1">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Registro de Viagem</h3>
                                    
                                    <form id="form-caminhao">
                                        <div class="mb-4">
                                            <label for="caminhao-data" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Data</label>
                                            <input type="date" id="caminhao-data" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-id" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Caminhão</label>
                                            <select id="caminhao-id" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" required>
                                                <option value="">Selecione um caminhão</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-producao" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Produção (T)</label>
                                            <input type="number" step="0.01" id="caminhao-producao" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 28.5" required>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-cultura" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Cultura</label>
                                            <input type="text" id="caminhao-cultura" list="lista-culturas-caminhao" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: Soja">
                                            <datalist id="lista-culturas-caminhao">
                                                <option value="Soja">
                                                <option value="Milho">
                                                <option value="Trigo">
                                                <option value="Algodão">
                                                <option value="Arroz">
                                            </datalist>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-tempo-campo" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tempo de Campo (min)</label>
                                            <input type="number" id="caminhao-tempo-campo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 45" required>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-tempo-patio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Tempo de Pátio (min)</label>
                                            <input type="number" id="caminhao-tempo-patio" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Ex: 30" required>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <label for="caminhao-observacoes" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Observações</label>
                                            <textarea id="caminhao-observacoes" rows="2" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" placeholder="Observações adicionais..."></textarea>
                                        </div>
                                        
                                        <div class="flex items-center space-x-2">
                                            <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                                <i class="fas fa-save mr-2"></i> Registrar Viagem
                                            </button>
                                            <button type="reset" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                                                <i class="fas fa-times mr-2"></i> Cancelar
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            
                            <!-- Histórico de registros -->
                            <div class="lg:col-span-2">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                    <div class="flex justify-between mb-3">
                                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Histórico de Viagens</h3>
                                        <button id="btn-export-viagens" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                            <i class="fas fa-file-export mr-1"></i> Exportar
                                        </button>
                                    </div>
                                    
                                    <div class="overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                            <thead class="bg-gray-50 dark:bg-gray-700">
                                                <tr>
                                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Data</th>
                                                    <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Caminhão</th>
                                                    <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tipo</th>
                                                    <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Produção (T)</th>
                                                    <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">T. Campo</th>
                                                    <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">T. Pátio</th>
                                                    <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabela-historico-caminhoes" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                                <!-- Dados serão preenchidos via JavaScript -->
                                                <tr>
                                                    <td colspan="7" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                                        Carregando registros...
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conteúdo da tab "Estatísticas e Relatórios" -->
                    <div id="tab-estatisticas" class="caminhoes-tab-content hidden">
                        <!-- Cards de estatísticas -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Produção total -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Produção Total</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="estatisticas-total-producao-caminhoes" class="text-2xl font-semibold text-gray-900 dark:text-white">0 T</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-weight-hanging text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Média tempo de campo -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média Tempo Campo</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="estatisticas-media-campo" class="text-2xl font-semibold text-gray-900 dark:text-white">0 min</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-tractor text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Média tempo de pátio -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Média Tempo Pátio</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="estatisticas-media-patio" class="text-2xl font-semibold text-gray-900 dark:text-white">0 min</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-warehouse text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Total de registros -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Viagens</h3>
                                        <div class="flex items-baseline mt-1">
                                            <span id="estatisticas-total-registros-caminhoes" class="text-2xl font-semibold text-gray-900 dark:text-white">0</span>
                                        </div>
                                    </div>
                                    <div class="p-2 bg-primary-50 dark:bg-primary-900/30 rounded-lg">
                                        <i class="fas fa-route text-xl text-primary-600 dark:text-primary-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Comparação próprios vs terceiros -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                            <!-- Card de frota própria -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Frota Própria</h3>
                                
                                <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700 mb-2">
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Produção Total</p>
                                    </div>
                                    <div class="flex items-center">
                                        <span id="estatisticas-producao-proprios" class="text-lg font-semibold text-blue-600 dark:text-blue-400">0 T</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Card de frota terceirizada -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Frota Terceirizada</h3>
                                
                                <div class="flex items-center justify-between pb-2 border-b border-gray-200 dark:border-gray-700 mb-2">
                                    <div>
                                        <p class="text-sm text-gray-500 dark:text-gray-400">Produção Total</p>
                                    </div>
                                    <div class="flex items-center">
                                        <span id="estatisticas-producao-terceiros" class="text-lg font-semibold text-green-600 dark:text-green-400">0 T</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gráfico de distribuição -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                                <div class="flex justify-between mb-3">
                                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Distribuição de Produção</h3>
                                    <button id="btn-export-estatisticas" class="inline-flex items-center px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg">
                                        <i class="fas fa-file-export mr-1"></i> Exportar
                                    </button>
                                </div>
                                <div class="h-48">
                                    <canvas id="estatisticas-chart-proprios-terceiros"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Conteúdo de Configurações -->
                <div id="content-configuracoes" class="content hidden">
                    <div class="mb-4">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Configurações</h2>
                        <p class="text-gray-600 dark:text-gray-400">Gerenciamento de dados e preferências do sistema</p>
                    </div>
                    
                    <!-- Configurações de Tema -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Aparência</h3>
                        
                        <div class="flex items-center mb-4">
                            <span class="mr-3 text-sm text-gray-700 dark:text-gray-300">Tema Escuro</span>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="theme-toggle-checkbox" class="sr-only peer">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex flex-wrap gap-2">
                            <button id="light-mode-btn" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium rounded-lg text-sm">
                                <i class="fas fa-sun mr-2"></i> Modo Claro
                            </button>
                            <button id="dark-mode-btn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-moon mr-2"></i> Modo Escuro
                            </button>
                            <button id="system-mode-btn" class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-desktop mr-2"></i> Usar Preferência do Sistema
                            </button>
                        </div>
                    </div>
                    
                    <!-- Backup e Exportação -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Backup e Exportação</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg">
                                <h4 class="font-medium text-blue-800 dark:text-blue-300 mb-2">Backup de Dados</h4>
                                
                                <p class="text-sm text-blue-700 dark:text-blue-400 mb-3">
                                    Exporte todos os dados do sistema em formato JSON para backup.
                                </p>
                                
                                <button id="btn-exportar-json" class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-download mr-2"></i> Exportar Dados (JSON)
                                </button>
                            </div>
                            
                            <div class="bg-green-50 dark:bg-green-900/30 p-4 rounded-lg">
                                <h4 class="font-medium text-green-800 dark:text-green-300 mb-2">Restaurar Backup</h4>
                                
                                <p class="text-sm text-green-700 dark:text-green-400 mb-3">
                                    Importe dados a partir de um arquivo JSON de backup.
                                </p>
                                
                                <div class="flex flex-col space-y-2">
                                    <input type="file" id="import-json-file" accept=".json" class="hidden">
                                    <button id="btn-importar-json" class="inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg text-sm">
                                        <i class="fas fa-upload mr-2"></i> Importar Dados (JSON)
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg">
                            <h4 class="font-medium text-purple-800 dark:text-purple-300 mb-2">Relatórios</h4>
                            
                            <p class="text-sm text-purple-700 dark:text-purple-400 mb-3">
                                Exporte relatórios em formato PDF para apresentação ou arquivamento.
                            </p>
                            
                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2">
                                <button id="btn-relatorio-producao" class="inline-flex items-center px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-file-pdf mr-2"></i> Relatório de Produção
                                </button>
                                <button id="btn-relatorio-colhedoras" class="inline-flex items-center px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-file-pdf mr-2"></i> Relatório de Colhedoras
                                </button>
                                <button id="btn-relatorio-caminhoes" class="inline-flex items-center px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg text-sm">
                                    <i class="fas fa-file-pdf mr-2"></i> Relatório de Frota
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gerenciamento de Dados - Zona de Perigo -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Gerenciamento de Dados</h3>
                        
                        <div class="bg-red-50 dark:bg-red-900/30 p-4 rounded-lg">
                            <h4 class="font-medium text-red-800 dark:text-red-300 mb-2">Zona de Perigo</h4>
                            
                            <p class="text-sm text-red-700 dark:text-red-400 mb-3">
                                As ações abaixo são irreversíveis. Certifique-se de fazer backup dos seus dados antes de prosseguir.
                            </p>
                            
                            <button id="btn-limpar-dados" class="inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg text-sm">
                                <i class="fas fa-trash-alt mr-2"></i> Limpar Todos os Dados
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        
        <!-- Painel de notificações -->
        <div id="notifications-panel" class="fixed inset-y-0 right-0 w-80 bg-white dark:bg-gray-800 shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-20 flex flex-col">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                <h2 class="text-lg font-semibold text-gray-800 dark:text-white">Notificações</h2>
                <button id="close-notifications" class="text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto scrollbar-hide p-4 space-y-4">
                <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">Hoje</h3>
                <div class="notificacoes-hoje space-y-3">
                    <!-- Notificações de hoje serão inseridas via JavaScript -->
                </div>
                
                <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2 mt-6">Anteriores</h3>
                <div class="notificacoes-anteriores space-y-3">
                    <!-- Notificações anteriores serão inseridas via JavaScript -->
                </div>
            </div>
            
            <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                <button id="btn-marcar-todas-lidas" class="w-full inline-flex justify-center items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm transition-colors">
                    <i class="fas fa-check-double mr-2"></i> Marcar todas como lidas
                </button>
            </div>
        </div>
        
        <!-- Modal de confirmação para limpar dados -->
        <div id="modal-limpar-dados" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md w-full">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">Confirmar Exclusão</h3>
                
                <p class="text-gray-600 dark:text-gray-400 mb-4">
                    Esta ação irá excluir <span class="font-bold text-red-600 dark:text-red-400">TODOS</span> os dados do sistema. Esta ação não pode ser desfeita.
                </p>
                
                <div class="mb-4">
                    <label for="confirmacao-texto" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Digite "CONFIRMAR" para prosseguir:</label>
                    <input type="text" id="confirmacao-texto" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500" placeholder="CONFIRMAR">
                </div>
                
                <div class="flex justify-end space-x-2">
                    <button id="btn-cancelar-limpar" class="inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white font-medium rounded-lg text-sm">
                        <i class="fas fa-times mr-2"></i> Cancelar
                    </button>
                    
                    <button id="btn-confirmar-limpar" class="inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg text-sm opacity-50 cursor-not-allowed" disabled>
                        <i class="fas fa-trash-alt mr-2"></i> Excluir Todos os Dados
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Banco de dados simulado
        const DB = {
            // Inicialização do banco de dados
            init: function() {
                // Verificar se já existe algum dado
                if (!localStorage.getItem('ggomes_colhedoras')) {
                    // Criar alguns dados de exemplo
                    // Colhedoras
                    const colhedorasIniciais = [
                        { id: 'COL-001', marca: 'John Deere', modelo: '9670 STS', ano: 2021, observacoes: 'Em excelente estado' },
                        { id: 'COL-002', marca: 'New Holland', modelo: 'CR8.90', ano: 2020, observacoes: 'Manutenção recente' },
                        { id: 'COL-003', marca: 'Case IH', modelo: 'Axial-Flow 9250', ano: 2022, observacoes: 'Nova aquisição' }
                    ];
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedorasIniciais));
                    
                    // Obter a data atual para registros de hoje
                    const hoje = new Date();
                    const dataHoje = hoje.toISOString().split('T')[0]; // Formato YYYY-MM-DD
                    
                    // Obter data de ontem para alguns registros
                    const ontem = new Date();
                    ontem.setDate(ontem.getDate() - 1);
                    const dataOntem = ontem.toISOString().split('T')[0];
                    
                    // Registros de produção (incluindo alguns para hoje)
                    const registrosIniciais = [
                        { id: 'REG-001', data: dataOntem, colhedoraId: 'COL-001', cultura: 'Soja', quantidade: 145.5, horas: 8.5, combustivel: 120, observacoes: 'Condições climáticas favoráveis' },
                        { id: 'REG-002', data: dataOntem, colhedoraId: 'COL-002', cultura: 'Milho', quantidade: 168.2, horas: 9, combustivel: 130, observacoes: 'Solo úmido pela manhã' },
                        { id: 'REG-003', data: dataOntem, colhedoraId: 'COL-003', cultura: 'Soja', quantidade: 152.8, horas: 8, combustivel: 115, observacoes: '' },
                        { id: 'REG-004', data: dataHoje, colhedoraId: 'COL-001', cultura: 'Milho', quantidade: 138.6, horas: 7.5, combustivel: 105, observacoes: 'Parada de 1h para manutenção' },
                        { id: 'REG-005', data: dataHoje, colhedoraId: 'COL-002', cultura: 'Soja', quantidade: 162.4, horas: 8.5, combustivel: 125, observacoes: 'Condições ideais' }
                    ];
                    localStorage.setItem('ggomes_registros', JSON.stringify(registrosIniciais));
                    
                    // Veículos cadastrados
                    const veiculosIniciais = [
                        { id: 'CAM-001', placa: 'ABC-1234', modelo: 'Volvo FH 540', tipo: 'proprio', capacidade: 30, motorista: 'João Silva', observacoes: 'Caminhão principal' },
                        { id: 'CAM-002', placa: 'DEF-5678', modelo: 'Scania R 450', tipo: 'proprio', capacidade: 28, motorista: 'Pedro Santos', observacoes: '' },
                        { id: 'CAM-003', placa: 'GHI-9012', modelo: 'Mercedes-Benz Atego', tipo: 'terceiro', capacidade: 26, motorista: 'Carlos Oliveira', observacoes: 'Empresa Transportes XYZ' }
                    ];
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(veiculosIniciais));
                    
                    // Registros de caminhões
                    const caminhoesIniciais = [
                        { id: 'VIA-001', data: dataOntem, caminhaoId: 'CAM-001', producao: 28.5, cultura: 'Soja', tempoCampo: 45, tempoPatio: 30, observacoes: '' },
                        { id: 'VIA-002', data: dataOntem, caminhaoId: 'CAM-002', producao: 27.2, cultura: 'Soja', tempoCampo: 50, tempoPatio: 35, observacoes: '' },
                        { id: 'VIA-003', data: dataOntem, caminhaoId: 'CAM-003', producao: 25.8, cultura: 'Milho', tempoCampo: 42, tempoPatio: 28, observacoes: '' },
                        { id: 'VIA-004', data: dataHoje, caminhaoId: 'CAM-001', producao: 29.1, cultura: 'Soja', tempoCampo: 48, tempoPatio: 32, observacoes: '' },
                        { id: 'VIA-005', data: dataHoje, caminhaoId: 'CAM-002', producao: 26.9, cultura: 'Milho', tempoCampo: 46, tempoPatio: 31, observacoes: '' }
                    ];
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(caminhoesIniciais));
                    
                    // Registros de chuva
                    const chuvasIniciais = [
                        { id: 'CHV-001', dataInicio: '2023-05-10', dataFim: '2023-05-11', dias: 1.5, intensidade: 'media', observacoes: 'Chuva constante' },
                        { id: 'CHV-002', dataInicio: '2023-05-20', dataFim: '2023-05-22', dias: 2, intensidade: 'alta', observacoes: 'Tempestade com trovões' }
                    ];
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(chuvasIniciais));
                    
                    // Notificações
                    const notificacoesIniciais = [
                        { id: 'notif-1', tipo: 'info', titulo: 'Bem-vindo ao GGOMES-LOG', mensagem: 'Sistema inicializado com sucesso!', dataHora: new Date().toISOString(), lida: false },
                        { id: 'notif-2', tipo: 'warn', titulo: 'Manutenção Programada', mensagem: 'A colhedora COL-001 está agendada para manutenção em 3 dias.', dataHora: new Date().toISOString(), lida: false }
                    ];
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notificacoesIniciais));
                    
                    // Configurações
                    localStorage.setItem('ggomes_config', JSON.stringify({
                        temaEscuro: false,
                        ultimoAcesso: new Date().toISOString()
                    }));
                }
                
                // Verificar se falta algum tipo de dado e inicializá-lo
                if (!localStorage.getItem('ggomes_colhedoras')) {
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_registros')) {
                    localStorage.setItem('ggomes_registros', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_veiculos_cadastrados')) {
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_caminhoes')) {
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_chuvas')) {
                    localStorage.setItem('ggomes_chuvas', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_notifications')) {
                    localStorage.setItem('ggomes_notifications', JSON.stringify([]));
                }
                if (!localStorage.getItem('ggomes_config')) {
                    localStorage.setItem('ggomes_config', JSON.stringify({ temaEscuro: false, ultimoAcesso: new Date().toISOString() }));
                }
                
                // Atualizar última data de acesso
                const config = JSON.parse(localStorage.getItem('ggomes_config'));
                config.ultimoAcesso = new Date().toISOString();
                localStorage.setItem('ggomes_config', JSON.stringify(config));
            },
            
            // Método para limpar todos os dados
            clearAll: function() {
                try {
                    localStorage.removeItem('ggomes_colhedoras');
                    localStorage.removeItem('ggomes_registros');
                    localStorage.removeItem('ggomes_veiculos_cadastrados');
                    localStorage.removeItem('ggomes_caminhoes');
                    localStorage.removeItem('ggomes_chuvas');
                    localStorage.removeItem('ggomes_notifications');
                    
                    // Manter apenas as configurações
                    const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                    localStorage.setItem('ggomes_config', JSON.stringify({
                        ...config,
                        ultimoAcesso: new Date().toISOString()
                    }));
                    
                    // Inicializar com arrays vazios em vez de dados de exemplo
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify([]));
                    localStorage.setItem('ggomes_registros', JSON.stringify([]));
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify([]));
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify([]));
                    localStorage.setItem('ggomes_chuvas', JSON.stringify([]));
                    localStorage.setItem('ggomes_notifications', JSON.stringify([]));
                    
                    return true;
                } catch (error) {
                    console.error('Erro ao limpar dados:', error);
                    return false;
                }
            },
            
            // Exportar todos os dados para backup
            exportData: function() {
                try {
                    const data = {
                        colhedoras: JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]'),
                        registros: JSON.parse(localStorage.getItem('ggomes_registros') || '[]'),
                        veiculos: JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]'),
                        caminhoes: JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]'),
                        chuvas: JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]'),
                        notifications: JSON.parse(localStorage.getItem('ggomes_notifications') || '[]'),
                        config: JSON.parse(localStorage.getItem('ggomes_config') || '{}'),
                        metaData: {
                            exportDate: new Date().toISOString(),
                            version: '1.0.0'
                        }
                    };
                    
                    return JSON.stringify(data, null, 2);
                } catch (error) {
                    console.error('Erro ao exportar dados:', error);
                    throw new Error('Não foi possível exportar os dados.');
                }
            },
            
            // Importar dados de backup
            importData: function(jsonData) {
                try {
                    const data = JSON.parse(jsonData);
                    
                    // Validar estrutura mínima de dados
                    if (!data.colhedoras || !data.registros || !data.veiculos || 
                        !data.caminhoes || !data.chuvas) {
                        throw new Error('Arquivo de backup inválido ou corrompido.');
                    }
                    
                    // Restaurar dados
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(data.colhedoras));
                    localStorage.setItem('ggomes_registros', JSON.stringify(data.registros));
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(data.veiculos));
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(data.caminhoes));
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(data.chuvas));
                    
                    // Restaurar notificações e configurações se existirem
                    if (data.notifications) {
                        localStorage.setItem('ggomes_notifications', JSON.stringify(data.notifications));
                    }
                    
                    if (data.config) {
                        // Preservar tema atual mas atualizar outras configurações
                        const currentConfig = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                        const newConfig = {
                            ...data.config,
                            temaEscuro: currentConfig.temaEscuro, // Manter tema atual
                            ultimoAcesso: new Date().toISOString() // Atualizar acesso
                        };
                        localStorage.setItem('ggomes_config', JSON.stringify(newConfig));
                    }
                    
                    return true;
                } catch (error) {
                    console.error('Erro ao importar dados:', error);
                    throw error;
                }
            },
            
            // Operações com colhedoras
            colhedoras: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                },
                
                get: function(id) {
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    return colhedoras.find(c => c.id === id);
                },
                
                add: function(colhedora) {
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    
                    // Verificar se o ID já existe
                    if (colhedoras.some(c => c.id === colhedora.id)) {
                        throw new Error('Já existe uma colhedora com este ID');
                    }
                    
                    // Adicionar ID único
                    colhedora.id = colhedora.id || 'COL-' + Date.now();
                    
                    // Adicionar colhedora
                    colhedoras.push(colhedora);
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedoras));
                    
                    return colhedora;
                },
                
                update: function(colhedora) {
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    
                    // Encontrar índice da colhedora
                    const index = colhedoras.findIndex(c => c.id === colhedora.id);
                    
                    if (index === -1) {
                        throw new Error('Colhedora não encontrada');
                    }
                    
                    // Atualizar colhedora
                    colhedoras[index] = { ...colhedoras[index], ...colhedora };
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(colhedoras));
                    
                    return colhedoras[index];
                },
                
                remove: function(id) {
                    const colhedoras = JSON.parse(localStorage.getItem('ggomes_colhedoras') || '[]');
                    
                    // Filtrar colhedoras
                    const novasColhedoras = colhedoras.filter(c => c.id !== id);
                    
                    if (novasColhedoras.length === colhedoras.length) {
                        throw new Error('Colhedora não encontrada');
                    }
                    
                    localStorage.setItem('ggomes_colhedoras', JSON.stringify(novasColhedoras));
                    
                    return true;
                }
            },
            
            // Operações com registros de produção
            registros: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                },
                
                get: function(id) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    return registros.find(r => r.id === id);
                },
                
                add: function(registro) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Adicionar ID único
                    registro.id = registro.id || 'REG-' + Date.now();
                    
                    // Adicionar registro
                    registros.push(registro);
                    localStorage.setItem('ggomes_registros', JSON.stringify(registros));
                    
                    return registro;
                },
                
                remove: function(id) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Filtrar registros
                    const novosRegistros = registros.filter(r => r.id !== id);
                    
                    if (novosRegistros.length === registros.length) {
                        throw new Error('Registro não encontrado');
                    }
                    
                    localStorage.setItem('ggomes_registros', JSON.stringify(novosRegistros));
                    
                    return true;
                },
                
                // Obter estatísticas por equipamento (colhedora)
                getEquipmentStats: function() {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    const colhedoras = {};
                    
                    // Agrupar por colhedora
                    registros.forEach(reg => {
                        if (!colhedoras[reg.colhedoraId]) {
                            colhedoras[reg.colhedoraId] = {
                                id: reg.colhedoraId,
                                quantidade: 0,
                                horas: 0,
                                registros: 0
                            };
                        }
                        
                        colhedoras[reg.colhedoraId].quantidade += Number(reg.quantidade) || 0;
                        colhedoras[reg.colhedoraId].horas += Number(reg.horas) || 0;
                        colhedoras[reg.colhedoraId].registros += 1;
                    });
                    
                    // Calcular produtividade e rendimento
                    const resultado = Object.values(colhedoras).map(col => {
                        const rendimento = col.horas > 0 ? col.quantidade / col.horas : 0;
                        
                        return {
                            id: col.id,
                            quantidade: col.quantidade,
                            horas: col.horas,
                            registros: col.registros,
                            rendimento: rendimento
                        };
                    });
                    
                    return resultado;
                },
                
                // NOVO MÉTODO: Obter estatísticas do dia atual
                getDailyStats: function() {
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Obter data atual no formato ISO (YYYY-MM-DD)
                    const hoje = new Date();
                    const dataHoje = hoje.toISOString().split('T')[0];
                    
                    // Filtrar registros de hoje
                    const registrosHoje = registros.filter(reg => reg.data === dataHoje);
                    
                    // Calcular totais
                    let totalQuantidade = 0;
                    let totalHoras = 0;
                    
                    registrosHoje.forEach(reg => {
                        totalQuantidade += Number(reg.quantidade) || 0;
                        totalHoras += Number(reg.horas) || 0;
                    });
                    
                    // Calcular produtividade por hora
                    const produtividadeHora = totalHoras > 0 ? totalQuantidade / totalHoras : 0;
                    
                    return {
                        quantidade: totalQuantidade,
                        horas: totalHoras,
                        produtividadeHora: produtividadeHora,
                        temRegistrosHoje: registrosHoje.length > 0
                    };
                }
            },
            
            // Operações com veículos cadastrados
            veiculosCadastrados: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                },
                
                get: function(id) {
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    return veiculos.find(v => v.id === id);
                },
                
                add: function(veiculo) {
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    
                    // Verificar se o ID já existe
                    if (veiculos.some(v => v.id === veiculo.id)) {
                        throw new Error('Já existe um veículo com este ID');
                    }
                    
                    // Adicionar ID único
                    veiculo.id = veiculo.id || 'CAM-' + Date.now();
                    
                    // Adicionar veículo
                    veiculos.push(veiculo);
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(veiculos));
                    
                    return veiculo;
                },
                
                update: function(veiculo) {
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    
                    // Encontrar índice do veículo
                    const index = veiculos.findIndex(v => v.id === veiculo.id);
                    
                    if (index === -1) {
                        throw new Error('Veículo não encontrado');
                    }
                    
                    // Atualizar veículo
                    veiculos[index] = { ...veiculos[index], ...veiculo };
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(veiculos));
                    
                    return veiculos[index];
                },
                
                remove: function(id) {
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    
                    // Filtrar veículos
                    const novosVeiculos = veiculos.filter(v => v.id !== id);
                    
                    if (novosVeiculos.length === veiculos.length) {
                        throw new Error('Veículo não encontrado');
                    }
                    
                    localStorage.setItem('ggomes_veiculos_cadastrados', JSON.stringify(novosVeiculos));
                    
                    return true;
                }
            },
            
            // Operações com registros de caminhões
            caminhoes: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                },
                
                get: function(id) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    return registros.find(r => r.id === id);
                },
                
                add: function(registro) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    
                    // Adicionar ID único
                    registro.id = registro.id || 'VIA-' + Date.now();
                    
                    // Adicionar registro
                    registros.push(registro);
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(registros));
                    
                    return registro;
                },
                
                remove: function(id) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    
                    // Filtrar registros
                    const novosRegistros = registros.filter(r => r.id !== id);
                    
                    if (novosRegistros.length === registros.length) {
                        throw new Error('Registro não encontrado');
                    }
                    
                    localStorage.setItem('ggomes_caminhoes', JSON.stringify(novosRegistros));
                    
                    return true;
                },
                
                // Obter estatísticas de veículos
                getStats: function(dias = 0) {
                    const registros = JSON.parse(localStorage.getItem('ggomes_caminhoes') || '[]');
                    const veiculos = JSON.parse(localStorage.getItem('ggomes_veiculos_cadastrados') || '[]');
                    
                    // Filtrar por período se especificado
                    let registrosFiltrados = [...registros];
                    
                    if (dias > 0) {
                        const dataLimite = new Date();
                        dataLimite.setDate(dataLimite.getDate() - dias);
                        const dataLimiteStr = dataLimite.toISOString().split('T')[0];
                        
                        registrosFiltrados = registros.filter(reg => {
                            return reg.data >= dataLimiteStr;
                        });
                    }
                    
                    // Estatísticas para próprios e terceiros
                    const proprios = {
                        producao: 0,
                        viagens: 0,
                        tempoCampo: 0,
                        tempoPatio: 0
                    };
                    
                    const terceiros = {
                        producao: 0,
                        viagens: 0,
                        tempoCampo: 0,
                        tempoPatio: 0
                    };
                    
                    // Estatísticas por caminhão
                    const caminhoes = [];
                    const mapaCaminhoes = {};
                    
                    // Calcular estatísticas gerais
                    let totalProducao = 0;
                    let totalViagens = registrosFiltrados.length;
                    let totalTempoCampo = 0;
                    let totalTempoPatio = 0;
                    
                    // Processar cada registro
                    registrosFiltrados.forEach(reg => {
                        const caminhaoId = reg.caminhaoId;
                        const veiculo = veiculos.find(v => v.id === caminhaoId);
                        const tipo = veiculo ? veiculo.tipo : 'proprio';
                        
                        // Adicionar à estatística correspondente
                        if (tipo === 'terceiro') {
                            terceiros.producao += Number(reg.producao) || 0;
                            terceiros.viagens += 1;
                            terceiros.tempoCampo += Number(reg.tempoCampo) || 0;
                            terceiros.tempoPatio += Number(reg.tempoPatio) || 0;
                        } else {
                            proprios.producao += Number(reg.producao) || 0;
                            proprios.viagens += 1;
                            proprios.tempoCampo += Number(reg.tempoCampo) || 0;
                            proprios.tempoPatio += Number(reg.tempoPatio) || 0;
                        }
                        
                        // Adicionar ao mapa de caminhões
                        if (!mapaCaminhoes[caminhaoId]) {
                            mapaCaminhoes[caminhaoId] = {
                                id: caminhaoId,
                                tipo: tipo,
                                producao: 0,
                                viagens: 0,
                                tempoCampo: 0,
                                tempoPatio: 0
                            };
                        }
                        
                        mapaCaminhoes[caminhaoId].producao += Number(reg.producao) || 0;
                        mapaCaminhoes[caminhaoId].viagens += 1;
                        mapaCaminhoes[caminhaoId].tempoCampo += Number(reg.tempoCampo) || 0;
                        mapaCaminhoes[caminhaoId].tempoPatio += Number(reg.tempoPatio) || 0;
                        
                        // Adicionar aos totais
                        totalProducao += Number(reg.producao) || 0;
                        totalTempoCampo += Number(reg.tempoCampo) || 0;
                        totalTempoPatio += Number(reg.tempoPatio) || 0;
                    });
                    
                    // Calcular médias
                    const mediaTempoCampo = totalViagens > 0 ? totalTempoCampo / totalViagens : 0;
                    const mediaTempoPatio = totalViagens > 0 ? totalTempoPatio / totalViagens : 0;
                    
                    // Converter mapa para lista
                    Object.values(mapaCaminhoes).forEach(cam => {
                        caminhoes.push(cam);
                    });
                    
                    return {
                        totalProducao,
                        totalViagens,
                        mediaTempoCampo,
                        mediaTempoPatio,
                        proprios,
                        terceiros,
                        caminhoes
                    };
                }
            },
            
            // Operações com registro de chuvas
            chuvas: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                },
                
                get: function(id) {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    return chuvas.find(c => c.id === id);
                },
                
                add: function(chuva) {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    // Adicionar ID único
                    chuva.id = chuva.id || 'CHV-' + Date.now();
                    
                    // Adicionar registro
                    chuvas.push(chuva);
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(chuvas));
                    
                    return chuva;
                },
                
                remove: function(id) {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    // Filtrar registros
                    const novosChuvas = chuvas.filter(c => c.id !== id);
                    
                    if (novosChuvas.length === chuvas.length) {
                        throw new Error('Registro não encontrado');
                    }
                    
                    localStorage.setItem('ggomes_chuvas', JSON.stringify(novosChuvas));
                    
                    return true;
                },
                
                // Obter total de dias parados
                getTotalDias: function(dias = 0) {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    // Filtrar por período se especificado
                    let chuvasFiltradas = [...chuvas];
                    
                    if (dias > 0) {
                        const dataLimite = new Date();
                        dataLimite.setDate(dataLimite.getDate() - dias);
                        const dataLimiteStr = dataLimite.toISOString().split('T')[0];
                        
                        chuvasFiltradas = chuvas.filter(chuva => {
                            return chuva.dataFim >= dataLimiteStr;
                        });
                    }
                    
                    // Calcular total de dias
                    let totalDias = 0;
                    
                    chuvasFiltradas.forEach(chuva => {
                        totalDias += Number(chuva.dias) || 0;
                    });
                    
                    return totalDias;
                },
                
                // Obter último registro de chuva
                getLastChuva: function() {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    if (chuvas.length === 0) {
                        return null;
                    }
                    
                    // Ordenar por data de fim (mais recente primeiro)
                    chuvas.sort((a, b) => new Date(b.dataFim) - new Date(a.dataFim));
                    
                    return chuvas[0];
                },
                
                // Calcular impacto estimado
                calcularImpactoEstimado: function() {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    const registros = JSON.parse(localStorage.getItem('ggomes_registros') || '[]');
                    
                    // Calcular média diária de produção
                    const totalQuantidade = registros.reduce((total, reg) => total + (Number(reg.quantidade) || 0), 0);
                    const diasUnicos = new Set(registros.map(reg => reg.data)).size;
                    
                    const mediaDiaria = diasUnicos > 0 ? totalQuantidade / diasUnicos : 0;
                    
                    // Calcular total de dias parados
                    const totalDias = chuvas.reduce((total, chuva) => total + (Number(chuva.dias) || 0), 0);
                    
                    // Impacto estimado = dias parados * média diária
                    return mediaDiaria * totalDias;
                },
                
                // Obter dados mensais de chuva
                getMonthlyChuvaData: function() {
                    const chuvas = JSON.parse(localStorage.getItem('ggomes_chuvas') || '[]');
                    
                    // Meses do ano
                    const meses = [
                        'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                        'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
                    ];
                    
                    // Inicializar dados mensais
                    const dadosMensais = meses.map((monthName, index) => {
                        return {
                            month: index + 1,
                            monthName,
                            totalDias: 0
                        };
                    });
                    
                    // Calcular dias de chuva por mês
                    chuvas.forEach(chuva => {
                        // Obter mês do registro (1-12)
                        const mes = new Date(chuva.dataInicio).getMonth();
                        
                        // Adicionar dias ao mês correspondente
                        dadosMensais[mes].totalDias += Number(chuva.dias) || 0;
                    });
                    
                    return dadosMensais;
                }
            },
            
            // Operações com notificações
            notifications: {
                getAll: function() {
                    return JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                },
                
                getUnread: function() {
                    const notificacoes = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    return notificacoes.filter(n => !n.lida);
                },
                
                add: function(notificacao) {
                    const notificacoes = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    
                    // Adicionar ID único
                    notificacao.id = notificacao.id || 'notif-' + Date.now();
                    
                    // Definir data e hora atual se não for fornecida
                    notificacao.dataHora = notificacao.dataHora || new Date().toISOString();
                    
                    // Definir como não lida por padrão
                    notificacao.lida = notificacao.lida || false;
                    
                    // Adicionar notificação
                    notificacoes.push(notificacao);
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notificacoes));
                    
                    return notificacao;
                },
                
                markAsRead: function(id) {
                    const notificacoes = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    
                    // Encontrar índice da notificação
                    const index = notificacoes.findIndex(n => n.id === id);
                    
                    if (index === -1) {
                        throw new Error('Notificação não encontrada');
                    }
                    
                    // Marcar como lida
                    notificacoes[index].lida = true;
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notificacoes));
                    
                    return notificacoes[index];
                },
                
                markAllAsRead: function() {
                    const notificacoes = JSON.parse(localStorage.getItem('ggomes_notifications') || '[]');
                    
                    // Marcar todas como lidas
                    notificacoes.forEach(n => {
                        n.lida = true;
                    });
                    
                    localStorage.setItem('ggomes_notifications', JSON.stringify(notificacoes));
                    
                    return notificacoes;
                }
            }
        };
        
        // Funções auxiliares
        
        // Formatação de número com separador de milhar
        function formatarNumero(numero, casasDecimais = 2) {
            return Number(numero).toLocaleString('pt-BR', {
                minimumFractionDigits: casasDecimais,
                maximumFractionDigits: casasDecimais
            });
        }
        
        // Formatação de data
        function formatarData(dataString) {
            const data = new Date(dataString);
            return data.toLocaleDateString('pt-BR');
        }
        
        // Formatação de período
        function formatarPeriodo(dataInicio, dataFim) {
            const inicio = new Date(dataInicio);
            const fim = new Date(dataFim);
            
            return `${inicio.toLocaleDateString('pt-BR')} a ${fim.toLocaleDateString('pt-BR')}`;
        }
        
        // Exibir toast (mensagem temporária)
        function mostrarToast(mensagem, tipo = 'info') {
            const toastContainer = document.getElementById('toast-container');
            
            // Criar o toast
            const toast = document.createElement('div');
            toast.classList.add('animate-fade-in', 'p-4', 'rounded-lg', 'shadow-md', 'max-w-md', 'w-full');
            
            // Aplicar estilos com base no tipo
            switch (tipo) {
                case 'success':
                    toast.classList.add('bg-green-100', 'text-green-800', 'dark:bg-green-800', 'dark:text-green-100');
                    break;
                case 'error':
                    toast.classList.add('bg-red-100', 'text-red-800', 'dark:bg-red-800', 'dark:text-red-100');
                    break;
                case 'warn':
                    toast.classList.add('bg-yellow-100', 'text-yellow-800', 'dark:bg-yellow-800', 'dark:text-yellow-100');
                    break;
                default:
                    toast.classList.add('bg-blue-100', 'text-blue-800', 'dark:bg-blue-800', 'dark:text-blue-100');
            }
            
            // Conteúdo do toast
            toast.innerHTML = mensagem;
            
            // Adicionar ao container
            toastContainer.appendChild(toast);
            
            // Remover após alguns segundos
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                toast.style.transition = 'opacity 500ms ease-out, transform 500ms ease-out';
                
                setTimeout(() => {
                    if (toast.parentNode) {
                        toastContainer.removeChild(toast);
                    }
                }, 500);
            }, tipo === 'info' ? 3000 : 5000);
        }
        
        // Configurar tema
        function configurarTema() {
            const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
            
            // Aplicar tema com base na configuração ou preferência do sistema
            if (config.temaEscuro !== undefined) {
                if (config.temaEscuro) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            } else {
                // Verificar preferência do sistema
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                }
                
                // Ouvir mudanças na preferência
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                    if (event.matches) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                });
            }
            
            // Toggle de tema
            const toggleTheme = document.getElementById('toggle-theme');
            if (toggleTheme) {
                toggleTheme.addEventListener('click', () => {
                    document.documentElement.classList.toggle('dark');
                    
                    // Salvar preferência
                    const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                    config.temaEscuro = document.documentElement.classList.contains('dark');
                    localStorage.setItem('ggomes_config', JSON.stringify(config));
                });
            }
            
            // Checkbox de tema (na página de configurações)
            const themeToggleCheckbox = document.getElementById('theme-toggle-checkbox');
            if (themeToggleCheckbox) {
                themeToggleCheckbox.checked = document.documentElement.classList.contains('dark');
                
                themeToggleCheckbox.addEventListener('change', () => {
                    if (themeToggleCheckbox.checked) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                    
                    // Salvar preferência
                    const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                    config.temaEscuro = themeToggleCheckbox.checked;
                    localStorage.setItem('ggomes_config', JSON.stringify(config));
                });
            }
            
            // Botões de tema (na página de configurações)
            const lightModeBtn = document.getElementById('light-mode-btn');
            const darkModeBtn = document.getElementById('dark-mode-btn');
            const systemModeBtn = document.getElementById('system-mode-btn');
            
            if (lightModeBtn && darkModeBtn && systemModeBtn) {
                lightModeBtn.addEventListener('click', () => {
                    document.documentElement.classList.remove('dark');
                    themeToggleCheckbox.checked = false;
                    
                    // Salvar preferência
                    const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                    config.temaEscuro = false;
                    config.usarSistema = false;
                    localStorage.setItem('ggomes_config', JSON.stringify(config));
                });
                
                darkModeBtn.addEventListener('click', () => {
                    document.documentElement.classList.add('dark');
                    themeToggleCheckbox.checked = true;
                    
                    // Salvar preferência
                    const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                    config.temaEscuro = true;
                    config.usarSistema = false;
                    localStorage.setItem('ggomes_config', JSON.stringify(config));
                });
                
                systemModeBtn.addEventListener('click', () => {
                    // Verificar preferência do sistema
                    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                    
                    if (prefersDark) {
                        document.documentElement.classList.add('dark');
                        themeToggleCheckbox.checked = true;
                    } else {
                        document.documentElement.classList.remove('dark');
                        themeToggleCheckbox.checked = false;
                    }
                    
                    // Salvar preferência
                    const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
                    config.temaEscuro = prefersDark;
                    config.usarSistema = true;
                    localStorage.setItem('ggomes_config', JSON.stringify(config));
                });
            }
        }
        
        // Atualizar contador de notificações
        function atualizarContadorNotificacoes() {
            const notificacoesNaoLidas = DB.notifications.getUnread();
            const badge = document.getElementById('notification-badge');
            
            if (notificacoesNaoLidas.length > 0) {
                badge.textContent = notificacoesNaoLidas.length;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }
        
        // Atualizar data atual
        function atualizarDataAtual() {
            const dataElement = document.getElementById('current-date');
            if (dataElement) {
                const hoje = new Date();
                dataElement.textContent = hoje.toLocaleDateString('pt-BR');
            }
        }
        
        // Criar notificação inicial
        function criarNotificacaoInicial() {
            const notificacoes = DB.notifications.getAll();
            
            // Verificar se já existe alguma notificação
            if (notificacoes.length === 0) {
                // Adicionar notificação de boas-vindas
                DB.notifications.add({
                    tipo: 'info',
                    titulo: 'Bem-vindo ao GGOMES-LOG',
                    mensagem: 'Sistema inicializado com sucesso!',
                    lida: false
                });
            }
        }
        
        // Carregar dados meteorológicos simulados
        function carregarDadosMeteorologicos() {
            const iconElement = document.getElementById('weather-icon');
            const tempElement = document.getElementById('weather-temp');
            
            if (!iconElement || !tempElement) return;
            
            // Gerar temperatura aleatória entre 15 e 35°C
            const temperatura = Math.floor(Math.random() * 20) + 15;
            
            // Determinar condição com base na temperatura
            let condicao = 'sun';
            
            if (temperatura < 20) {
                condicao = 'cloud';
            } else if (temperatura > 30) {
                condicao = 'sun';
            } else {
                // Alternar aleatoriamente entre nublado e ensolarado
                condicao = Math.random() > 0.5 ? 'sun' : 'cloud';
            }
            
            // Verificar se é hora de "chover"
            if (Math.random() < 0.2) {
                condicao = 'rain';
            }
            
            // Definir ícone
            let icone = '';
            
            switch (condicao) {
                case 'sun':
                    icone = '<i class="fas fa-sun icon-sun"></i>';
                    break;
                case 'cloud':
                    icone = '<i class="fas fa-cloud"></i>';
                    break;
                case 'rain':
                    icone = '<i class="fas fa-cloud-rain icon-rain"></i>';
                    break;
            }
            
            // Atualizar elementos
            iconElement.innerHTML = icone;
            tempElement.textContent = `${temperatura}°C`;
        }
        
        // Configurar navegação
        function configurarNavegacao() {
            // Navegação da sidebar
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', () => {
                    // Remover classe ativa de todos os links
                    sidebarLinks.forEach(l => l.classList.remove('active', 'bg-primary-100', 'dark:bg-primary-900', 'text-primary-700', 'dark:text-primary-300'));
                    
                    // Adicionar classe ativa ao link clicado
                    link.classList.add('active', 'bg-primary-100', 'dark:bg-primary-900', 'text-primary-700', 'dark:text-primary-300');
                    
                    // Esconder todos os conteúdos
                    const contents = document.querySelectorAll('.content');
                    contents.forEach(content => content.classList.add('hidden'));
                    
                    // Mostrar conteúdo correspondente
                    const href = link.getAttribute('href').substring(1);
                    const contentElement = document.getElementById(`content-${href}`);
                    if (contentElement) {
                        contentElement.classList.remove('hidden');
                    }
                });
            });
            
            // Toggle do menu lateral
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const sidebar = document.querySelector('aside');
            
            if (mobileMenuToggle && sidebar) {
                mobileMenuToggle.addEventListener('click', () => {
                    sidebar.classList.toggle('hidden');
                });
            }
            
            // Adicionar evento para fechar sidebar em telas pequenas ao clicar em link
            if (window.innerWidth < 768) {
                sidebarLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        sidebar.classList.add('hidden');
                    });
                });
            }
            
            // Painel de notificações
            const btnNotifications = document.getElementById('btn-notifications');
            const notificationsPanel = document.getElementById('notifications-panel');
            const closeNotifications = document.getElementById('close-notifications');
            
            if (btnNotifications && notificationsPanel && closeNotifications) {
                btnNotifications.addEventListener('click', () => {
                    notificationsPanel.classList.toggle('translate-x-full');
                    carregarNotificacoes();
                });
                
                closeNotifications.addEventListener('click', () => {
                    notificationsPanel.classList.add('translate-x-full');
                });
            }
            
            // Tabs do dashboard
            const dashboardTabs = document.querySelectorAll('#content-dashboard .dashboard-tab');
            const dashboardTabContents = document.querySelectorAll('#content-dashboard .dashboard-tab-content');
            
            dashboardTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remover classe ativa de todas as tabs
                    dashboardTabs.forEach(t => t.classList.remove('tab-active'));
                    
                    // Adicionar classe ativa à tab clicada
                    tab.classList.add('tab-active');
                    
                    // Esconder todos os conteúdos
                    dashboardTabContents.forEach(content => content.classList.add('hidden'));
                    
                    // Mostrar conteúdo correspondente
                    const tabId = tab.dataset.tab;
                    const tabContent = document.getElementById(`tab-${tabId}`);
                    if (tabContent) {
                        tabContent.classList.remove('hidden');
                    }
                    
                    // Reajustar gráficos quando visíveis
                    setTimeout(() => {
                        window.dispatchEvent(new Event('resize'));
                    }, 100);
                });
            });
            
            // Tabs de caminhões
            const caminhoesTabs = document.querySelectorAll('#content-caminhoes .caminhoes-tab');
            const caminhoesTabContents = document.querySelectorAll('#content-caminhoes .caminhoes-tab-content');
            
            caminhoesTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remover classe ativa de todas as tabs
                    caminhoesTabs.forEach(t => t.classList.remove('tab-active'));
                    
                    // Adicionar classe ativa à tab clicada
                    tab.classList.add('tab-active');
                    
                    // Esconder todos os conteúdos
                    caminhoesTabContents.forEach(content => content.classList.add('hidden'));
                    
                    // Mostrar conteúdo correspondente
                    const tabId = tab.dataset.tab;
                    const tabContent = document.getElementById(`tab-${tabId}`);
                    if (tabContent) {
                        tabContent.classList.remove('hidden');
                    }
                    
                    // Reajustar gráficos quando visíveis
                    setTimeout(() => {
                        window.dispatchEvent(new Event('resize'));
                    }, 100);
                });
            });
        }
        
        // Carregar notificações
        function carregarNotificacoes() {
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);
            
            const notificacoes = DB.notifications.getAll();
            const notificacoesHoje = [];
            const notificacoesAnteriores = [];
            
            // Separar notificações por data
            notificacoes.forEach(notif => {
                const dataNotif = new Date(notif.dataHora);
                dataNotif.setHours(0, 0, 0, 0);
                
                if (dataNotif.getTime() === hoje.getTime()) {
                    notificacoesHoje.push(notif);
                } else {
                    notificacoesAnteriores.push(notif);
                }
            });
            
            // Ordenar por data (mais recentes primeiro)
            notificacoesHoje.sort((a, b) => new Date(b.dataHora) - new Date(a.dataHora));
            notificacoesAnteriores.sort((a, b) => new Date(b.dataHora) - new Date(a.dataHora));
            
            // Função para criar elemento de notificação
            function criarElementoNotificacao(notif) {
                const element = document.createElement('div');
                element.classList.add('p-3', 'rounded-md', notif.lida ? 'bg-gray-100' : 'bg-white', 'dark:bg-gray-800', 'shadow-sm');
                
                if (!notif.lida) {
                    element.classList.add('border-l-4', 'border-primary-500');
                }
                
                // Determinar ícone com base no tipo
                let icone = '';
                
                switch (notif.tipo) {
                    case 'success':
                        icone = '<i class="fas fa-check-circle text-green-500"></i>';
                        break;
                    case 'error':
                        icone = '<i class="fas fa-exclamation-circle text-red-500"></i>';
                        break;
                    case 'warn':
                        icone = '<i class="fas fa-exclamation-triangle text-yellow-500"></i>';
                        break;
                    default:
                        icone = '<i class="fas fa-info-circle text-blue-500"></i>';
                }
                
                // Obter hora formatada
                const hora = new Date(notif.dataHora).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                
                element.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex items-start">
                            <div class="mr-2">
                                ${icone}
                            </div>
                            <div>
                                <h4 class="text-sm font-medium text-gray-900 dark:text-white">${notif.titulo}</h4>
                                <p class="text-xs text-gray-600 dark:text-gray-300">${notif.mensagem}</p>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap ml-2">
                            ${hora}
                        </div>
                    </div>
                `;
                
                // Adicionar evento de clique para marcar como lida
                if (!notif.lida) {
                    element.addEventListener('click', () => {
                        DB.notifications.markAsRead(notif.id);
                        carregarNotificacoes();
                        atualizarContadorNotificacoes();
                    });
                    element.classList.add('cursor-pointer', 'hover:bg-gray-50', 'dark:hover:bg-gray-700');
                }
                
                return element;
            }
            
            // Atualizar container de notificações de hoje
            const containerHoje = document.querySelector('.notificacoes-hoje');
            containerHoje.innerHTML = '';
            
            if (notificacoesHoje.length === 0) {
                containerHoje.innerHTML = '<p class="text-sm text-gray-500 dark:text-gray-400">Nenhuma notificação hoje</p>';
            } else {
                notificacoesHoje.forEach(notif => {
                    containerHoje.appendChild(criarElementoNotificacao(notif));
                });
            }
            
            // Atualizar container de notificações anteriores
            const containerAnteriores = document.querySelector('.notificacoes-anteriores');
            containerAnteriores.innerHTML = '';
            
            if (notificacoesAnteriores.length === 0) {
                containerAnteriores.innerHTML = '<p class="text-sm text-gray-500 dark:text-gray-400">Nenhuma notificação anterior</p>';
            } else {
                notificacoesAnteriores.forEach(notif => {
                    containerAnteriores.appendChild(criarElementoNotificacao(notif));
                });
            }
        }
        
        // Configurar painel de notificações
        function configurarPainelNotificacoes() {
            // Eventos para marcar notificações como lidas
            const btnMarcarTodas = document.getElementById('btn-marcar-todas-lidas');
            if (btnMarcarTodas) {
                btnMarcarTodas.addEventListener('click', () => {
                    DB.notifications.markAllAsRead();
                    carregarNotificacoes();
                    atualizarContadorNotificacoes();
                    
                    mostrarToast('Todas as notificações foram marcadas como lidas', 'success');
                });
            }
        }
        
        // Carregar dados do dashboard
        function carregarDadosDashboard() {
            // Obter período selecionado
            const periodoSelecionado = Number(document.getElementById('dashboard-period').value);
            
            // Obter dados de produção
            const estatisticas = DB.registros.getEquipmentStats();
            const diasParados = DB.chuvas.getTotalDias(periodoSelecionado);
            
            // Calcular totais
            let totalQuantidade = 0;
            let totalHoras = 0;
            
            estatisticas.forEach(equip => {
                totalQuantidade += equip.quantidade;
                totalHoras += equip.horas;
            });
            
            // Calcular médias
            const mediaPorColhedora = estatisticas.length > 0 ? totalQuantidade / estatisticas.length : 0;
            const rendimentoMedio = totalHoras > 0 ? totalQuantidade / totalHoras : 0;
            
            // Obter registros diários
            const registros = DB.registros.getAll();
            const diasUnicos = new Set(registros.map(reg => reg.data)).size;
            
            // Calcular média diária
            const mediaDiaria = diasUnicos > 0 ? totalQuantidade / diasUnicos : 0;
            
            // ALTERAÇÃO PRINCIPAL: Calcular produção do dia atual a partir de dados reais
            const dadosDia = DB.registros.getDailyStats();
            
            // Atualizar cards do dia
            document.getElementById('producao-hoje-total').textContent = `${formatarNumero(dadosDia.quantidade)} T`;
            document.getElementById('producao-hoje-hora').textContent = `${formatarNumero(dadosDia.produtividadeHora)} T/h`;
            
            // NOVA FUNCIONALIDADE: Adicionar indicador visual quando não há dados para hoje
            const cardProducaoHoje = document.getElementById('card-producao-hoje');
            const cardProdutividadeHoje = document.getElementById('card-produtividade-hoje');
            
            // Limpar indicadores visuais e avisos anteriores
            cardProducaoHoje.classList.remove('opacity-50');
            cardProdutividadeHoje.classList.remove('opacity-50');
            const avisosAnteriores = document.querySelectorAll('.aviso-sem-registros');
            avisosAnteriores.forEach(aviso => aviso.remove());
            
            // Caso não haja registros hoje, adicionar indicação visual
            if (!dadosDia.temRegistrosHoje) {
                cardProducaoHoje.classList.add('opacity-50');
                cardProdutividadeHoje.classList.add('opacity-50');
                
                // Adicionar aviso nos cards
                const aviso = document.createElement('div');
                aviso.className = 'text-xs text-gray-500 dark:text-gray-400 mt-2 aviso-sem-registros';
                aviso.textContent = 'Nenhum registro para hoje';
                
                // Adicionar o aviso ao primeiro card
                document.getElementById('producao-hoje-total').parentElement.appendChild(aviso.cloneNode(true));
                
                // Adicionar aviso semelhante ao segundo card
                document.getElementById('producao-hoje-hora').parentElement.appendChild(aviso.cloneNode(true));
            }
            
            // Tendências simuladas
            const tendenciaTotal = Math.random() > 0.5 ? 5 + Math.random() * 15 : -5 - Math.random() * 15;
            const tendenciaMedia = Math.random() > 0.5 ? 3 + Math.random() * 12 : -3 - Math.random() * 12;
            const tendenciaProdutivaHora = Math.random() > 0.5 ? 4 + Math.random() * 10 : -4 - Math.random() * 10;
            const tendenciaParadas = Math.random() > 0.5 ? -2 - Math.random() * 8 : 2 + Math.random() * 8;
            
            // Atualizar cards
            document.getElementById('dash-total-colhido').textContent = `${formatarNumero(totalQuantidade)} T`;
            document.getElementById('dash-media-geral').textContent = `${formatarNumero(mediaDiaria)} T/dia`;
            document.getElementById('dash-media-dia').textContent = `${formatarNumero(rendimentoMedio)} T/h`;
            document.getElementById('dash-paradas-chuva').textContent = `${formatarNumero(diasParados, 1)} dias`;
            
            // Tendências
            document.getElementById('dash-total-trend').innerHTML = `
                <i class="fas fa-arrow-${tendenciaTotal >= 0 ? 'up' : 'down'} mr-1 text-${tendenciaTotal >= 0 ? 'green' : 'red'}-500"></i>
                <span>${formatarNumero(Math.abs(tendenciaTotal))}% vs. período anterior</span>
            `;
            
            document.getElementById('dash-media-trend').innerHTML = `
                <i class="fas fa-arrow-${tendenciaMedia >= 0 ? 'up' : 'down'} mr-1 text-${tendenciaMedia >= 0 ? 'green' : 'red'}-500"></i>
                <span>${formatarNumero(Math.abs(tendenciaMedia))}% vs. período anterior</span>
            `;
            
            document.getElementById('dash-media-dia-trend').innerHTML = `
                <i class="fas fa-arrow-${tendenciaProdutivaHora >= 0 ? 'up' : 'down'} mr-1 text-${tendenciaProdutivaHora >= 0 ? 'green' : 'red'}-500"></i>
                <span>${formatarNumero(Math.abs(tendenciaProdutivaHora))}% vs. período anterior</span>
            `;
            
            document.getElementById('dash-paradas-trend').innerHTML = `
                <i class="fas fa-arrow-${tendenciaParadas >= 0 ? 'up' : 'down'} mr-1 text-${tendenciaParadas < 0 ? 'green' : 'red'}-500"></i>
                <span>${formatarNumero(Math.abs(tendenciaParadas))}% vs. período anterior</span>
            `;
            
            // Atualizar barras de progresso
            document.getElementById('dash-total-progress').style.width = `${Math.min(100, (totalQuantidade / 1000) * 100)}%`;
            document.getElementById('dash-media-progress').style.width = `${Math.min(100, (mediaDiaria / 50) * 100)}%`;
            document.getElementById('dash-media-dia-progress').style.width = `${Math.min(100, (rendimentoMedio / 20) * 100)}%`;
            document.getElementById('dash-paradas-progress').style.width = `${Math.min(100, (diasParados / 10) * 100)}%`;
            
            // Atualizar estatísticas rápidas
            document.getElementById('quick-total-colhido').textContent = `${formatarNumero(totalQuantidade)} T`;
            document.getElementById('quick-colhedoras').textContent = estatisticas.length;
            document.getElementById('quick-paradas-chuva').textContent = `${formatarNumero(diasParados, 1)} dias`;
            
            // Preencher tabela de equipamentos
            const tabelaEquip = document.getElementById('tabela-medias-equipamentos');
            if (tabelaEquip) {
                tabelaEquip.innerHTML = '';
                
                if (estatisticas.length === 0) {
                    tabelaEquip.innerHTML = `
                        <tr>
                            <td colspan="4" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                } else {
                    // Ordenar por produtividade (maior para menor)
                    estatisticas.sort((a, b) => b.rendimento - a.rendimento);
                    
                    // Adicionar cada linha
                    estatisticas.forEach(equip => {
                        const mediaDiariaEquip = equip.registros > 0 ? equip.quantidade / equip.registros : 0;
                        const rendimentoEquip = equip.horas > 0 ? equip.quantidade / equip.horas : 0;
                        
                        // Calcular eficiência (simulada)
                        const eficiencia = Math.min(100, (rendimentoEquip / rendimentoMedio) * 100);
                        
                        // Determinar classe de eficiência
                        let eficienciaClasse = 'text-yellow-500 dark:text-yellow-400';
                        let eficienciaIcone = `<i class="fas fa-star mr-1"></i>`;
                        
                        if (eficiencia >= 100) {
                            eficienciaClasse = 'text-green-500 dark:text-green-400';
                            eficienciaIcone = `<i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i>`;
                        } else if (eficiencia >= 80) {
                            eficienciaClasse = 'text-green-500 dark:text-green-400';
                            eficienciaIcone = `<i class="fas fa-star mr-1"></i><i class="fas fa-star mr-1"></i>`;
                        } else if (eficiencia < 50) {
                            eficienciaClasse = 'text-red-500 dark:text-red-400';
                            eficienciaIcone = `<i class="fas fa-exclamation-triangle mr-1"></i>`;
                        }
                        
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${equip.id}</td>
                            <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(mediaDiariaEquip)}</td>
                            <td class="px-4 py-3 text-right text-blue-600 dark:text-blue-400">${formatarNumero(rendimentoEquip)}</td>
                            <td class="px-4 py-3 text-right ${eficienciaClasse} font-medium">${eficienciaIcone} ${formatarNumero(eficiencia)}%</td>
                        `;
                        
                        tabelaEquip.appendChild(row);
                    });
                }
            }
            
            // Calcular melhores estatísticas
            let melhorRendimento = { id: '-', valor: 0 };
            let maiorVolume = { id: '-', valor: 0 };
            let melhorMedia = { id: '-', valor: 0 };
            
            estatisticas.forEach(equip => {
                const rendimento = equip.horas > 0 ? equip.quantidade / equip.horas : 0;
                const mediaDiaria = equip.registros > 0 ? equip.quantidade / equip.registros : 0;
                
                if (rendimento > melhorRendimento.valor) {
                    melhorRendimento = { id: equip.id, valor: rendimento };
                }
                
                if (equip.quantidade > maiorVolume.valor) {
                    maiorVolume = { id: equip.id, valor: equip.quantidade };
                }
                
                if (mediaDiaria > melhorMedia.valor) {
                    melhorMedia = { id: equip.id, valor: mediaDiaria };
                }
            });
            
            // Atualizar melhores colhedoras
            document.getElementById('best-yield-colhedora').textContent = melhorRendimento.id;
            document.getElementById('best-yield-value').textContent = `${formatarNumero(melhorRendimento.valor)} T/h`;
            
            document.getElementById('best-volume-colhedora').textContent = maiorVolume.id;
            document.getElementById('best-volume-value').textContent = `${formatarNumero(maiorVolume.valor)} T`;
            
            document.getElementById('best-daily-colhedora').textContent = melhorMedia.id;
            document.getElementById('best-daily-value').textContent = `${formatarNumero(melhorMedia.valor)} T/dia`;
            
            // Calcular estatísticas por cultura
            const culturas = {};
            
            registros.forEach(reg => {
                if (!reg.cultura) return;
                
                if (!culturas[reg.cultura]) {
                    culturas[reg.cultura] = {
                        nome: reg.cultura,
                        quantidade: 0,
                        horas: 0,
                        registros: 0
                    };
                }
                
                culturas[reg.cultura].quantidade += Number(reg.quantidade) || 0;
                culturas[reg.cultura].horas += Number(reg.horas) || 0;
                culturas[reg.cultura].registros += 1;
            });
            
            // Calcular melhores culturas
            let melhorRendimentoCultura = { nome: '-', valor: 0 };
            let maiorVolumeCultura = { nome: '-', valor: 0 };
            let melhorMediaCultura = { nome: '-', valor: 0 };
            
            Object.values(culturas).forEach(cultura => {
                const rendimento = cultura.horas > 0 ? cultura.quantidade / cultura.horas : 0;
                const mediaDiaria = cultura.registros > 0 ? cultura.quantidade / cultura.registros : 0;
                
                if (rendimento > melhorRendimentoCultura.valor) {
                    melhorRendimentoCultura = { nome: cultura.nome, valor: rendimento };
                }
                
                if (cultura.quantidade > maiorVolumeCultura.valor) {
                    maiorVolumeCultura = { nome: cultura.nome, valor: cultura.quantidade };
                }
                
                if (mediaDiaria > melhorMediaCultura.valor) {
                    melhorMediaCultura = { nome: cultura.nome, valor: mediaDiaria };
                }
            });
            
            // Atualizar melhores culturas
            document.getElementById('best-yield-cultura').textContent = melhorRendimentoCultura.nome;
            document.getElementById('best-yield-cultura-value').textContent = `${formatarNumero(melhorRendimentoCultura.valor)} T/h`;
            
            document.getElementById('best-volume-cultura').textContent = maiorVolumeCultura.nome;
            document.getElementById('best-volume-cultura-value').textContent = `${formatarNumero(maiorVolumeCultura.valor)} T`;
            
            document.getElementById('best-daily-cultura').textContent = melhorMediaCultura.nome;
            document.getElementById('best-daily-cultura-value').textContent = `${formatarNumero(melhorMediaCultura.valor)} T/dia`;
            
            // Gráfico de distribuição por cultura
            const ctxCulturas = document.getElementById('chart-culturas');
            if (ctxCulturas) {
                const ctx = ctxCulturas.getContext('2d');
                if (window.chartCulturas) window.chartCulturas.destroy();
                
                const culturasList = Object.values(culturas);
                
                // Ordenar culturas por quantidade (maior para menor)
                culturasList.sort((a, b) => b.quantidade - a.quantidade);
                
                // Limitar a 5 culturas para melhor visualização
                const topCulturas = culturasList.slice(0, 5);
                
                // Calcular outras culturas se houver mais que 5
                let outrasCulturas = 0;
                if (culturasList.length > 5) {
                    for (let i = 5; i < culturasList.length; i++) {
                        outrasCulturas += culturasList[i].quantidade;
                    }
                    
                    // Adicionar "Outras" à lista
                    if (outrasCulturas > 0) {
                        topCulturas.push({
                            nome: 'Outras',
                            quantidade: outrasCulturas
                        });
                    }
                }
                
                window.chartCulturas = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: topCulturas.map(c => c.nome),
                        datasets: [
                            {
                                data: topCulturas.map(c => c.quantidade),
                                backgroundColor: [
                                    'rgba(59, 130, 246, 0.7)',   // Azul
                                    'rgba(52, 211, 153, 0.7)',   // Verde
                                    'rgba(245, 158, 11, 0.7)',   // Amarelo
                                    'rgba(239, 68, 68, 0.7)',    // Vermelho
                                    'rgba(139, 92, 246, 0.7)',   // Roxo
                                    'rgba(156, 163, 175, 0.7)'   // Cinza (para "Outras")
                                ],
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        plugins: {
                            legend: {
                                display: true,
                                position: 'right',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const value = context.raw;
                                        const total = context.dataset.data.reduce((sum, val) => sum + val, 0);
                                        const percentage = total > 0 ? ((value / total) * 100).toFixed(1) : 0;
                                        return `${formatarNumero(value)} T (${percentage}%)`;
                                    }
                                }
                            }
                        },
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
            
            // Gráfico comparativo de colhedoras
            const ctxColhedoras = document.getElementById('chart-colhedoras-comparacao');
            if (ctxColhedoras) {
                const ctx = ctxColhedoras.getContext('2d');
                if (window.chartColhedoras) window.chartColhedoras.destroy();
                
                // Ordenar colhedoras por quantidade (maior para menor)
                const colhedorasOrdenadas = [...estatisticas].sort((a, b) => b.quantidade - a.quantidade);
                
                // Limitar a 5 colhedoras para melhor visualização
                const topColhedoras = colhedorasOrdenadas.slice(0, 5);
                
                window.chartColhedoras = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: topColhedoras.map(c => c.id),
                        datasets: [
                            {
                                label: 'Produção Total (T)',
                                data: topColhedoras.map(c => c.quantidade),
                                backgroundColor: 'rgba(59, 130, 246, 0.7)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Rendimento (T/h)',
                                data: topColhedoras.map(c => c.horas > 0 ? c.quantidade / c.horas : 0),
                                backgroundColor: 'rgba(52, 211, 153, 0.7)',
                                borderColor: 'rgba(52, 211, 153, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Quantidade'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
            
            // Gráfico de produção ao longo do tempo
            const ctxProducao = document.getElementById('chart-producao-tempo');
            if (ctxProducao) {
                const ctx = ctxProducao.getContext('2d');
                if (window.chartProducao) window.chartProducao.destroy();
                
                // Agrupar por data
                const producaoPorDia = {};
                
                // Obter dados dos últimos 14 dias (ou menos se não houver)
                const hoje = new Date();
                const limiteDias = 14;
                
                // Inicializar datas dos últimos dias
                for (let i = 0; i < limiteDias; i++) {
                    const data = new Date(hoje);
                    data.setDate(hoje.getDate() - i);
                    const dataStr = data.toISOString().split('T')[0];
                    
                    producaoPorDia[dataStr] = {
                        data: dataStr,
                        quantidade: 0,
                        horas: 0,
                        rendimento: 0
                    };
                }
                
                // Preencher com dados reais
                registros.forEach(reg => {
                    if (producaoPorDia[reg.data]) {
                        producaoPorDia[reg.data].quantidade += Number(reg.quantidade) || 0;
                        producaoPorDia[reg.data].horas += Number(reg.horas) || 0;
                    }
                });
                
                // Calcular rendimento
                Object.values(producaoPorDia).forEach(dia => {
                    dia.rendimento = dia.horas > 0 ? dia.quantidade / dia.horas : 0;
                });
                
                // Converter para array e ordenar por data (mais antigo primeiro)
                const dadosDiarios = Object.values(producaoPorDia).sort((a, b) => new Date(a.data) - new Date(b.data));
                
                window.chartProducao = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: dadosDiarios.map(d => formatarData(d.data)),
                        datasets: [
                            {
                                label: 'Produção (T)',
                                data: dadosDiarios.map(d => d.quantidade),
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 2,
                                tension: 0.3,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Toneladas'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
            
            // Estatísticas de caminhões
            const statsCaminhoes = DB.caminhoes.getStats(periodoSelecionado);
            
            // Atualizar cards de caminhões
            document.getElementById('total-producao-caminhoes').textContent = `${formatarNumero(statsCaminhoes.totalProducao)} T`;
            document.getElementById('media-campo').textContent = `${formatarNumero(statsCaminhoes.mediaTempoCampo)} min`;
            document.getElementById('media-patio').textContent = `${formatarNumero(statsCaminhoes.mediaTempoPatio)} min`;
            document.getElementById('total-registros-caminhoes').textContent = statsCaminhoes.totalViagens;
            
            // Atualizar próprios vs terceiros
            document.getElementById('producao-proprios').textContent = `${formatarNumero(statsCaminhoes.proprios.producao)} T`;
            document.getElementById('producao-terceiros').textContent = `${formatarNumero(statsCaminhoes.terceiros.producao)} T`;
            
            // Gráfico de comparação de próprios vs terceiros
            const ctxPropTerceiros = document.getElementById('chart-proprios-terceiros');
            if (ctxPropTerceiros) {
                const ctx = ctxPropTerceiros.getContext('2d');
                if (window.chartPropTerceiros) window.chartPropTerceiros.destroy();
                
                window.chartPropTerceiros = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['Próprios', 'Terceiros'],
                        datasets: [
                            {
                                data: [statsCaminhoes.proprios.producao, statsCaminhoes.terceiros.producao],
                                backgroundColor: ['rgba(59, 130, 246, 0.7)', 'rgba(52, 211, 153, 0.7)'],
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        plugins: {
                            legend: {
                                position: 'bottom',
                            }
                        },
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
            
            // Estatísticas de chuvas
            const chuvas = DB.chuvas.getAll();
            const totalDiasChuva = DB.chuvas.getTotalDias();
            const ultimaChuva = DB.chuvas.getLastChuva();
            const impactoEstimado = DB.chuvas.calcularImpactoEstimado();
            
            // Atualizar cards de chuva
            document.getElementById('chuva-total-registros').textContent = chuvas.length;
            document.getElementById('chuva-total-dias').textContent = `${formatarNumero(totalDiasChuva, 1)} dias`;
            
            // Última parada
            if (ultimaChuva) {
                document.getElementById('chuva-ultima-parada').textContent = formatarData(ultimaChuva.dataFim);
            } else {
                document.getElementById('chuva-ultima-parada').textContent = '-';
            }
            
            // Impacto estimado
            document.getElementById('chuva-impacto-estimado').textContent = `${formatarNumero(impactoEstimado)} T`;
            
            // Gráfico de chuvas
            const ctxChuva = document.getElementById('chart-paradas-chuva');
            if (ctxChuva) {
                const ctx = ctxChuva.getContext('2d');
                if (window.chartChuva) window.chartChuva.destroy();
                
                // Ordenar registros por data (mais recentes primeiro)
                const chuvaMaisRecentes = [...chuvas].sort((a, b) => new Date(b.dataFim) - new Date(a.dataFim));
                
                // Limitar a 10 registros
                const limiteChuvas = chuvaMaisRecentes.slice(0, 10);
                
                window.chartChuva = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: limiteChuvas.map(c => formatarData(c.dataInicio)),
                        datasets: [
                            {
                                label: 'Dias Parados',
                                data: limiteChuvas.map(c => c.dias),
                                backgroundColor: 'rgba(59, 130, 246, 0.7)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Dias'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
            
            // Estatísticas gerais
            document.getElementById('qtd-colhedoras').textContent = DB.colhedoras.getAll().length;
            document.getElementById('qtd-registros').textContent = DB.registros.getAll().length;
            
            // Uso de armazenamento
            const localStorageUsed = Object.keys(localStorage).reduce((total, key) => {
                return total + ((localStorage[key].length + key.length) * 2);
            }, 0);
            
            // Armazenamento em KB
            const localStorageUsedKB = localStorageUsed / 1024;
            
            // Considerando limite de 5MB para localStorage
            const localStorageLimit = 5 * 1024; // 5MB em KB
            
            // Calcular porcentagem
            const storagePercentage = (localStorageUsedKB / localStorageLimit) * 100;
            
            // Atualizar elementos
            document.getElementById('storage-percentage').textContent = `${formatarNumero(storagePercentage, 1)}%`;
            document.getElementById('storage-progress').style.width = `${Math.min(100, storagePercentage)}%`;
            
            // Browser Info
            const browserInfo = navigator.userAgent;
            document.getElementById('browser-info').textContent = browserInfo.includes('Firefox') ? 'Firefox' : 
                                                               browserInfo.includes('Chrome') ? 'Chrome' : 
                                                               browserInfo.includes('Safari') ? 'Safari' : 
                                                               browserInfo.includes('Edge') ? 'Edge' : 
                                                               'Outro';
            
            // Último acesso
            const config = JSON.parse(localStorage.getItem('ggomes_config') || '{}');
            if (config.ultimoAcesso) {
                document.getElementById('ultimo-acesso').textContent = formatarData(config.ultimoAcesso);
            }
        }
        
        // Carregar conteúdo da página de colhedoras
        function carregarPaginaColhedoras() {
            const colhedoras = DB.colhedoras.getAll();
            const tabelaColhedoras = document.getElementById('tabela-colhedoras-lista');
            
            if (!tabelaColhedoras) return;
            
            tabelaColhedoras.innerHTML = '';
            
            if (colhedoras.length === 0) {
                tabelaColhedoras.innerHTML = `
                    <tr>
                        <td colspan="4" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                            Nenhuma colhedora cadastrada
                        </td>
                    </tr>
                `;
            } else {
                colhedoras.forEach(colhedora => {
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${colhedora.id}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${colhedora.marca}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${colhedora.ano || "-"}</td>
                        <td class="px-4 py-3 text-center">
                            <button class="btn-editar-colhedora px-2 py-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300" data-id="${colhedora.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-excluir-colhedora px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${colhedora.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tabelaColhedoras.appendChild(row);
                });
                
                // Adicionar eventos de edição e exclusão
                document.querySelectorAll('.btn-editar-colhedora').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        const colhedora = DB.colhedoras.get(id);
                        
                        if (colhedora) {
                            // Preencher formulário com os dados
                            document.getElementById('colhedora-id').value = colhedora.id;
                            document.getElementById('colhedora-id').disabled = true;
                            document.getElementById('colhedora-marca').value = colhedora.marca || '';
                            document.getElementById('colhedora-modelo').value = colhedora.modelo || '';
                            document.getElementById('colhedora-ano').value = colhedora.ano || '';
                            document.getElementById('colhedora-observacoes').value = colhedora.observacoes || '';
                            
                            // Alterar texto do botão
                            const submitBtn = document.querySelector('#form-colhedora button[type="submit"]');
                            submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i> Atualizar Colhedora';
                            
                            // Rolar para o formulário
                            document.getElementById('form-colhedora').scrollIntoView({ behavior: 'smooth' });
                        }
                    });
                });
                
                document.querySelectorAll('.btn-excluir-colhedora').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        if (confirm(`Deseja realmente excluir a colhedora ${id}?`)) {
                            try {
                                DB.colhedoras.remove(id);
                                mostrarToast(`Colhedora ${id} excluída com sucesso!`, 'success');
                                carregarPaginaColhedoras();
                            } catch (error) {
                                mostrarToast(`Erro ao excluir colhedora: ${error.message}`, 'error');
                            }
                        }
                    });
                });
            }
            
            // Configurar formulário de colhedora
            const formColhedora = document.getElementById('form-colhedora');
            if (formColhedora) {
                formColhedora.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const colhedoraId = document.getElementById('colhedora-id').value;
                    const isEditing = document.getElementById('colhedora-id').disabled;
                    
                    const colhedora = {
                        id: colhedoraId,
                        marca: document.getElementById('colhedora-marca').value,
                        modelo: document.getElementById('colhedora-modelo').value,
                        ano: document.getElementById('colhedora-ano').value,
                        observacoes: document.getElementById('colhedora-observacoes').value
                    };
                    
                    try {
                        if (isEditing) {
                            DB.colhedoras.update(colhedora);
                            mostrarToast(`Colhedora ${colhedora.id} atualizada com sucesso!`, 'success');
                        } else {
                            DB.colhedoras.add(colhedora);
                            mostrarToast(`Colhedora ${colhedora.id} cadastrada com sucesso!`, 'success');
                        }
                        
                       // Limpar formulário
                        formColhedora.reset();
                        document.getElementById('colhedora-id').disabled = false;
                        
                        // Restaurar texto do botão
                        const submitBtn = document.querySelector('#form-colhedora button[type="submit"]');
                        submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i> Salvar Colhedora';
                        
                        // Recarregar tabela
                        carregarPaginaColhedoras();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
                
                // Botão para adicionar nova colhedora
                const btnAddColhedora = document.getElementById('btn-add-colhedora');
                if (btnAddColhedora) {
                    btnAddColhedora.addEventListener('click', function() {
                        // Limpar formulário
                        formColhedora.reset();
                        document.getElementById('colhedora-id').disabled = false;
                        
                        // Restaurar texto do botão
                        const submitBtn = document.querySelector('#form-colhedora button[type="submit"]');
                        submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i> Salvar Colhedora';
                        
                        // Rolar para o formulário
                        formColhedora.scrollIntoView({ behavior: 'smooth' });
                    });
                }
            }
        }
        
        // Carregar conteúdo da página de registros
        function carregarPaginaRegistros() {
            // Preencher select de colhedoras
            const colhedoras = DB.colhedoras.getAll();
            const selectColhedora = document.getElementById('registro-colhedora');
            
            if (selectColhedora) {
                // Manter a opção padrão
                selectColhedora.innerHTML = '<option value="">Selecione uma colhedora</option>';
                
                colhedoras.forEach(colhedora => {
                    const option = document.createElement('option');
                    option.value = colhedora.id;
                    option.textContent = `${colhedora.id} - ${colhedora.marca} ${colhedora.modelo ? `(${colhedora.modelo})` : ''}`;
                    selectColhedora.appendChild(option);
                });
            }
            
            // Configurar data atual
            const inputData = document.getElementById('registro-data');
            if (inputData) {
                const dataAtual = new Date().toISOString().split('T')[0];
                inputData.value = dataAtual;
            }
            
            // Configurar formulário de registro
            const formRegistro = document.getElementById('form-registro');
            if (formRegistro) {
                formRegistro.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const registro = {
                        data: document.getElementById('registro-data').value,
                        colhedoraId: document.getElementById('registro-colhedora').value,
                        cultura: document.getElementById('registro-cultura').value,
                        quantidade: Number(document.getElementById('registro-quantidade').value),
                        horas: Number(document.getElementById('registro-horas').value),
                        combustivel: Number(document.getElementById('registro-combustivel').value),
                        observacoes: document.getElementById('registro-observacoes').value
                    };
                    
                    try {
                        DB.registros.add(registro);
                        mostrarToast(`Registro adicionado com sucesso!`, 'success');
                        
                        // Limpar formulário, mas manter data
                        const data = document.getElementById('registro-data').value;
                        formRegistro.reset();
                        document.getElementById('registro-data').value = data;
                        
                        // Recarregar estatísticas
                        carregarEstatisticasProducao();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
            }
            
            // Carregar estatísticas de produção
            carregarEstatisticasProducao();
            
            function carregarEstatisticasProducao() {
                const estatisticas = DB.registros.getEquipmentStats();
                const registros = DB.registros.getAll();
                const diasParados = DB.chuvas.getTotalDias();
                
                // Calcular totais
                let totalQuantidade = 0;
                let totalHoras = 0;
                
                estatisticas.forEach(equip => {
                    totalQuantidade += equip.quantidade;
                    totalHoras += equip.horas;
                });
                
                // Calcular rendimento médio
                const rendimentoMedio = totalHoras > 0 ? totalQuantidade / totalHoras : 0;
                
                // Atualizar cards
                document.getElementById('total-colhido').textContent = `${formatarNumero(totalQuantidade)} T`;
                document.getElementById('rendimento-medio').textContent = `${formatarNumero(rendimentoMedio)} T/h`;
                document.getElementById('paradas-chuva-total').textContent = `${formatarNumero(diasParados, 1)} dias`;
                
                // Atualizar tabela de colhedoras
                const tabelaColhedoras = document.getElementById('tabela-colhedoras');
                
                if (!tabelaColhedoras) return;
                
                tabelaColhedoras.innerHTML = '';
                
                if (estatisticas.length === 0) {
                    tabelaColhedoras.innerHTML = `
                        <tr>
                            <td colspan="3" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                } else {
                    // Ordenar por rendimento (maior para menor)
                    estatisticas.sort((a, b) => b.rendimento - a.rendimento);
                    
                    estatisticas.forEach(equip => {
                        const mediaDiariaEquip = equip.registros > 0 ? equip.quantidade / equip.registros : 0;
                        const rendimentoEquip = equip.rendimento;
                        
                        const row = document.createElement('tr');
                        row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                        
                        row.innerHTML = `
                            <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${equip.id}</td>
                            <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(equip.quantidade)}</td>
                            <td class="px-4 py-3 text-right text-blue-600 dark:text-blue-400">${formatarNumero(rendimentoEquip)}</td>
                        `;
                        
                        tabelaColhedoras.appendChild(row);
                    });
                }
            }
        }
        
        // Carregar conteúdo da página de histórico
        function carregarPaginaHistorico() {
            // Obter todos os registros e colhedoras
            const registros = DB.registros.getAll();
            const colhedoras = DB.colhedoras.getAll();
            
            // Extrair culturas únicas
            const culturas = [...new Set(registros.map(reg => reg.cultura).filter(Boolean))];
            
            // Preencher select de colhedoras
            const selectColhedora = document.getElementById('filtro-colhedora');
            
            if (selectColhedora) {
                // Manter a opção padrão
                selectColhedora.innerHTML = '<option value="">Todas</option>';
                
                colhedoras.forEach(colhedora => {
                    const option = document.createElement('option');
                    option.value = colhedora.id;
                    option.textContent = colhedora.id;
                    selectColhedora.appendChild(option);
                });
            }
            
            // Preencher select de culturas
            const selectCultura = document.getElementById('filtro-cultura');
            
            if (selectCultura) {
                // Manter a opção padrão
                selectCultura.innerHTML = '<option value="">Todas</option>';
                
                // Adicionar cada cultura única
                culturas.forEach(cultura => {
                    const option = document.createElement('option');
                    option.value = cultura;
                    option.textContent = cultura;
                    selectCultura.appendChild(option);
                });
            }
            
            // Preencher tabela de registros
            function preencherTabelaRegistros(registrosFiltrados) {
                const tabela = document.getElementById('tabela-registros');
                
                if (!tabela) return;
                
                tabela.innerHTML = '';
                
                if (registrosFiltrados.length === 0) {
                    tabela.innerHTML = `
                        <tr>
                            <td colspan="7" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                // Ordenar por data (mais recentes primeiro)
                registrosFiltrados.sort((a, b) => new Date(b.data) - new Date(a.data));
                
                registrosFiltrados.forEach(reg => {
                    const rendimento = reg.horas > 0 ? reg.quantidade / reg.horas : 0;
                    
                    const row = document.createElement('tr');
                    row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                    
                    row.innerHTML = `
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${formatarData(reg.data)}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${reg.colhedoraId}</td>
                        <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${reg.cultura}</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(reg.quantidade)}</td>
                        <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(reg.horas, 1)}</td>
                        <td class="px-4 py-3 text-right text-blue-600 dark:text-blue-400">${formatarNumero(rendimento)}</td>
                        <td class="px-4 py-3 text-center">
                            <button class="btn-excluir-registro px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${reg.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tabela.appendChild(row);
                });
                
                // Adicionar evento de exclusão
                document.querySelectorAll('.btn-excluir-registro').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = this.dataset.id;
                        
                        if (confirm(`Deseja realmente excluir o registro ${id}?`)) {
                            try {
                                DB.registros.remove(id);
                                mostrarToast(`Registro excluído com sucesso!`, 'success');
                                aplicarFiltros();
                            } catch (error) {
                                mostrarToast(`Erro ao excluir registro: ${error.message}`, 'error');
                            }
                        }
                    });
                });
                
                // Atualizar contagem
                document.getElementById('registros-contagem').textContent = registrosFiltrados.length;
            }
            
            // Aplicar filtros
            function aplicarFiltros() {
                const colhedora = document.getElementById('filtro-colhedora').value;
                const cultura = document.getElementById('filtro-cultura').value;
                const dataInicio = document.getElementById('filtro-data-inicio').value;
                const dataFim = document.getElementById('filtro-data-fim').value;
                
                // Filtrar registros
                let registrosFiltrados = [...registros];
                
                if (colhedora) {
                    registrosFiltrados = registrosFiltrados.filter(reg => reg.colhedoraId === colhedora);
                }
                
                if (cultura) {
                    registrosFiltrados = registrosFiltrados.filter(reg => reg.cultura === cultura);
                }
                
                if (dataInicio) {
                    registrosFiltrados = registrosFiltrados.filter(reg => reg.data >= dataInicio);
                }
                
                if (dataFim) {
                    registrosFiltrados = registrosFiltrados.filter(reg => reg.data <= dataFim);
                }
                
                preencherTabelaRegistros(registrosFiltrados);
            }
            
            // Configurar botões de filtro
            const btnAplicarFiltros = document.getElementById('btn-aplicar-filtros');
            if (btnAplicarFiltros) {
                btnAplicarFiltros.addEventListener('click', aplicarFiltros);
            }
            
            const btnLimparFiltros = document.getElementById('btn-limpar-filtros');
            if (btnLimparFiltros) {
                btnLimparFiltros.addEventListener('click', function() {
                    document.getElementById('filtro-colhedora').value = '';
                    document.getElementById('filtro-cultura').value = '';
                    document.getElementById('filtro-data-inicio').value = '';
                    document.getElementById('filtro-data-fim').value = '';
                    
                    aplicarFiltros();
                });
            }
            
            // Exportar histórico
            const btnExportHistorico = document.getElementById('btn-export-historico');
            if (btnExportHistorico) {
                btnExportHistorico.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('registros');
                        mostrarToast('Relatório de histórico gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Inicialmente, mostrar todos os registros
            preencherTabelaRegistros(registros);
        }
        
        // Carregar conteúdo da página de chuvas
        function carregarPaginaChuvas() {
            // Configurar formulário
            const formChuva = document.getElementById('form-chuva');
            if (formChuva) {
                formChuva.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const chuva = {
                        dataInicio: document.getElementById('chuva-data-inicio').value,
                        dataFim: document.getElementById('chuva-data-fim').value,
                        dias: Number(document.getElementById('chuva-dias').value),
                        intensidade: document.getElementById('chuva-intensidade').value,
                        observacoes: document.getElementById('chuva-observacoes').value
                    };
                    
                    try {
                        DB.chuvas.add(chuva);
                        mostrarToast(`Registro de parada adicionado com sucesso!`, 'success');
                        
                        // Limpar formulário
                        formChuva.reset();
                        
                        // Recarregar dados
                        carregarPaginaChuvas();
                    } catch (error) {
                        mostrarToast(`Erro: ${error.message}`, 'error');
                    }
                });
            }
            
            // Carregar estatísticas
            const chuvas = DB.chuvas.getAll();
            const totalDias = DB.chuvas.getTotalDias();
            const ultimaChuva = DB.chuvas.getLastChuva();
            const impactoEstimado = DB.chuvas.calcularImpactoEstimado();
            
            // Atualizar cards
            document.getElementById('chuva-total-registros').textContent = `${chuvas.length} registros`;
            document.getElementById('chuva-total-dias').textContent = `${formatarNumero(totalDias, 1)} dias`;
            document.getElementById('chuva-ultima-parada').textContent = ultimaChuva ? formatarData(ultimaChuva.dataFim) : '-';
            document.getElementById('chuva-impacto-estimado').textContent = `${formatarNumero(impactoEstimado)} T`;
            
            // Preencher tabela de chuvas
            const tabelaChuvas = document.getElementById('tabela-chuvas');
            if (tabelaChuvas) {
                tabelaChuvas.innerHTML = '';
                
                if (chuvas.length === 0) {
                    tabelaChuvas.innerHTML = `
                        <tr>
                            <td colspan="5" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                Nenhum registro encontrado
                            </td>
                        </tr>
                    `;
                } else {
                    // Ordenar por data (mais recentes primeiro)
                    chuvas.sort((a, b) => new Date(b.dataFim) - new Date(a.dataFim));
                    
                    chuvas.forEach(chuva => {
                        const row = document.createElement('tr');
                        row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                        
                        // Mapear intensidade para texto mais amigável
                        let intensidadeTexto = 'Média';
                        let intensidadeClasse = 'text-yellow-600 dark:text-yellow-400';
                        
                        if (chuva.intensidade === 'baixa') {
                            intensidadeTexto = 'Baixa';
                            intensidadeClasse = 'text-green-600 dark:text-green-400';
                        } else if (chuva.intensidade === 'alta') {
                            intensidadeTexto = 'Alta';
                            intensidadeClasse = 'text-red-600 dark:text-red-400';
                        }
                        
                        row.innerHTML = `
                            <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${formatarPeriodo(chuva.dataInicio, chuva.dataFim)}</td>
                            <td class="px-4 py-3 text-center text-gray-700 dark:text-gray-300">${formatarNumero(chuva.dias, 1)}</td>
                            <td class="px-4 py-3 text-center ${intensidadeClasse} font-medium">${intensidadeTexto}</td>
                            <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${chuva.observacoes || '-'}</td>
                            <td class="px-4 py-3 text-center">
                                <button class="btn-excluir-chuva px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${chuva.id}">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </td>
                        `;
                        
                        tabelaChuvas.appendChild(row);
                    });
                    
                    // Adicionar evento de exclusão
                    document.querySelectorAll('.btn-excluir-chuva').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const id = this.dataset.id;
                            
                            if (confirm(`Deseja realmente excluir este registro de parada?`)) {
                                try {
                                    DB.chuvas.remove(id);
                                    mostrarToast(`Registro de parada excluído com sucesso!`, 'success');
                                    carregarPaginaChuvas();
                                } catch (error) {
                                    mostrarToast(`Erro ao excluir registro: ${error.message}`, 'error');
                                }
                            }
                        });
                    });
                }
            }
            
            // Exportar chuvas
            const btnExportChuvas = document.getElementById('btn-export-chuvas');
            if (btnExportChuvas) {
                btnExportChuvas.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('chuvas');
                        mostrarToast('Relatório de paradas gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
        }
        
        // Carregar conteúdo da página de caminhões
        function carregarPaginaCaminhoes() {
            // Carregar tabs
            const caminhoesTabs = document.querySelectorAll('#content-caminhoes .caminhoes-tab');
            const caminhoesTabContents = document.querySelectorAll('#content-caminhoes .caminhoes-tab-content');
            
            // Tab de cadastro de caminhões
            function carregarTabCadastro() {
                // Botão para adicionar novo caminhão
                const btnAddCaminhao = document.getElementById('btn-add-new-caminhao');
                const cardCadastro = document.getElementById('cadastro-caminhao-card');
                
                if (btnAddCaminhao && cardCadastro) {
                    btnAddCaminhao.addEventListener('click', function() {
                        cardCadastro.classList.remove('hidden');
                        document.getElementById('form-cadastro-caminhao').reset();
                        
                        // Desabilitar ID se estiver editando
                        document.getElementById('cadastro-caminhao-id').disabled = false;
                        
                        // Alterar texto do botão para Cadastrar
                        const submitBtn = document.querySelector('#form-cadastro-caminhao button[type="submit"]');
                        submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i> Cadastrar';
                        
                        cardCadastro.scrollIntoView({ behavior: 'smooth' });
                    });
                }
                
                // Botão para cancelar cadastro
                const btnCancelarCadastro = document.getElementById('btn-cancelar-cadastro-caminhao');
                if (btnCancelarCadastro) {
                    btnCancelarCadastro.addEventListener('click', function() {
                        cardCadastro.classList.add('hidden');
                    });
                }
                
                // Formulário de cadastro
                const formCadastroCaminhao = document.getElementById('form-cadastro-caminhao');
                if (formCadastroCaminhao) {
                    formCadastroCaminhao.addEventListener('submit', function(e) {
                        e.preventDefault();
                        
                        const caminhaoId = document.getElementById('cadastro-caminhao-id').value;
                        const isEditing = document.getElementById('cadastro-caminhao-id').disabled;
                        
                        // Obter tipo selecionado
                        const tipoProprioRadio = document.getElementById('tipo-proprio');
                        const tipo = tipoProprioRadio.checked ? 'proprio' : 'terceiro';
                        
                        const caminhao = {
                            id: caminhaoId,
                            placa: document.getElementById('cadastro-caminhao-placa').value,
                            modelo: document.getElementById('cadastro-caminhao-modelo').value,
                            tipo: tipo,
                            capacidade: Number(document.getElementById('cadastro-caminhao-capacidade').value) || 0,
                            motorista: document.getElementById('cadastro-caminhao-motorista').value,
                            observacoes: document.getElementById('cadastro-caminhao-observacoes').value
                        };
                        
                        try {
                            if (isEditing) {
                                DB.veiculosCadastrados.update(caminhao);
                                mostrarToast(`Caminhão ${caminhao.id} atualizado com sucesso!`, 'success');
                            } else {
                                DB.veiculosCadastrados.add(caminhao);
                                mostrarToast(`Caminhão ${caminhao.id} cadastrado com sucesso!`, 'success');
                            }
                            
                            // Limpar formulário e esconder card
                            formCadastroCaminhao.reset();
                            cardCadastro.classList.add('hidden');
                            
                            // Recarregar tabela
                            carregarTabelaCaminhoes();
                        } catch (error) {
                            mostrarToast(`Erro: ${error.message}`, 'error');
                        }
                    });
                }
                
                // Carregar tabela de caminhões
                carregarTabelaCaminhoes();
                
                function carregarTabelaCaminhoes() {
                    const caminhoes = DB.veiculosCadastrados.getAll();
                    const tabelaCaminhoes = document.getElementById('tabela-caminhoes');
                    
                    if (!tabelaCaminhoes) return;
                    
                    tabelaCaminhoes.innerHTML = '';
                    
                    if (caminhoes.length === 0) {
                        tabelaCaminhoes.innerHTML = `
                            <tr>
                                <td colspan="6" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                    Nenhum caminhão cadastrado
                                </td>
                            </tr>
                        `;
                    } else {
                        caminhoes.forEach(caminhao => {
                            const row = document.createElement('tr');
                            row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                            
                            const tipoTexto = caminhao.tipo === 'proprio' ? 'Próprio' : 'Terceiro';
                            const tipoClasse = caminhao.tipo === 'proprio' ? 'text-blue-600 dark:text-blue-400' : 'text-green-600 dark:text-green-400';
                            
                            row.innerHTML = `
                                <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${caminhao.id}</td>
                                <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${caminhao.placa}</td>
                                <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${caminhao.modelo || '-'}</td>
                                <td class="px-4 py-3 text-center ${tipoClasse} font-medium">${tipoTexto}</td>
                                <td class="px-4 py-3 text-center text-gray-700 dark:text-gray-300">${caminhao.capacidade ? formatarNumero(caminhao.capacidade) + ' T' : '-'}</td>
                                <td class="px-4 py-3 text-center">
                                    <button class="btn-editar-caminhao px-2 py-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300" data-id="${caminhao.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-excluir-caminhao px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${caminhao.id}">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            `;
                            
                            tabelaCaminhoes.appendChild(row);
                        });
                        
                        // Adicionar eventos de botões
                        document.querySelectorAll('.btn-editar-caminhao').forEach(btn => {
                            btn.addEventListener('click', function() {
                                const id = this.dataset.id;
                                const caminhao = DB.veiculosCadastrados.get(id);
                                
                                if (caminhao) {
                                    // Mostrar o card de cadastro
                                    cardCadastro.classList.remove('hidden');
                                    
                                    // Preencher os campos
                                    document.getElementById('cadastro-caminhao-id').value = caminhao.id;
                                    document.getElementById('cadastro-caminhao-id').disabled = true;
                                    document.getElementById('cadastro-caminhao-placa').value = caminhao.placa || '';
                                    document.getElementById('cadastro-caminhao-modelo').value = caminhao.modelo || '';
                                    document.getElementById('cadastro-caminhao-capacidade').value = caminhao.capacidade || '';
                                    document.getElementById('cadastro-caminhao-motorista').value = caminhao.motorista || '';
                                    document.getElementById('cadastro-caminhao-observacoes').value = caminhao.observacoes || '';
                                    
                                    // Definir o tipo
                                    if (caminhao.tipo === 'terceiro') {
                                        document.getElementById('tipo-terceiro').checked = true;
                                    } else {
                                        document.getElementById('tipo-proprio').checked = true;
                                    }
                                    
                                    // Atualizar texto do botão
                                    const submitBtn = document.querySelector('#form-cadastro-caminhao button[type="submit"]');
                                    submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i> Atualizar';
                                    
                                    // Rolar para o formulário
                                    cardCadastro.scrollIntoView({ behavior: 'smooth' });
                                }
                            });
                        });
                        
                        document.querySelectorAll('.btn-excluir-caminhao').forEach(btn => {
                            btn.addEventListener('click', function() {
                                const id = this.dataset.id;
                                
                                if (confirm(`Deseja realmente excluir o caminhão ${id}?`)) {
                                    try {
                                        DB.veiculosCadastrados.remove(id);
                                        mostrarToast(`Caminhão ${id} excluído com sucesso!`, 'success');
                                        carregarTabelaCaminhoes();
                                    } catch (error) {
                                        mostrarToast(`Erro ao excluir caminhão: ${error.message}`, 'error');
                                    }
                                }
                            });
                        });
                    }
                }
            }
            
            // Tab de registro de viagens
            function carregarTabRegistro() {
                // Preencher select de caminhões
                const caminhoes = DB.veiculosCadastrados.getAll();
                const selectCaminhao = document.getElementById('caminhao-id');
                
                if (selectCaminhao) {
                    // Manter a opção padrão
                    selectCaminhao.innerHTML = '<option value="">Selecione um caminhão</option>';
                    
                    caminhoes.forEach(caminhao => {
                        const option = document.createElement('option');
                        option.value = caminhao.id;
                        option.textContent = `${caminhao.id} - ${caminhao.placa} ${caminhao.modelo ? `(${caminhao.modelo})` : ''}`;
                        selectCaminhao.appendChild(option);
                    });
                }
                
                // Configurar data atual
                const inputData = document.getElementById('caminhao-data');
                if (inputData) {
                    const dataAtual = new Date().toISOString().split('T')[0];
                    inputData.value = dataAtual;
                }
                
                // Formulário de registro de viagem
                const formCaminhao = document.getElementById('form-caminhao');
                if (formCaminhao) {
                    formCaminhao.addEventListener('submit', function(e) {
                        e.preventDefault();
                        
                        const viagem = {
                            data: document.getElementById('caminhao-data').value,
                            caminhaoId: document.getElementById('caminhao-id').value,
                            producao: Number(document.getElementById('caminhao-producao').value),
                            cultura: document.getElementById('caminhao-cultura').value,
                            tempoCampo: Number(document.getElementById('caminhao-tempo-campo').value),
                            tempoPatio: Number(document.getElementById('caminhao-tempo-patio').value),
                            observacoes: document.getElementById('caminhao-observacoes').value
                        };
                        
                        try {
                            DB.caminhoes.add(viagem);
                            mostrarToast(`Viagem registrada com sucesso!`, 'success');
                            
                            // Limpar formulário, mas manter data e caminhão
                            const data = document.getElementById('caminhao-data').value;
                            const caminhaoId = document.getElementById('caminhao-id').value;
                            
                            formCaminhao.reset();
                            
                            document.getElementById('caminhao-data').value = data;
                            document.getElementById('caminhao-id').value = caminhaoId;
                            
                            // Recarregar histórico
                            carregarHistoricoCaminhoes();
                        } catch (error) {
                            mostrarToast(`Erro: ${error.message}`, 'error');
                        }
                    });
                }
                
                // Carregar histórico de viagens
                carregarHistoricoCaminhoes();
                
                function carregarHistoricoCaminhoes() {
                    const registros = DB.caminhoes.getAll();
                    const tabelaHistorico = document.getElementById('tabela-historico-caminhoes');
                    
                    if (!tabelaHistorico) return;
                    
                    tabelaHistorico.innerHTML = '';
                    
                    if (registros.length === 0) {
                        tabelaHistorico.innerHTML = `
                            <tr>
                                <td colspan="7" class="px-4 py-3 text-center text-gray-500 dark:text-gray-400">
                                    Nenhuma viagem registrada
                                </td>
                            </tr>
                        `;
                    } else {
                        // Ordenar por data (mais recentes primeiro)
                        registros.sort((a, b) => new Date(b.data) - new Date(a.data));
                        
                        registros.forEach(reg => {
                            const caminhao = DB.veiculosCadastrados.get(reg.caminhaoId);
                            const tipoTexto = caminhao && caminhao.tipo === 'terceiro' ? 'Terceiro' : 'Próprio';
                            const tipoClasse = caminhao && caminhao.tipo === 'terceiro' ? 'text-green-600 dark:text-green-400' : 'text-blue-600 dark:text-blue-400';
                            
                            const row = document.createElement('tr');
                            row.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-700');
                            
                            row.innerHTML = `
                                <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${formatarData(reg.data)}</td>
                                <td class="px-4 py-3 text-gray-700 dark:text-gray-300">${reg.caminhaoId}</td>
                                <td class="px-4 py-3 text-center ${tipoClasse} font-medium">${tipoTexto}</td>
                                <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${formatarNumero(reg.producao)}</td>
                                <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${reg.tempoCampo} min</td>
                                <td class="px-4 py-3 text-right text-gray-700 dark:text-gray-300">${reg.tempoPatio} min</td>
                                <td class="px-4 py-3 text-center">
                                    <button class="btn-excluir-viagem px-2 py-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300" data-id="${reg.id}">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            `;
                            
                            tabelaHistorico.appendChild(row);
                        });
                        
                        // Adicionar evento de exclusão
                        document.querySelectorAll('.btn-excluir-viagem').forEach(btn => {
                            btn.addEventListener('click', function() {
                                const id = this.dataset.id;
                                
                                if (confirm(`Deseja realmente excluir esta viagem?`)) {
                                    try {
                                        DB.caminhoes.remove(id);
                                        mostrarToast(`Viagem excluída com sucesso!`, 'success');
                                        carregarHistoricoCaminhoes();
                                    } catch (error) {
                                        mostrarToast(`Erro ao excluir viagem: ${error.message}`, 'error');
                                    }
                                }
                            });
                        });
                    }
                }
            }
            
            // Tab de estatísticas
            function carregarTabEstatisticas() {
                // Obter estatísticas gerais
                const estatisticas = DB.caminhoes.getStats();
                
                // Atualizar cards
                document.getElementById('estatisticas-total-producao-caminhoes').textContent = `${formatarNumero(estatisticas.totalProducao)} T`;
                document.getElementById('estatisticas-media-campo').textContent = `${formatarNumero(estatisticas.mediaTempoCampo)} min`;
                document.getElementById('estatisticas-media-patio').textContent = `${formatarNumero(estatisticas.mediaTempoPatio)} min`;
                document.getElementById('estatisticas-total-registros-caminhoes').textContent = estatisticas.totalViagens;
                
                // Atualizar próprios vs terceiros
                document.getElementById('estatisticas-producao-proprios').textContent = `${formatarNumero(estatisticas.proprios.producao)} T`;
                document.getElementById('estatisticas-producao-terceiros').textContent = `${formatarNumero(estatisticas.terceiros.producao)} T`;
                
                // Gráfico de próprios vs terceiros
                const ctxPropTerceiros = document.getElementById('estatisticas-chart-proprios-terceiros');
                if (ctxPropTerceiros) {
                    const ctx = ctxPropTerceiros.getContext('2d');
                    if (window.chartEstatisticasPropTerceiros) window.chartEstatisticasPropTerceiros.destroy();
                    
                    window.chartEstatisticasPropTerceiros = new Chart(ctx, {
                        type: 'pie',
                        data: {
                            labels: ['Próprios', 'Terceiros'],
                            datasets: [
                                {
                                    data: [estatisticas.proprios.producao, estatisticas.terceiros.producao],
                                    backgroundColor: ['rgba(59, 130, 246, 0.7)', 'rgba(52, 211, 153, 0.7)'],
                                    borderWidth: 1
                                }
                            ]
                        },
                        options: {
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                }
                            },
                            responsive: true,
                            maintainAspectRatio: false
                        }
                    });
                }
            }
            
            // Inicializar a primeira tab
            carregarTabCadastro();
            carregarTabRegistro();
            carregarTabEstatisticas();
            
            // Configurar switches de tabs
            caminhoesTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Atualizar tabs ativas
                    caminhoesTabs.forEach(t => t.classList.remove('tab-active'));
                    this.classList.add('tab-active');
                    
                    // Mostrar conteúdo correspondente
                    caminhoesTabContents.forEach(content => content.classList.add('hidden'));
                    document.getElementById(`tab-${tabId}`).classList.remove('hidden');
                    
                    // Recarregar tabs específicas quando necessário
                    if (tabId === 'estatisticas') {
                        carregarTabEstatisticas();
                    }
                });
            });
            
            // Exportar caminhões
            const btnExportCaminhoes = document.getElementById('btn-export-caminhoes');
            if (btnExportCaminhoes) {
                btnExportCaminhoes.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('caminhoes-cadastro');
                        mostrarToast('Relatório de caminhões gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Exportar viagens
            const btnExportViagens = document.getElementById('btn-export-viagens');
            if (btnExportViagens) {
                btnExportViagens.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('caminhoes-viagens');
                        mostrarToast('Relatório de viagens gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            // Exportar estatísticas
            const btnExportEstatisticas = document.getElementById('btn-export-estatisticas');
            if (btnExportEstatisticas) {
                btnExportEstatisticas.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('caminhoes-estatisticas');
                        mostrarToast('Relatório de estatísticas gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
        }
        
        // Configurar funcionalidades da página de configurações
        function carregarPaginaConfiguracoes() {
            // Modal para limpar dados
            const btnLimparDados = document.getElementById('btn-limpar-dados');
            const modalLimparDados = document.getElementById('modal-limpar-dados');
            const btnCancelarLimpar = document.getElementById('btn-cancelar-limpar');
            const btnConfirmarLimpar = document.getElementById('btn-confirmar-limpar');
            const inputConfirmacao = document.getElementById('confirmacao-texto');
            
            if (btnLimparDados && modalLimparDados && btnCancelarLimpar && btnConfirmarLimpar && inputConfirmacao) {
                // Abrir modal
                btnLimparDados.addEventListener('click', function() {
                    modalLimparDados.classList.remove('hidden');
                    inputConfirmacao.value = '';
                    btnConfirmarLimpar.disabled = true;
                    btnConfirmarLimpar.classList.add('opacity-50', 'cursor-not-allowed');
                });
                
                // Verificar texto de confirmação
                inputConfirmacao.addEventListener('input', function() {
                    if (inputConfirmacao.value === 'CONFIRMAR') {
                        btnConfirmarLimpar.disabled = false;
                        btnConfirmarLimpar.classList.remove('opacity-50', 'cursor-not-allowed');
                    } else {
                        btnConfirmarLimpar.disabled = true;
                        btnConfirmarLimpar.classList.add('opacity-50', 'cursor-not-allowed');
                    }
                });
                
                // Fechar modal
                btnCancelarLimpar.addEventListener('click', function() {
                    modalLimparDados.classList.add('hidden');
                });
                
                // Confirmar limpeza
                btnConfirmarLimpar.addEventListener('click', function() {
                    if (inputConfirmacao.value === 'CONFIRMAR') {
                        try {
                            DB.clearAll();
                            modalLimparDados.classList.add('hidden');
                            mostrarToast('Todos os dados foram limpos com sucesso!', 'success');
                            
                            // Recarregar a página para reinicializar o sistema
                            setTimeout(() => {
                                window.location.reload();
                            }, 1500);
                        } catch (error) {
                            mostrarToast(`Erro ao limpar dados: ${error.message}`, 'error');
                        }
                    }
                });
            }
            
            // Botão para exportar JSON
            const btnExportarJson = document.getElementById('btn-exportar-json');
            if (btnExportarJson) {
                btnExportarJson.addEventListener('click', function() {
                    try {
                        // Obter dados
                        const dados = DB.exportData();
                        
                        // Criar arquivo para download
                        const blob = new Blob([dados], { type: 'application/json' });
                        const url = URL.createObjectURL(blob);
                        
                        // Nome do arquivo com data atual
                        const dataAtual = new Date().toISOString().split('T')[0];
                        const nomeArquivo = `ggomes_log_backup_${dataAtual}.json`;
                        
                        // Criar link e simular clique
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = nomeArquivo;
                        document.body.appendChild(a);
                        a.click();
                        
                        // Limpar
                        setTimeout(() => {
                            document.body.removeChild(a);
                            window.URL.revokeObjectURL(url);
                        }, 0);
                        
                        mostrarToast('Backup exportado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao exportar backup: ${error.message}`, 'error');
                    }
                });
            }
            
            // Botão para importar JSON
            const btnImportarJson = document.getElementById('btn-importar-json');
            const importJsonFile = document.getElementById('import-json-file');
            
            if (btnImportarJson && importJsonFile) {
                btnImportarJson.addEventListener('click', function() {
                    importJsonFile.click();
                });
                
                importJsonFile.addEventListener('change', function() {
                    if (this.files && this.files[0]) {
                        const file = this.files[0];
                        
                        if (file.type !== 'application/json' && !file.name.endsWith('.json')) {
                            mostrarToast('O arquivo selecionado não é um JSON válido.', 'error');
                            return;
                        }
                        
                        const reader = new FileReader();
                        
                        reader.onload = function(e) {
                            try {
                                const jsonData = e.target.result;
                                
                                // Perguntar confirmação
                                if (confirm('Esta ação irá substituir todos os dados atuais. Continuar?')) {
                                    DB.importData(jsonData);
                                    mostrarToast('Dados restaurados com sucesso!', 'success');
                                    
                                    // Recarregar a página para atualizar visualização
                                    setTimeout(() => {
                                        window.location.reload();
                                    }, 1500);
                                }
                            } catch (error) {
                                mostrarToast(`Erro ao importar dados: ${error.message}`, 'error');
                            }
                        };
                        
                        reader.readAsText(file);
                    }
                });
            }
            
            // Botões de relatório PDF
            const btnRelatorioProducao = document.getElementById('btn-relatorio-producao');
            const btnRelatorioColhedoras = document.getElementById('btn-relatorio-colhedoras');
            const btnRelatorioCaminhoes = document.getElementById('btn-relatorio-caminhoes');
            
            if (btnRelatorioProducao) {
                btnRelatorioProducao.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('producao');
                        mostrarToast('Relatório de produção gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            if (btnRelatorioColhedoras) {
                btnRelatorioColhedoras.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('colhedoras');
                        mostrarToast('Relatório de colhedoras gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
            
            if (btnRelatorioCaminhoes) {
                btnRelatorioCaminhoes.addEventListener('click', function() {
                    try {
                        gerarRelatorioPDF('caminhoes');
                        mostrarToast('Relatório de frota gerado com sucesso!', 'success');
                    } catch (error) {
                        mostrarToast(`Erro ao gerar relatório: ${error.message}`, 'error');
                    }
                });
            }
        }
        
        // Função para gerar relatórios em PDF
        function gerarRelatorioPDF(tipo) {
            // Verificar se jsPDF está disponível
            if (typeof jspdf === 'undefined' || typeof jspdf.jsPDF === 'undefined') {
                throw new Error('A biblioteca jsPDF não está disponível');
            }
            
            // Inicializar jsPDF
            const { jsPDF } = jspdf;
            const doc = new jsPDF();
            
            // Configurações gerais
            const dataAtual = new Date().toLocaleDateString('pt-BR');
            const horaAtual = new Date().toLocaleTimeString('pt-BR');
            
            // Função para adicionar cabeçalho
            function adicionarCabecalho(titulo) {
                doc.setFontSize(18);
                doc.setTextColor(93, 92, 222); // #5D5CDE
                doc.text('GGOMES-LOG', 105, 15, { align: 'center' });
                
                doc.setFontSize(14);
                doc.text(titulo, 105, 25, { align: 'center' });
                
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Gerado em: ${dataAtual} às ${horaAtual}`, 105, 30, { align: 'center' });
                
                doc.line(20, 35, 190, 35);
                
                // Retornar posição Y para continuar depois do cabeçalho
                return 45;
            }
            
            // Função para adicionar rodapé
            function adicionarRodape() {
                const totalPaginas = doc.getNumberOfPages();
                
                for (let i = 1; i <= totalPaginas; i++) {
                    doc.setPage(i);
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text(`Página ${i} de ${totalPaginas}`, 105, 290, { align: 'center' });
                    doc.text('© GGOMES-LOG - Sistema de Gestão Agrícola', 105, 295, { align: 'center' });
                }
            }
            
            // Gerar relatório com base no tipo
            switch (tipo) {
                case 'producao':
                    // Relatório de produção
                    let y = adicionarCabecalho('Relatório de Produção');
                    
                    // Obter dados
                    const estatisticas = DB.registros.getEquipmentStats();
                    const registros = DB.registros.getAll();
                    
                    // Calcular totais
                    let totalQuantidade = 0;
                    let totalHoras = 0;
                    
                    estatisticas.forEach(equip => {
                        totalQuantidade += equip.quantidade;
                        totalHoras += equip.horas;
                    });
                    
                    // Estatísticas gerais
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Estatísticas Gerais', 20, y);
                    
                    y += 10;
                    
                    doc.setFontSize(10);
                    doc.text(`Total Colhido: ${formatarNumero(totalQuantidade)} T`, 20, y);
                    y += 7;
                    doc.text(`Total de Horas: ${formatarNumero(totalHoras, 1)} h`, 20, y);
                    y += 7;
                    doc.text(`Rendimento Médio: ${formatarNumero(totalHoras > 0 ? totalQuantidade / totalHoras : 0)} T/h`, 20, y);
                    y += 7;
                    doc.text(`Dias de Parada por Chuva: ${formatarNumero(DB.chuvas.getTotalDias(), 1)} dias`, 20, y);
                    y += 7;
                    doc.text(`Total de Registros: ${registros.length}`, 20, y);
                    
                    y += 15;
                    
                    // Tabela de colhedoras
                    doc.setFontSize(12);
                    doc.text('Produção por Colhedora', 20, y);
                    
                    y += 8;
                    
                    // Cabeçalho da tabela
                    doc.setFillColor(235, 235, 235);
                    doc.rect(20, y, 160, 7, 'F');
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(10);
                    doc.text('Colhedora', 25, y + 5);
                    doc.text('Quantidade (T)', 80, y + 5);
                    doc.text('Horas', 115, y + 5);
                    doc.text('Rendimento (T/h)', 150, y + 5);
                    
                    y += 10;
                    
                    // Ordenar por produção
                    estatisticas.sort((a, b) => b.quantidade - a.quantidade);
                    
                    // Linhas da tabela
                    estatisticas.forEach(equip => {
                        const rendimento = equip.horas > 0 ? equip.quantidade / equip.horas : 0;
                        
                        doc.text(equip.id, 25, y);
                        doc.text(formatarNumero(equip.quantidade), 80, y);
                        doc.text(formatarNumero(equip.horas, 1), 115, y);
                        doc.text(formatarNumero(rendimento), 150, y);
                        
                        y += 7;
                        
                        // Nova página se necessário
                        if (y > 270) {
                            doc.addPage();
                            y = 20;
                        }
                    });
                    
                    // Adicionar rodapé
                    adicionarRodape();
                    
                    // Salvar arquivo
                    doc.save(`ggomes_log_relatorio_producao_${new Date().toISOString().split('T')[0]}.pdf`);
                    break;
                    
                case 'colhedoras':
                    // Relatório de colhedoras
                    y = adicionarCabecalho('Relatório de Colhedoras');
                    
                    // Obter dados
                    const colhedoras = DB.colhedoras.getAll();
                    
                    // Total
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text(`Total de Colhedoras: ${colhedoras.length}`, 20, y);
                    
                    y += 15;
                    
                    // Tabela de colhedoras
                    // Cabeçalho da tabela
                    doc.setFillColor(235, 235, 235);
                    doc.rect(20, y, 160, 7, 'F');
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(10);
                    doc.text('ID', 25, y + 5);
                    doc.text('Marca', 60, y + 5);
                    doc.text('Modelo', 100, y + 5);
                    doc.text('Ano', 150, y + 5);
                    
                    y += 10;
                    
                    // Ordenar por ID
                    colhedoras.sort((a, b) => a.id.localeCompare(b.id));
                    
                    // Linhas da tabela
                    colhedoras.forEach(col => {
                        doc.text(col.id, 25, y);
                        doc.text(col.marca || '-', 60, y);
                        doc.text(col.modelo || '-', 100, y);
                        doc.text(col.ano ? col.ano.toString() : '-', 150, y);
                        
                        y += 7;
                        
                        // Nova página se necessário
                        if (y > 270) {
                            doc.addPage();
                            y = 20;
                        }
                    });
                    
                    // Adicionar rodapé
                    adicionarRodape();
                    
                    // Salvar arquivo
                    doc.save(`ggomes_log_relatorio_colhedoras_${new Date().toISOString().split('T')[0]}.pdf`);
                    break;
                    
                case 'caminhoes':
                    // Relatório de caminhões
                    y = adicionarCabecalho('Relatório de Frota');
                    
                    // Obter dados
                    const veiculos = DB.veiculosCadastrados.getAll();
                    const estatisticasCaminhoes = DB.caminhoes.getStats();
                    
                    // Estatísticas gerais
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Estatísticas Gerais da Frota', 20, y);
                    
                    y += 10;
                    
                    doc.setFontSize(10);
                    doc.text(`Total de Caminhões: ${veiculos.length}`, 20, y);
                    y += 7;
                    doc.text(`Caminhões Próprios: ${veiculos.filter(v => v.tipo === 'proprio').length}`, 20, y);
                    y += 7;
                    doc.text(`Caminhões Terceiros: ${veiculos.filter(v => v.tipo === 'terceiro').length}`, 20, y);
                    y += 7;
                    doc.text(`Produção Total: ${formatarNumero(estatisticasCaminhoes.totalProducao)} T`, 20, y);
                    y += 7;
                    doc.text(`Total de Viagens: ${estatisticasCaminhoes.totalViagens}`, 20, y);
                    
                    y += 15;
                    
                    // Tabela de caminhões
                    doc.setFontSize(12);
                    doc.text('Caminhões Cadastrados', 20, y);
                    
                    y += 8;
                    
                    // Cabeçalho da tabela
                    doc.setFillColor(235, 235, 235);
                    doc.rect(20, y, 170, 7, 'F');
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(10);
                    doc.text('ID', 25, y + 5);
                    doc.text('Placa', 60, y + 5);
                    doc.text('Tipo', 100, y + 5);
                    doc.text('Capacidade (T)', 130, y + 5);
                    doc.text('Motorista', 170, y + 5);
                    
                    y += 10;
                    
                    // Ordenar por ID
                    veiculos.sort((a, b) => a.id.localeCompare(b.id));
                    
                    // Linhas da tabela
                    veiculos.forEach(veiculo => {
                        doc.text(veiculo.id, 25, y);
                        doc.text(veiculo.placa || '-', 60, y);
                        doc.text(veiculo.tipo === 'proprio' ? 'Próprio' : 'Terceiro', 100, y);
                        doc.text(veiculo.capacidade ? veiculo.capacidade.toString() : '-', 130, y);
                        doc.text(veiculo.motorista || '-', 170, y);
                        
                        y += 7;
                        
                        // Nova página se necessário
                        if (y > 270) {
                            doc.addPage();
                            y = 20;
                        }
                    });
                    
                    // Adicionar rodapé
                    adicionarRodape();
                    
                    // Salvar arquivo
                    doc.save(`ggomes_log_relatorio_frota_${new Date().toISOString().split('T')[0]}.pdf`);
                    break;
                    
                case 'registros':
                    // Relatório de registros
                    y = adicionarCabecalho('Histórico de Registros');
                    
                    // Obter dados
                    const registrosHistorico = DB.registros.getAll();
                    
                    // Estatísticas resumidas
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text(`Total de Registros: ${registrosHistorico.length}`, 20, y);
                    
                    y += 15;
                    
                    // Tabela de registros
                    // Cabeçalho da tabela
                    doc.setFillColor(235, 235, 235);
                    doc.rect(20, y, 170, 7, 'F');
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(9);
                    doc.text('Data', 25, y + 5);
                    doc.text('Colhedora', 55, y + 5);
                    doc.text('Cultura', 85, y + 5);
                    doc.text('Quantidade (T)', 115, y + 5);
                    doc.text('Horas', 145, y + 5);
                    doc.text('Rendimento', 170, y + 5);
                    
                    y += 10;
                    
                    // Ordenar por data (mais recente primeiro)
                    registrosHistorico.sort((a, b) => new Date(b.data) - new Date(a.data));
                    
                    // Limitar a 30 registros por página
                    const registrosPorPagina = registrosHistorico.slice(0, 30);
                    
                    // Linhas da tabela
                    registrosPorPagina.forEach(reg => {
                        const rendimento = reg.horas > 0 ? reg.quantidade / reg.horas : 0;
                        
                        doc.setFontSize(8);
                        doc.text(formatarData(reg.data), 25, y);
                        doc.text(reg.colhedoraId, 55, y);
                        doc.text(reg.cultura || '-', 85, y);
                        doc.text(formatarNumero(reg.quantidade), 115, y);
                        doc.text(formatarNumero(reg.horas, 1), 145, y);
                        doc.text(formatarNumero(rendimento), 170, y);
                        
                        y += 6;
                        
                        // Nova página se necessário
                        if (y > 270) {
                            doc.addPage();
                            y = 20;
                            
                            // Re-adicionar cabeçalho da tabela
                            doc.setFillColor(235, 235, 235);
                            doc.rect(20, y, 170, 7, 'F');
                            doc.setTextColor(0, 0, 0);
                            doc.setFontSize(9);
                            doc.text('Data', 25, y + 5);
                            doc.text('Colhedora', 55, y + 5);
                            doc.text('Cultura', 85, y + 5);
                            doc.text('Quantidade (T)', 115, y + 5);
                            doc.text('Horas', 145, y + 5);
                            doc.text('Rendimento', 170, y + 5);
                            
                            y += 10;
                        }
                    });
                    
                    // Adicionar rodapé
                    adicionarRodape();
                    
                    // Salvar arquivo
                    doc.save(`ggomes_log_relatorio_registros_${new Date().toISOString().split('T')[0]}.pdf`);
                    break;
                    
                case 'chuvas':
                    // Relatório de chuvas
                    y = adicionarCabecalho('Relatório de Paradas por Chuva');
                    
                    // Obter dados
                    const chuvas = DB.chuvas.getAll();
                    const totalDias = DB.chuvas.getTotalDias();
                    const impactoEstimado = DB.chuvas.calcularImpactoEstimado();
                    
                    // Estatísticas resumidas
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Estatísticas Gerais', 20, y);
                    
                    y += 10;
                    
                    doc.setFontSize(10);
                    doc.text(`Total de Registros: ${chuvas.length}`, 20, y);
                    y += 7;
                    doc.text(`Total de Dias Parados: ${formatarNumero(totalDias, 1)} dias`, 20, y);
                    y += 7;
                    doc.text(`Impacto Estimado: ${formatarNumero(impactoEstimado)} T`, 20, y);
                    
                    y += 15;
                    
                    // Tabela de paradas
                    doc.setFontSize(12);
                    doc.text('Histórico de Paradas', 20, y);
                    
                    y += 8;
                    
                    // Cabeçalho da tabela
                    doc.setFillColor(235, 235, 235);
                    doc.rect(20, y, 160, 7, 'F');
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(10);
                    doc.text('Período', 25, y + 5);
                    doc.text('Dias', 80, y + 5);
                    doc.text('Intensidade', 100, y + 5);
                    doc.text('Observações', 140, y + 5);
                    
                    y += 10;
                    
                    // Ordenar por data (mais recente primeiro)
                    chuvas.sort((a, b) => new Date(b.dataFim) - new Date(a.dataFim));
                    
                    // Linhas da tabela
                    chuvas.forEach(chuva => {
                        let intensidadeTexto = 'Média';
                        
                        if (chuva.intensidade === 'baixa') {
                            intensidadeTexto = 'Baixa';
                        } else if (chuva.intensidade === 'alta') {
                            intensidadeTexto = 'Alta';
                        }
                        
                        doc.text(formatarPeriodo(chuva.dataInicio, chuva.dataFim), 25, y);
                        doc.text(formatarNumero(chuva.dias, 1), 80, y);
                        doc.text(intensidadeTexto, 100, y);
                        doc.text(chuva.observacoes || '-', 140, y);
                        
                        y += 7;
                        
                        // Nova página se necessário
                        if (y > 270) {
                            doc.addPage();
                            y = 20;
                        }
                    });
                    
                    // Adicionar rodapé
                    adicionarRodape();
                    
                    // Salvar arquivo
                    doc.save(`ggomes_log_relatorio_chuvas_${new Date().toISOString().split('T')[0]}.pdf`);
                    break;
                    
                case 'caminhoes-cadastro':
                    // Relatório de caminhões cadastrados
                    y = adicionarCabecalho('Cadastro de Caminhões');
                    
                    // Obter dados
                    const caminhoesCadastrados = DB.veiculosCadastrados.getAll();
                    
                    // Estatísticas resumidas
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Resumo da Frota', 20, y);
                    
                    y += 10;
                    
                    doc.setFontSize(10);
                    doc.text(`Total de Caminhões: ${caminhoesCadastrados.length}`, 20, y);
                    y += 7;
                    const camiProprios = caminhoesCadastrados.filter(c => c.tipo === 'proprio').length;
                    doc.text(`Caminhões Próprios: ${camiProprios}`, 20, y);
                    y += 7;
                    const camiTerceiros = caminhoesCadastrados.filter(c => c.tipo === 'terceiro').length;
                    doc.text(`Caminhões Terceiros: ${camiTerceiros}`, 20, y);
                    
                    y += 15;
                    
                    // Tabela de caminhões
                    doc.setFontSize(12);
                    doc.text('Caminhões Cadastrados', 20, y);
                    
                    y += 8;
                    
                    // Cabeçalho da tabela
                    doc.setFillColor(235, 235, 235);
                    doc.rect(20, y, 170, 7, 'F');
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(9);
                    doc.text('ID', 25, y + 5);
                    doc.text('Placa', 45, y + 5);
                    doc.text('Tipo', 75, y + 5);
                    doc.text('Modelo', 95, y + 5);
                    doc.text('Capacidade', 135, y + 5);
                    doc.text('Motorista', 165, y + 5);
                    
                    y += 10;
                    
                    // Ordenar por ID
                    caminhoesCadastrados.sort((a, b) => a.id.localeCompare(b.id));
                    
                    // Linhas da tabela
                    caminhoesCadastrados.forEach(cam => {
                        doc.setFontSize(8);
                        doc.text(cam.id, 25, y);
                        doc.text(cam.placa || '-', 45, y);
                        doc.text(cam.tipo === 'proprio' ? 'Próprio' : 'Terceiro', 75, y);
                        doc.text(cam.modelo || '-', 95, y);
                        doc.text(cam.capacidade ? `${cam.capacidade} T` : '-', 135, y);
                        doc.text(cam.motorista || '-', 165, y);
                        
                        y += 6;
                        
                        // Nova página se necessário
                        if (y > 270) {
                            doc.addPage();
                            y = 20;
                            
                            // Re-adicionar cabeçalho da tabela
                            doc.setFillColor(235, 235, 235);
                            doc.rect(20, y, 170, 7, 'F');
                            doc.setTextColor(0, 0, 0);
                            doc.setFontSize(9);
                            doc.text('ID', 25, y + 5);
                            doc.text('Placa', 45, y + 5);
                            doc.text('Tipo', 75, y + 5);
                            doc.text('Modelo', 95, y + 5);
                            doc.text('Capacidade', 135, y + 5);
                            doc.text('Motorista', 165, y + 5);
                            
                            y += 10;
                        }
                    });
                    
                    // Adicionar rodapé
                    adicionarRodape();
                    
                    // Salvar arquivo
                    doc.save(`ggomes_log_relatorio_caminhoes_cadastro_${new Date().toISOString().split('T')[0]}.pdf`);
                    break;
                    
                case 'caminhoes-viagens':
                    // Relatório de viagens de caminhões
                    y = adicionarCabecalho('Relatório de Viagens');
                    
                    // Obter dados
                    const viagens = DB.caminhoes.getAll();
                    
                    // Estatísticas resumidas
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text('Resumo de Viagens', 20, y);
                    
                    y += 10;
                    
                    // Calcular totais
                    let totalProducaoCaminhoes = 0;
                    let totalTempoCampo = 0;
                    let totalTempoPatio = 0;
                    
                    viagens.forEach(v => {
                        totalProducaoCaminhoes += Number(v.producao) || 0;
                        totalTempoCampo += Number(v.tempoCampo) || 0;
                        totalTempoPatio += Number(v.tempoPatio) || 0;
                    });
                    
                    doc.setFontSize(10);
                    doc.text(`Total de Viagens: ${viagens.length}`, 20, y);
                    y += 7;
                    doc.text(`Produção Total: ${formatarNumero(totalProducaoCaminhoes)} T`, 20, y);
                    y += 7;
                    const mediaTempoCampo = viagens.length > 0 ? totalTempoCampo / viagens.length : 0;
                    doc.text(`Tempo Médio de Campo: ${formatarNumero(mediaTempoCampo)} min`, 20, y);
                    y += 7;
                    const mediaTempoPatio = viagens.length > 0 ? totalTempoPatio / viagens.length : 0;
                    doc.text(`Tempo Médio de Pátio: ${formatarNumero(mediaTempoPatio)} min`, 20, y);
                    
                    y += 15;
                    
                    // Tabela de viagens
                    doc.setFontSize(12);
                    doc.text('Histórico de Viagens', 20, y);
                    
                    y += 8;
                    
                    // Cabeçalho da tabela
                    doc.setFillColor(235, 235, 235);
                    doc.rect(20, y, 170, 7, 'F');
                    doc.setTextColor(0, 0, 0);
                    doc.setFontSize(9);
                    doc.text('Data', 25, y + 5);
                    doc.text('Caminhão', 50, y + 5);
                    doc.text('Cultura', 75, y + 5);
                    doc.text('Produção', 105, y + 5);
                    doc.text('T. Campo', 135, y + 5);
                    doc.text('T. Pátio', 165, y + 5);
                    
                    y += 10;
                    
                    // Ordenar por data (mais recente primeiro)
                    viagens.sort((a, b) => new Date(b.data) - new Date(a.data));
                    
                    // Linhas da tabela
                    viagens.forEach(viagem => {
                        doc.setFontSize(8);
                        doc.text(formatarData(viagem.data), 25, y);
                        doc.text(viagem.caminhaoId, 50, y);
                        doc.text(viagem.cultura || '-', 75, y);
                        doc.text(`${formatarNumero(viagem.producao)} T`, 105, y);
                        doc.text(`${viagem.tempoCampo} min`, 135, y);
                        doc.text(`${viagem.tempoPatio} min`, 165, y);
                        
                        y += 6;
                        
                        // Nova página se necessário
                        if (y > 270) {
                            doc.addPage();
                            y = 20;
                            
                            // Re-adicionar cabeçalho da tabela
                            doc.setFillColor(235, 235, 235);
                            doc.rect(20, y, 170, 7, 'F');
                            doc.setTextColor(0, 0, 0);
                            doc.setFontSize(9);
                            doc.text('Data', 25, y + 5);
                            doc.text('Caminhão', 50, y + 5);
                            doc.text('Cultura', 75, y + 5);
                            doc.text('Produção', 105, y + 5);
                            doc.text('T. Campo', 135, y + 5);
                            doc.text('T. Pátio', 165, y + 5);
                            
                            y += 10;
                        }
                    });
                    
                    // Adicionar rodapé
                    adicionarRodape();
                    
                    // Salvar arquivo
                    doc.save(`ggomes_log_relatorio_viagens_${new Date().toISOString().split('T')[0]}.pdf`);
                    break;
                
                default:
                    throw new Error(`Tipo de relatório "${tipo}" não implementado`);
            }
            
            return true;
        }
        
        // Inicializar quando o DOM estiver pronto
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar banco de dados
            DB.init();
            
            // Verificar e criar notificação inicial
            criarNotificacaoInicial();
            
            // Configurar tema
            configurarTema();
            
            // Atualizar data atual
            atualizarDataAtual();
            
            // Dados meteorológicos simulados
            carregarDadosMeteorologicos();
            
            // Carregar notificações
            atualizarContadorNotificacoes();
            
            // Inicializar navegação
            configurarNavegacao();
            
            // Configurar painel de notificações
            configurarPainelNotificacoes();
            
            // Carregar todas as páginas
            carregarDadosDashboard();
            carregarPaginaColhedoras();
            carregarPaginaRegistros();
            carregarPaginaHistorico();
            carregarPaginaChuvas();
            carregarPaginaCaminhoes();
            carregarPaginaConfiguracoes();
            
            // Atualizar dados meteorológicos a cada 5 minutos
            setInterval(carregarDadosMeteorologicos, 5 * 60 * 1000);
            
            // Atualizar data atual a cada minuto
            setInterval(atualizarDataAtual, 60 * 1000);
            
            // Mostrar mensagem inicial
            mostrarToast('Sistema inicializado com sucesso!', 'success');
        });
    </script>
</body>
</html>